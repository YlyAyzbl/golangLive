import{k as Ct,d as Tt,r as be,o as wt,c as It,e as ue,g as Se,u as Dt,l as Pt,j as Mt,w as Ce,b as Bt,i as Ge,a as kt,p as Ft,f as Ut,_ as jt}from"./index-bf16038a.js";const ce=Object.create(null);ce.open="0";ce.close="1";ce.ping="2";ce.pong="3";ce.message="4";ce.upgrade="5";ce.noop="6";const Fe=Object.create(null);Object.keys(ce).forEach(p=>{Fe[ce[p]]=p});const Nt={type:"error",data:"parser error"},Vt=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",Kt=typeof ArrayBuffer=="function",Wt=p=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(p):p&&p.buffer instanceof ArrayBuffer,at=({type:p,data:e},i,v)=>Vt&&e instanceof Blob?i?v(e):Ze(e,v):Kt&&(e instanceof ArrayBuffer||Wt(e))?i?v(e):Ze(new Blob([e]),v):v(ce[p]+(e||"")),Ze=(p,e)=>{const i=new FileReader;return i.onload=function(){const v=i.result.split(",")[1];e("b"+(v||""))},i.readAsDataURL(p)},qe="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",we=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let p=0;p<qe.length;p++)we[qe.charCodeAt(p)]=p;const Gt=p=>{let e=p.length*.75,i=p.length,v,w=0,B,T,A,y;p[p.length-1]==="="&&(e--,p[p.length-2]==="="&&e--);const L=new ArrayBuffer(e),_=new Uint8Array(L);for(v=0;v<i;v+=4)B=we[p.charCodeAt(v)],T=we[p.charCodeAt(v+1)],A=we[p.charCodeAt(v+2)],y=we[p.charCodeAt(v+3)],_[w++]=B<<2|T>>4,_[w++]=(T&15)<<4|A>>2,_[w++]=(A&3)<<6|y&63;return L},zt=typeof ArrayBuffer=="function",ut=(p,e)=>{if(typeof p!="string")return{type:"message",data:lt(p,e)};const i=p.charAt(0);return i==="b"?{type:"message",data:Ht(p.substring(1),e)}:Fe[i]?p.length>1?{type:Fe[i],data:p.substring(1)}:{type:Fe[i]}:Nt},Ht=(p,e)=>{if(zt){const i=Gt(p);return lt(i,e)}else return{base64:!0,data:p}},lt=(p,e)=>{switch(e){case"blob":return p instanceof ArrayBuffer?new Blob([p]):p;case"arraybuffer":default:return p}},ft=String.fromCharCode(30),Yt=(p,e)=>{const i=p.length,v=new Array(i);let w=0;p.forEach((B,T)=>{at(B,!1,A=>{v[T]=A,++w===i&&e(v.join(ft))})})},Xt=(p,e)=>{const i=p.split(ft),v=[];for(let w=0;w<i.length;w++){const B=ut(i[w],e);if(v.push(B),B.type==="error")break}return v},ht=4;function Z(p){if(p)return Jt(p)}function Jt(p){for(var e in Z.prototype)p[e]=Z.prototype[e];return p}Z.prototype.on=Z.prototype.addEventListener=function(p,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+p]=this._callbacks["$"+p]||[]).push(e),this};Z.prototype.once=function(p,e){function i(){this.off(p,i),e.apply(this,arguments)}return i.fn=e,this.on(p,i),this};Z.prototype.off=Z.prototype.removeListener=Z.prototype.removeAllListeners=Z.prototype.removeEventListener=function(p,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var i=this._callbacks["$"+p];if(!i)return this;if(arguments.length==1)return delete this._callbacks["$"+p],this;for(var v,w=0;w<i.length;w++)if(v=i[w],v===e||v.fn===e){i.splice(w,1);break}return i.length===0&&delete this._callbacks["$"+p],this};Z.prototype.emit=function(p){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),i=this._callbacks["$"+p],v=1;v<arguments.length;v++)e[v-1]=arguments[v];if(i){i=i.slice(0);for(var v=0,w=i.length;v<w;++v)i[v].apply(this,e)}return this};Z.prototype.emitReserved=Z.prototype.emit;Z.prototype.listeners=function(p){return this._callbacks=this._callbacks||{},this._callbacks["$"+p]||[]};Z.prototype.hasListeners=function(p){return!!this.listeners(p).length};const oe=(()=>typeof self<"u"?self:typeof window<"u"?window:Function("return this")())();function dt(p,...e){return e.reduce((i,v)=>(p.hasOwnProperty(v)&&(i[v]=p[v]),i),{})}const Qt=oe.setTimeout,$t=oe.clearTimeout;function Ne(p,e){e.useNativeTimers?(p.setTimeoutFn=Qt.bind(oe),p.clearTimeoutFn=$t.bind(oe)):(p.setTimeoutFn=oe.setTimeout.bind(oe),p.clearTimeoutFn=oe.clearTimeout.bind(oe))}const Zt=1.33;function qt(p){return typeof p=="string"?er(p):Math.ceil((p.byteLength||p.size)*Zt)}function er(p){let e=0,i=0;for(let v=0,w=p.length;v<w;v++)e=p.charCodeAt(v),e<128?i+=1:e<2048?i+=2:e<55296||e>=57344?i+=3:(v++,i+=4);return i}class tr extends Error{constructor(e,i,v){super(e),this.description=i,this.context=v,this.type="TransportError"}}class ct extends Z{constructor(e){super(),this.writable=!1,Ne(this,e),this.opts=e,this.query=e.query,this.socket=e.socket}onError(e,i,v){return super.emitReserved("error",new tr(e,i,v)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const i=ut(e,this.socket.binaryType);this.onPacket(i)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}}const _t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),ze=64,rr={};let et=0,Pe=0,tt;function rt(p){let e="";do e=_t[p%ze]+e,p=Math.floor(p/ze);while(p>0);return e}function pt(){const p=rt(+new Date);return p!==tt?(et=0,tt=p):p+"."+rt(et++)}for(;Pe<ze;Pe++)rr[_t[Pe]]=Pe;function mt(p){let e="";for(let i in p)p.hasOwnProperty(i)&&(e.length&&(e+="&"),e+=encodeURIComponent(i)+"="+encodeURIComponent(p[i]));return e}function ir(p){let e={},i=p.split("&");for(let v=0,w=i.length;v<w;v++){let B=i[v].split("=");e[decodeURIComponent(B[0])]=decodeURIComponent(B[1])}return e}let vt=!1;try{vt=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const nr=vt;function gt(p){const e=p.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!e||nr))return new XMLHttpRequest}catch{}if(!e)try{return new oe[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}function sr(){}const or=function(){return new gt({xdomain:!1}).responseType!=null}();class ar extends ct{constructor(e){if(super(e),this.polling=!1,typeof location<"u"){const v=location.protocol==="https:";let w=location.port;w||(w=v?"443":"80"),this.xd=typeof location<"u"&&e.hostname!==location.hostname||w!==e.port,this.xs=e.secure!==v}const i=e&&e.forceBase64;this.supportsBinary=or&&!i}get name(){return"polling"}doOpen(){this.poll()}pause(e){this.readyState="pausing";const i=()=>{this.readyState="paused",e()};if(this.polling||!this.writable){let v=0;this.polling&&(v++,this.once("pollComplete",function(){--v||i()})),this.writable||(v++,this.once("drain",function(){--v||i()}))}else i()}poll(){this.polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){const i=v=>{if(this.readyState==="opening"&&v.type==="open"&&this.onOpen(),v.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(v)};Xt(e,this.socket.binaryType).forEach(i),this.readyState!=="closed"&&(this.polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this.poll())}doClose(){const e=()=>{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,Yt(e,i=>{this.doWrite(i,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){let e=this.query||{};const i=this.opts.secure?"https":"http";let v="";this.opts.timestampRequests!==!1&&(e[this.opts.timestampParam]=pt()),!this.supportsBinary&&!e.sid&&(e.b64=1),this.opts.port&&(i==="https"&&Number(this.opts.port)!==443||i==="http"&&Number(this.opts.port)!==80)&&(v=":"+this.opts.port);const w=mt(e),B=this.opts.hostname.indexOf(":")!==-1;return i+"://"+(B?"["+this.opts.hostname+"]":this.opts.hostname)+v+this.opts.path+(w.length?"?"+w:"")}request(e={}){return Object.assign(e,{xd:this.xd,xs:this.xs},this.opts),new de(this.uri(),e)}doWrite(e,i){const v=this.request({method:"POST",data:e});v.on("success",i),v.on("error",(w,B)=>{this.onError("xhr post error",w,B)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(i,v)=>{this.onError("xhr poll error",i,v)}),this.pollXhr=e}}class de extends Z{constructor(e,i){super(),Ne(this,i),this.opts=i,this.method=i.method||"GET",this.uri=e,this.async=i.async!==!1,this.data=i.data!==void 0?i.data:null,this.create()}create(){const e=dt(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");e.xdomain=!!this.opts.xd,e.xscheme=!!this.opts.xs;const i=this.xhr=new gt(e);try{i.open(this.method,this.uri,this.async);try{if(this.opts.extraHeaders){i.setDisableHeaderCheck&&i.setDisableHeaderCheck(!0);for(let v in this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(v)&&i.setRequestHeader(v,this.opts.extraHeaders[v])}}catch{}if(this.method==="POST")try{i.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{i.setRequestHeader("Accept","*/*")}catch{}"withCredentials"in i&&(i.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(i.timeout=this.opts.requestTimeout),i.onreadystatechange=()=>{i.readyState===4&&(i.status===200||i.status===1223?this.onLoad():this.setTimeoutFn(()=>{this.onError(typeof i.status=="number"?i.status:0)},0))},i.send(this.data)}catch(v){this.setTimeoutFn(()=>{this.onError(v)},0);return}typeof document<"u"&&(this.index=de.requestsCount++,de.requests[this.index]=this)}onError(e){this.emitReserved("error",e,this.xhr),this.cleanup(!0)}cleanup(e){if(!(typeof this.xhr>"u"||this.xhr===null)){if(this.xhr.onreadystatechange=sr,e)try{this.xhr.abort()}catch{}typeof document<"u"&&delete de.requests[this.index],this.xhr=null}}onLoad(){const e=this.xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this.cleanup())}abort(){this.cleanup()}}de.requestsCount=0;de.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",it);else if(typeof addEventListener=="function"){const p="onpagehide"in oe?"pagehide":"unload";addEventListener(p,it,!1)}}function it(){for(let p in de.requests)de.requests.hasOwnProperty(p)&&de.requests[p].abort()}const yt=(()=>typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,i)=>i(e,0))(),Me=oe.WebSocket||oe.MozWebSocket,nt=!0,ur="arraybuffer",st=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class lr extends ct{constructor(e){super(e),this.supportsBinary=!e.forceBase64}get name(){return"websocket"}doOpen(){if(!this.check())return;const e=this.uri(),i=this.opts.protocols,v=st?{}:dt(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(v.headers=this.opts.extraHeaders);try{this.ws=nt&&!st?i?new Me(e,i):new Me(e):new Me(e,i,v)}catch(w){return this.emitReserved("error",w)}this.ws.binaryType=this.socket.binaryType||ur,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let i=0;i<e.length;i++){const v=e[i],w=i===e.length-1;at(v,this.supportsBinary,B=>{const T={};try{nt&&this.ws.send(B)}catch{}w&&yt(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.close(),this.ws=null)}uri(){let e=this.query||{};const i=this.opts.secure?"wss":"ws";let v="";this.opts.port&&(i==="wss"&&Number(this.opts.port)!==443||i==="ws"&&Number(this.opts.port)!==80)&&(v=":"+this.opts.port),this.opts.timestampRequests&&(e[this.opts.timestampParam]=pt()),this.supportsBinary||(e.b64=1);const w=mt(e),B=this.opts.hostname.indexOf(":")!==-1;return i+"://"+(B?"["+this.opts.hostname+"]":this.opts.hostname)+v+this.opts.path+(w.length?"?"+w:"")}check(){return!!Me}}const fr={websocket:lr,polling:ar},hr=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,dr=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function He(p){const e=p,i=p.indexOf("["),v=p.indexOf("]");i!=-1&&v!=-1&&(p=p.substring(0,i)+p.substring(i,v).replace(/:/g,";")+p.substring(v,p.length));let w=hr.exec(p||""),B={},T=14;for(;T--;)B[dr[T]]=w[T]||"";return i!=-1&&v!=-1&&(B.source=e,B.host=B.host.substring(1,B.host.length-1).replace(/;/g,":"),B.authority=B.authority.replace("[","").replace("]","").replace(/;/g,":"),B.ipv6uri=!0),B.pathNames=cr(B,B.path),B.queryKey=_r(B,B.query),B}function cr(p,e){const i=/\/{2,9}/g,v=e.replace(i,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&v.splice(0,1),e.slice(-1)=="/"&&v.splice(v.length-1,1),v}function _r(p,e){const i={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(v,w,B){w&&(i[w]=B)}),i}let Et=class Ae extends Z{constructor(e,i={}){super(),this.writeBuffer=[],e&&typeof e=="object"&&(i=e,e=null),e?(e=He(e),i.hostname=e.host,i.secure=e.protocol==="https"||e.protocol==="wss",i.port=e.port,e.query&&(i.query=e.query)):i.host&&(i.hostname=He(i.host).host),Ne(this,i),this.secure=i.secure!=null?i.secure:typeof location<"u"&&location.protocol==="https:",i.hostname&&!i.port&&(i.port=this.secure?"443":"80"),this.hostname=i.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=i.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=i.transports||["polling","websocket"],this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!0},i),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=ir(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,typeof addEventListener=="function"&&(this.opts.closeOnBeforeunload&&(this.beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this.beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this.offlineEventListener=()=>{this.onClose("transport close",{description:"network connection lost"})},addEventListener("offline",this.offlineEventListener,!1))),this.open()}createTransport(e){const i=Object.assign({},this.opts.query);i.EIO=ht,i.transport=e,this.id&&(i.sid=this.id);const v=Object.assign({},this.opts.transportOptions[e],this.opts,{query:i,socket:this,hostname:this.hostname,secure:this.secure,port:this.port});return new fr[e](v)}open(){let e;if(this.opts.rememberUpgrade&&Ae.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1)e="websocket";else if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}else e=this.transports[0];this.readyState="opening";try{e=this.createTransport(e)}catch{this.transports.shift(),this.open();return}e.open(),this.setTransport(e)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",i=>this.onClose("transport close",i))}probe(e){let i=this.createTransport(e),v=!1;Ae.priorWebsocketSuccess=!1;const w=()=>{v||(i.send([{type:"ping",data:"probe"}]),i.once("packet",h=>{if(!v)if(h.type==="pong"&&h.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",i),!i)return;Ae.priorWebsocketSuccess=i.name==="websocket",this.transport.pause(()=>{v||this.readyState!=="closed"&&(_(),this.setTransport(i),i.send([{type:"upgrade"}]),this.emitReserved("upgrade",i),i=null,this.upgrading=!1,this.flush())})}else{const u=new Error("probe error");u.transport=i.name,this.emitReserved("upgradeError",u)}}))};function B(){v||(v=!0,_(),i.close(),i=null)}const T=h=>{const u=new Error("probe error: "+h);u.transport=i.name,B(),this.emitReserved("upgradeError",u)};function A(){T("transport closed")}function y(){T("socket closed")}function L(h){i&&h.name!==i.name&&B()}const _=()=>{i.removeListener("open",w),i.removeListener("error",T),i.removeListener("close",A),this.off("close",y),this.off("upgrading",L)};i.once("open",w),i.once("error",T),i.once("close",A),this.once("close",y),this.once("upgrading",L),i.open()}onOpen(){if(this.readyState="open",Ae.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush(),this.readyState==="open"&&this.opts.upgrade){let e=0;const i=this.upgrades.length;for(;e<i;e++)this.probe(this.upgrades[e])}}onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this.resetPingTimeout(),this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":const i=new Error("server error");i.code=e.data,this.onError(i);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this.resetPingTimeout()}resetPingTimeout(){this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn(()=>{this.onClose("ping timeout")},this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this.getWritablePackets();this.transport.send(e),this.prevBufferLen=e.length,this.emitReserved("flush")}}getWritablePackets(){if(!(this.maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let i=1;for(let v=0;v<this.writeBuffer.length;v++){const w=this.writeBuffer[v].data;if(w&&(i+=qt(w)),v>0&&i>this.maxPayload)return this.writeBuffer.slice(0,v);i+=2}return this.writeBuffer}write(e,i,v){return this.sendPacket("message",e,i,v),this}send(e,i,v){return this.sendPacket("message",e,i,v),this}sendPacket(e,i,v,w){if(typeof i=="function"&&(w=i,i=void 0),typeof v=="function"&&(w=v,v=null),this.readyState==="closing"||this.readyState==="closed")return;v=v||{},v.compress=v.compress!==!1;const B={type:e,data:i,options:v};this.emitReserved("packetCreate",B),this.writeBuffer.push(B),w&&this.once("flush",w),this.flush()}close(){const e=()=>{this.onClose("forced close"),this.transport.close()},i=()=>{this.off("upgrade",i),this.off("upgradeError",i),e()},v=()=>{this.once("upgrade",i),this.once("upgradeError",i)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?v():e()}):this.upgrading?v():e()),this}onError(e){Ae.priorWebsocketSuccess=!1,this.emitReserved("error",e),this.onClose("transport error",e)}onClose(e,i){(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")&&(this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),typeof removeEventListener=="function"&&(removeEventListener("beforeunload",this.beforeunloadEventListener,!1),removeEventListener("offline",this.offlineEventListener,!1)),this.readyState="closed",this.id=null,this.emitReserved("close",e,i),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(e){const i=[];let v=0;const w=e.length;for(;v<w;v++)~this.transports.indexOf(e[v])&&i.push(e[v]);return i}};Et.protocol=ht;function pr(p,e="",i){let v=p;i=i||typeof location<"u"&&location,p==null&&(p=i.protocol+"//"+i.host),typeof p=="string"&&(p.charAt(0)==="/"&&(p.charAt(1)==="/"?p=i.protocol+p:p=i.host+p),/^(https?|wss?):\/\//.test(p)||(typeof i<"u"?p=i.protocol+"//"+p:p="https://"+p),v=He(p)),v.port||(/^(http|ws)$/.test(v.protocol)?v.port="80":/^(http|ws)s$/.test(v.protocol)&&(v.port="443")),v.path=v.path||"/";const B=v.host.indexOf(":")!==-1?"["+v.host+"]":v.host;return v.id=v.protocol+"://"+B+":"+v.port+e,v.href=v.protocol+"://"+B+(i&&i.port===v.port?"":":"+v.port),v}const mr=typeof ArrayBuffer=="function",vr=p=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(p):p.buffer instanceof ArrayBuffer,xt=Object.prototype.toString,gr=typeof Blob=="function"||typeof Blob<"u"&&xt.call(Blob)==="[object BlobConstructor]",yr=typeof File=="function"||typeof File<"u"&&xt.call(File)==="[object FileConstructor]";function Qe(p){return mr&&(p instanceof ArrayBuffer||vr(p))||gr&&p instanceof Blob||yr&&p instanceof File}function Ue(p,e){if(!p||typeof p!="object")return!1;if(Array.isArray(p)){for(let i=0,v=p.length;i<v;i++)if(Ue(p[i]))return!0;return!1}if(Qe(p))return!0;if(p.toJSON&&typeof p.toJSON=="function"&&arguments.length===1)return Ue(p.toJSON(),!0);for(const i in p)if(Object.prototype.hasOwnProperty.call(p,i)&&Ue(p[i]))return!0;return!1}function Er(p){const e=[],i=p.data,v=p;return v.data=Ye(i,e),v.attachments=e.length,{packet:v,buffers:e}}function Ye(p,e){if(!p)return p;if(Qe(p)){const i={_placeholder:!0,num:e.length};return e.push(p),i}else if(Array.isArray(p)){const i=new Array(p.length);for(let v=0;v<p.length;v++)i[v]=Ye(p[v],e);return i}else if(typeof p=="object"&&!(p instanceof Date)){const i={};for(const v in p)Object.prototype.hasOwnProperty.call(p,v)&&(i[v]=Ye(p[v],e));return i}return p}function xr(p,e){return p.data=Xe(p.data,e),delete p.attachments,p}function Xe(p,e){if(!p)return p;if(p&&p._placeholder===!0){if(typeof p.num=="number"&&p.num>=0&&p.num<e.length)return e[p.num];throw new Error("illegal attachments")}else if(Array.isArray(p))for(let i=0;i<p.length;i++)p[i]=Xe(p[i],e);else if(typeof p=="object")for(const i in p)Object.prototype.hasOwnProperty.call(p,i)&&(p[i]=Xe(p[i],e));return p}const br=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],Sr=5;var z;(function(p){p[p.CONNECT=0]="CONNECT",p[p.DISCONNECT=1]="DISCONNECT",p[p.EVENT=2]="EVENT",p[p.ACK=3]="ACK",p[p.CONNECT_ERROR=4]="CONNECT_ERROR",p[p.BINARY_EVENT=5]="BINARY_EVENT",p[p.BINARY_ACK=6]="BINARY_ACK"})(z||(z={}));class Ar{constructor(e){this.replacer=e}encode(e){return(e.type===z.EVENT||e.type===z.ACK)&&Ue(e)?this.encodeAsBinary({type:e.type===z.EVENT?z.BINARY_EVENT:z.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let i=""+e.type;return(e.type===z.BINARY_EVENT||e.type===z.BINARY_ACK)&&(i+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(i+=e.nsp+","),e.id!=null&&(i+=e.id),e.data!=null&&(i+=JSON.stringify(e.data,this.replacer)),i}encodeAsBinary(e){const i=Er(e),v=this.encodeAsString(i.packet),w=i.buffers;return w.unshift(v),w}}function ot(p){return Object.prototype.toString.call(p)==="[object Object]"}class $e extends Z{constructor(e){super(),this.reviver=e}add(e){let i;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");i=this.decodeString(e);const v=i.type===z.BINARY_EVENT;v||i.type===z.BINARY_ACK?(i.type=v?z.EVENT:z.ACK,this.reconstructor=new Lr(i),i.attachments===0&&super.emitReserved("decoded",i)):super.emitReserved("decoded",i)}else if(Qe(e)||e.base64)if(this.reconstructor)i=this.reconstructor.takeBinaryData(e),i&&(this.reconstructor=null,super.emitReserved("decoded",i));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let i=0;const v={type:Number(e.charAt(0))};if(z[v.type]===void 0)throw new Error("unknown packet type "+v.type);if(v.type===z.BINARY_EVENT||v.type===z.BINARY_ACK){const B=i+1;for(;e.charAt(++i)!=="-"&&i!=e.length;);const T=e.substring(B,i);if(T!=Number(T)||e.charAt(i)!=="-")throw new Error("Illegal attachments");v.attachments=Number(T)}if(e.charAt(i+1)==="/"){const B=i+1;for(;++i&&!(e.charAt(i)===","||i===e.length););v.nsp=e.substring(B,i)}else v.nsp="/";const w=e.charAt(i+1);if(w!==""&&Number(w)==w){const B=i+1;for(;++i;){const T=e.charAt(i);if(T==null||Number(T)!=T){--i;break}if(i===e.length)break}v.id=Number(e.substring(B,i+1))}if(e.charAt(++i)){const B=this.tryParse(e.substr(i));if($e.isPayloadValid(v.type,B))v.data=B;else throw new Error("invalid payload")}return v}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,i){switch(e){case z.CONNECT:return ot(i);case z.DISCONNECT:return i===void 0;case z.CONNECT_ERROR:return typeof i=="string"||ot(i);case z.EVENT:case z.BINARY_EVENT:return Array.isArray(i)&&(typeof i[0]=="number"||typeof i[0]=="string"&&br.indexOf(i[0])===-1);case z.ACK:case z.BINARY_ACK:return Array.isArray(i)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class Lr{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const i=xr(this.reconPack,this.buffers);return this.finishedReconstruction(),i}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const Rr=Object.freeze(Object.defineProperty({__proto__:null,Decoder:$e,Encoder:Ar,get PacketType(){return z},protocol:Sr},Symbol.toStringTag,{value:"Module"}));function ae(p,e,i){return p.on(e,i),function(){p.off(e,i)}}const Or=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class bt extends Z{constructor(e,i,v){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=i,v&&v.auth&&(this.auth=v.auth),this._opts=Object.assign({},v),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[ae(e,"open",this.onopen.bind(this)),ae(e,"packet",this.onpacket.bind(this)),ae(e,"error",this.onerror.bind(this)),ae(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...i){if(Or.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(i.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(i),this;const v={type:z.EVENT,data:i};if(v.options={},v.options.compress=this.flags.compress!==!1,typeof i[i.length-1]=="function"){const T=this.ids++,A=i.pop();this._registerAckCallback(T,A),v.id=T}const w=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable;return this.flags.volatile&&(!w||!this.connected)||(this.connected?(this.notifyOutgoingListeners(v),this.packet(v)):this.sendBuffer.push(v)),this.flags={},this}_registerAckCallback(e,i){var v;const w=(v=this.flags.timeout)!==null&&v!==void 0?v:this._opts.ackTimeout;if(w===void 0){this.acks[e]=i;return}const B=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let T=0;T<this.sendBuffer.length;T++)this.sendBuffer[T].id===e&&this.sendBuffer.splice(T,1);i.call(this,new Error("operation has timed out"))},w);this.acks[e]=(...T)=>{this.io.clearTimeoutFn(B),i.apply(this,[null,...T])}}emitWithAck(e,...i){const v=this.flags.timeout!==void 0||this._opts.ackTimeout!==void 0;return new Promise((w,B)=>{i.push((T,A)=>v?T?B(T):w(A):w(T)),this.emit(e,...i)})}_addToQueue(e){let i;typeof e[e.length-1]=="function"&&(i=e.pop());const v={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((w,...B)=>v!==this._queue[0]?void 0:(w!==null?v.tryCount>this._opts.retries&&(this._queue.shift(),i&&i(w)):(this._queue.shift(),i&&i(null,...B)),v.pending=!1,this._drainQueue())),this._queue.push(v),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||this._queue.length===0)return;const i=this._queue[0];i.pending&&!e||(i.pending=!0,i.tryCount++,this.flags=i.flags,this.emit.apply(this,i.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:z.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,i){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,i)}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case z.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case z.EVENT:case z.BINARY_EVENT:this.onevent(e);break;case z.ACK:case z.BINARY_ACK:this.onack(e);break;case z.DISCONNECT:this.ondisconnect();break;case z.CONNECT_ERROR:this.destroy();const v=new Error(e.data.message);v.data=e.data.data,this.emitReserved("connect_error",v);break}}onevent(e){const i=e.data||[];e.id!=null&&i.push(this.ack(e.id)),this.connected?this.emitEvent(i):this.receiveBuffer.push(Object.freeze(i))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const i=this._anyListeners.slice();for(const v of i)v.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&typeof e[e.length-1]=="string"&&(this._lastOffset=e[e.length-1])}ack(e){const i=this;let v=!1;return function(...w){v||(v=!0,i.packet({type:z.ACK,id:e,data:w}))}}onack(e){const i=this.acks[e.id];typeof i=="function"&&(i.apply(this,e.data),delete this.acks[e.id])}onconnect(e,i){this.id=e,this.recovered=i&&this._pid===i,this._pid=i,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:z.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const i=this._anyListeners;for(let v=0;v<i.length;v++)if(e===i[v])return i.splice(v,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const i=this._anyOutgoingListeners;for(let v=0;v<i.length;v++)if(e===i[v])return i.splice(v,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const i=this._anyOutgoingListeners.slice();for(const v of i)v.apply(this,e.data)}}}function Re(p){p=p||{},this.ms=p.min||100,this.max=p.max||1e4,this.factor=p.factor||2,this.jitter=p.jitter>0&&p.jitter<=1?p.jitter:0,this.attempts=0}Re.prototype.duration=function(){var p=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),i=Math.floor(e*this.jitter*p);p=Math.floor(e*10)&1?p+i:p-i}return Math.min(p,this.max)|0};Re.prototype.reset=function(){this.attempts=0};Re.prototype.setMin=function(p){this.ms=p};Re.prototype.setMax=function(p){this.max=p};Re.prototype.setJitter=function(p){this.jitter=p};class Je extends Z{constructor(e,i){var v;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(i=e,e=void 0),i=i||{},i.path=i.path||"/socket.io",this.opts=i,Ne(this,i),this.reconnection(i.reconnection!==!1),this.reconnectionAttempts(i.reconnectionAttempts||1/0),this.reconnectionDelay(i.reconnectionDelay||1e3),this.reconnectionDelayMax(i.reconnectionDelayMax||5e3),this.randomizationFactor((v=i.randomizationFactor)!==null&&v!==void 0?v:.5),this.backoff=new Re({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(i.timeout==null?2e4:i.timeout),this._readyState="closed",this.uri=e;const w=i.parser||Rr;this.encoder=new w.Encoder,this.decoder=new w.Decoder,this._autoConnect=i.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var i;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(i=this.backoff)===null||i===void 0||i.setMin(e),this)}randomizationFactor(e){var i;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(i=this.backoff)===null||i===void 0||i.setJitter(e),this)}reconnectionDelayMax(e){var i;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(i=this.backoff)===null||i===void 0||i.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new Et(this.uri,this.opts);const i=this.engine,v=this;this._readyState="opening",this.skipReconnect=!1;const w=ae(i,"open",function(){v.onopen(),e&&e()}),B=ae(i,"error",T=>{v.cleanup(),v._readyState="closed",this.emitReserved("error",T),e?e(T):v.maybeReconnectOnOpen()});if(this._timeout!==!1){const T=this._timeout;T===0&&w();const A=this.setTimeoutFn(()=>{w(),i.close(),i.emit("error",new Error("timeout"))},T);this.opts.autoUnref&&A.unref(),this.subs.push(function(){clearTimeout(A)})}return this.subs.push(w),this.subs.push(B),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(ae(e,"ping",this.onping.bind(this)),ae(e,"data",this.ondata.bind(this)),ae(e,"error",this.onerror.bind(this)),ae(e,"close",this.onclose.bind(this)),ae(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(i){this.onclose("parse error",i)}}ondecoded(e){yt(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,i){let v=this.nsps[e];return v?this._autoConnect&&!v.active&&v.connect():(v=new bt(this,e,i),this.nsps[e]=v),v}_destroy(e){const i=Object.keys(this.nsps);for(const v of i)if(this.nsps[v].active)return;this._close()}_packet(e){const i=this.encoder.encode(e);for(let v=0;v<i.length;v++)this.engine.write(i[v],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(e,i){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,i),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const i=this.backoff.duration();this._reconnecting=!0;const v=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(w=>{w?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",w)):e.onreconnect()}))},i);this.opts.autoUnref&&v.unref(),this.subs.push(function(){clearTimeout(v)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const Te={};function je(p,e){typeof p=="object"&&(e=p,p=void 0),e=e||{};const i=pr(p,e.path||"/socket.io"),v=i.source,w=i.id,B=i.path,T=Te[w]&&B in Te[w].nsps,A=e.forceNew||e["force new connection"]||e.multiplex===!1||T;let y;return A?y=new Je(v,e):(Te[w]||(Te[w]=new Je(v,e)),y=Te[w]),i.query&&!e.query&&(e.query=i.queryKey),y.socket(i.path,e)}Object.assign(je,{Manager:Je,Socket:bt,io:je,connect:je});const Ve=je("http://45.128.220.103:3000");Ve.emit("identify",{username:"cat"});Ve.emit("message",{from:"cat",to:"car",message:"#connect success#"});Ve.on("connect_error",p=>{console.error("服务器连接失败: ",p)});function Le(p){const e=JSON.stringify(p);Ve.emit("message",{from:"cat",to:"car",message:e})}function Cr(p){const e={type:"move",msg:JSON.stringify({x:0,y:1})},i={type:"move",msg:JSON.stringify({x:0,y:-1})},v={type:"move",msg:JSON.stringify({x:-1,y:0})},w={type:"move",msg:JSON.stringify({x:1,y:0})},B=(_,h)=>{_!=null&&(h==null?(_.style.backgroundColor="#35363a",_.style.color="white"):(_.style.background="#f0f0f0",_.style.color="black"))},T=document.getElementById("zuo"),A=document.getElementById("you"),y=document.getElementById("shang"),L=document.getElementById("xia");console.log("代码执行，当前按键是",p),(p=="W"||p=="w")&&(Le(e),B(y)),(p=="S"||p=="s")&&(Le(i),B(L)),(p=="A"||p=="a")&&(Le(v),B(T)),(p=="D"||p=="d")&&(Le(w),B(A))}var St={exports:{}};(function(p,e){(function(v,w){p.exports=w()})(self,function(){return function(){var i={"./node_modules/es6-promise/dist/es6-promise.js":function(T,A,y){/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   v4.2.8+1e68dce6
 */(function(L,_){T.exports=_()})(this,function(){function L(C){var P=typeof C;return C!==null&&(P==="object"||P==="function")}function _(C){return typeof C=="function"}var h=void 0;Array.isArray?h=Array.isArray:h=function(C){return Object.prototype.toString.call(C)==="[object Array]"};var u=h,c=0,n=void 0,l=void 0,f=function(P,M){b[c]=P,b[c+1]=M,c+=2,c===2&&(l?l(O):I())};function s(C){l=C}function r(C){f=C}var a=typeof window<"u"?window:void 0,o=a||{},t=o.MutationObserver||o.WebKitMutationObserver,d=typeof self>"u"&&typeof process<"u"&&{}.toString.call(process)==="[object process]",m=typeof Uint8ClampedArray<"u"&&typeof importScripts<"u"&&typeof MessageChannel<"u";function g(){return function(){return process.nextTick(O)}}function x(){return typeof n<"u"?function(){n(O)}:E()}function R(){var C=0,P=new t(O),M=document.createTextNode("");return P.observe(M,{characterData:!0}),function(){M.data=C=++C%2}}function S(){var C=new MessageChannel;return C.port1.onmessage=O,function(){return C.port2.postMessage(0)}}function E(){var C=setTimeout;return function(){return C(O,1)}}var b=new Array(1e3);function O(){for(var C=0;C<c;C+=2){var P=b[C],M=b[C+1];P(M),b[C]=void 0,b[C+1]=void 0}c=0}function D(){try{var C=Function("return this")().require("vertx");return n=C.runOnLoop||C.runOnContext,x()}catch{return E()}}var I=void 0;d?I=g():t?I=R():m?I=S():a===void 0?I=D():I=E();function k(C,P){var M=this,F=new this.constructor(N);F[W]===void 0&&Ee(F);var V=M._state;if(V){var G=arguments[V-1];f(function(){return ge(V,F,G,M._result)})}else ie(M,F,C,P);return F}function K(C){var P=this;if(C&&typeof C=="object"&&C.constructor===P)return C;var M=new P(N);return re(M,C),M}var W=Math.random().toString(36).substring(2);function N(){}var H=void 0,J=1,j=2;function Y(){return new TypeError("You cannot resolve a promise with itself")}function le(){return new TypeError("A promises callback cannot return that same promise.")}function X(C,P,M,F){try{C.call(P,M,F)}catch(V){return V}}function Q(C,P,M){f(function(F){var V=!1,G=X(M,P,function(q){V||(V=!0,P!==q?re(F,q):$(F,q))},function(q){V||(V=!0,U(F,q))},"Settle: "+(F._label||" unknown promise"));!V&&G&&(V=!0,U(F,G))},C)}function ne(C,P){P._state===J?$(C,P._result):P._state===j?U(C,P._result):ie(P,void 0,function(M){return re(C,M)},function(M){return U(C,M)})}function ee(C,P,M){P.constructor===C.constructor&&M===k&&P.constructor.resolve===K?ne(C,P):M===void 0?$(C,P):_(M)?Q(C,P,M):$(C,P)}function re(C,P){if(C===P)U(C,Y());else if(L(P)){var M=void 0;try{M=P.then}catch(F){U(C,F);return}ee(C,P,M)}else $(C,P)}function _e(C){C._onerror&&C._onerror(C._result),fe(C)}function $(C,P){C._state===H&&(C._result=P,C._state=J,C._subscribers.length!==0&&f(fe,C))}function U(C,P){C._state===H&&(C._state=j,C._result=P,f(_e,C))}function ie(C,P,M,F){var V=C._subscribers,G=V.length;C._onerror=null,V[G]=P,V[G+J]=M,V[G+j]=F,G===0&&C._state&&f(fe,C)}function fe(C){var P=C._subscribers,M=C._state;if(P.length!==0){for(var F=void 0,V=void 0,G=C._result,q=0;q<P.length;q+=3)F=P[q],V=P[q+M],F?ge(M,F,V,G):V(G);C._subscribers.length=0}}function ge(C,P,M,F){var V=_(M),G=void 0,q=void 0,xe=!0;if(V){try{G=M(F)}catch(De){xe=!1,q=De}if(P===G){U(P,le());return}}else G=F;P._state!==H||(V&&xe?re(P,G):xe===!1?U(P,q):C===J?$(P,G):C===j&&U(P,G))}function pe(C,P){try{P(function(F){re(C,F)},function(F){U(C,F)})}catch(M){U(C,M)}}var ve=0;function ye(){return ve++}function Ee(C){C[W]=ve++,C._state=void 0,C._result=void 0,C._subscribers=[]}function he(){return new Error("Array Methods must be provided an Array")}var se=function(){function C(P,M){this._instanceConstructor=P,this.promise=new P(N),this.promise[W]||Ee(this.promise),u(M)?(this.length=M.length,this._remaining=M.length,this._result=new Array(this.length),this.length===0?$(this.promise,this._result):(this.length=this.length||0,this._enumerate(M),this._remaining===0&&$(this.promise,this._result))):U(this.promise,he())}return C.prototype._enumerate=function(M){for(var F=0;this._state===H&&F<M.length;F++)this._eachEntry(M[F],F)},C.prototype._eachEntry=function(M,F){var V=this._instanceConstructor,G=V.resolve;if(G===K){var q=void 0,xe=void 0,De=!1;try{q=M.then}catch(We){De=!0,xe=We}if(q===k&&M._state!==H)this._settledAt(M._state,F,M._result);else if(typeof q!="function")this._remaining--,this._result[F]=M;else if(V===te){var Ke=new V(N);De?U(Ke,xe):ee(Ke,M,q),this._willSettleAt(Ke,F)}else this._willSettleAt(new V(function(We){return We(M)}),F)}else this._willSettleAt(G(M),F)},C.prototype._settledAt=function(M,F,V){var G=this.promise;G._state===H&&(this._remaining--,M===j?U(G,V):this._result[F]=V),this._remaining===0&&$(G,this._result)},C.prototype._willSettleAt=function(M,F){var V=this;ie(M,void 0,function(G){return V._settledAt(J,F,G)},function(G){return V._settledAt(j,F,G)})},C}();function Oe(C){return new se(this,C).promise}function Ie(C){var P=this;return u(C)?new P(function(M,F){for(var V=C.length,G=0;G<V;G++)P.resolve(C[G]).then(M,F)}):new P(function(M,F){return F(new TypeError("You must pass an array to race."))})}function At(C){var P=this,M=new P(N);return U(M,C),M}function Lt(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function Rt(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}var te=function(){function C(P){this[W]=ye(),this._result=this._state=void 0,this._subscribers=[],N!==P&&(typeof P!="function"&&Lt(),this instanceof C?pe(this,P):Rt())}return C.prototype.catch=function(M){return this.then(null,M)},C.prototype.finally=function(M){var F=this,V=F.constructor;return _(M)?F.then(function(G){return V.resolve(M()).then(function(){return G})},function(G){return V.resolve(M()).then(function(){throw G})}):F.then(M,M)},C}();te.prototype.then=k,te.all=Oe,te.race=Ie,te.resolve=K,te.reject=At,te._setScheduler=s,te._setAsap=r,te._asap=f;function Ot(){var C=void 0;if(typeof y.g<"u")C=y.g;else if(typeof self<"u")C=self;else try{C=Function("return this")()}catch{throw new Error("polyfill failed because global object is unavailable in this environment")}var P=C.Promise;if(P){var M=null;try{M=Object.prototype.toString.call(P.resolve())}catch{}if(M==="[object Promise]"&&!P.cast)return}C.Promise=te}return te.polyfill=Ot,te.Promise=te,te})},"./node_modules/events/events.js":function(T){var A=typeof Reflect=="object"?Reflect:null,y=A&&typeof A.apply=="function"?A.apply:function(E,b,O){return Function.prototype.apply.call(E,b,O)},L;A&&typeof A.ownKeys=="function"?L=A.ownKeys:Object.getOwnPropertySymbols?L=function(E){return Object.getOwnPropertyNames(E).concat(Object.getOwnPropertySymbols(E))}:L=function(E){return Object.getOwnPropertyNames(E)};function _(S){console&&console.warn&&console.warn(S)}var h=Number.isNaN||function(E){return E!==E};function u(){u.init.call(this)}T.exports=u,T.exports.once=g,u.EventEmitter=u,u.prototype._events=void 0,u.prototype._eventsCount=0,u.prototype._maxListeners=void 0;var c=10;function n(S){if(typeof S!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof S)}Object.defineProperty(u,"defaultMaxListeners",{enumerable:!0,get:function(){return c},set:function(S){if(typeof S!="number"||S<0||h(S))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+S+".");c=S}}),u.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},u.prototype.setMaxListeners=function(E){if(typeof E!="number"||E<0||h(E))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+E+".");return this._maxListeners=E,this};function l(S){return S._maxListeners===void 0?u.defaultMaxListeners:S._maxListeners}u.prototype.getMaxListeners=function(){return l(this)},u.prototype.emit=function(E){for(var b=[],O=1;O<arguments.length;O++)b.push(arguments[O]);var D=E==="error",I=this._events;if(I!==void 0)D=D&&I.error===void 0;else if(!D)return!1;if(D){var k;if(b.length>0&&(k=b[0]),k instanceof Error)throw k;var K=new Error("Unhandled error."+(k?" ("+k.message+")":""));throw K.context=k,K}var W=I[E];if(W===void 0)return!1;if(typeof W=="function")y(W,this,b);else for(var N=W.length,H=t(W,N),O=0;O<N;++O)y(H[O],this,b);return!0};function f(S,E,b,O){var D,I,k;if(n(b),I=S._events,I===void 0?(I=S._events=Object.create(null),S._eventsCount=0):(I.newListener!==void 0&&(S.emit("newListener",E,b.listener?b.listener:b),I=S._events),k=I[E]),k===void 0)k=I[E]=b,++S._eventsCount;else if(typeof k=="function"?k=I[E]=O?[b,k]:[k,b]:O?k.unshift(b):k.push(b),D=l(S),D>0&&k.length>D&&!k.warned){k.warned=!0;var K=new Error("Possible EventEmitter memory leak detected. "+k.length+" "+String(E)+" listeners added. Use emitter.setMaxListeners() to increase limit");K.name="MaxListenersExceededWarning",K.emitter=S,K.type=E,K.count=k.length,_(K)}return S}u.prototype.addListener=function(E,b){return f(this,E,b,!1)},u.prototype.on=u.prototype.addListener,u.prototype.prependListener=function(E,b){return f(this,E,b,!0)};function s(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function r(S,E,b){var O={fired:!1,wrapFn:void 0,target:S,type:E,listener:b},D=s.bind(O);return D.listener=b,O.wrapFn=D,D}u.prototype.once=function(E,b){return n(b),this.on(E,r(this,E,b)),this},u.prototype.prependOnceListener=function(E,b){return n(b),this.prependListener(E,r(this,E,b)),this},u.prototype.removeListener=function(E,b){var O,D,I,k,K;if(n(b),D=this._events,D===void 0)return this;if(O=D[E],O===void 0)return this;if(O===b||O.listener===b)--this._eventsCount===0?this._events=Object.create(null):(delete D[E],D.removeListener&&this.emit("removeListener",E,O.listener||b));else if(typeof O!="function"){for(I=-1,k=O.length-1;k>=0;k--)if(O[k]===b||O[k].listener===b){K=O[k].listener,I=k;break}if(I<0)return this;I===0?O.shift():d(O,I),O.length===1&&(D[E]=O[0]),D.removeListener!==void 0&&this.emit("removeListener",E,K||b)}return this},u.prototype.off=u.prototype.removeListener,u.prototype.removeAllListeners=function(E){var b,O,D;if(O=this._events,O===void 0)return this;if(O.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):O[E]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete O[E]),this;if(arguments.length===0){var I=Object.keys(O),k;for(D=0;D<I.length;++D)k=I[D],k!=="removeListener"&&this.removeAllListeners(k);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(b=O[E],typeof b=="function")this.removeListener(E,b);else if(b!==void 0)for(D=b.length-1;D>=0;D--)this.removeListener(E,b[D]);return this};function a(S,E,b){var O=S._events;if(O===void 0)return[];var D=O[E];return D===void 0?[]:typeof D=="function"?b?[D.listener||D]:[D]:b?m(D):t(D,D.length)}u.prototype.listeners=function(E){return a(this,E,!0)},u.prototype.rawListeners=function(E){return a(this,E,!1)},u.listenerCount=function(S,E){return typeof S.listenerCount=="function"?S.listenerCount(E):o.call(S,E)},u.prototype.listenerCount=o;function o(S){var E=this._events;if(E!==void 0){var b=E[S];if(typeof b=="function")return 1;if(b!==void 0)return b.length}return 0}u.prototype.eventNames=function(){return this._eventsCount>0?L(this._events):[]};function t(S,E){for(var b=new Array(E),O=0;O<E;++O)b[O]=S[O];return b}function d(S,E){for(;E+1<S.length;E++)S[E]=S[E+1];S.pop()}function m(S){for(var E=new Array(S.length),b=0;b<E.length;++b)E[b]=S[b].listener||S[b];return E}function g(S,E){return new Promise(function(b,O){function D(k){S.removeListener(E,I),O(k)}function I(){typeof S.removeListener=="function"&&S.removeListener("error",D),b([].slice.call(arguments))}R(S,E,I,{once:!0}),E!=="error"&&x(S,D,{once:!0})})}function x(S,E,b){typeof S.on=="function"&&R(S,"error",E,b)}function R(S,E,b,O){if(typeof S.on=="function")O.once?S.once(E,b):S.on(E,b);else if(typeof S.addEventListener=="function")S.addEventListener(E,function D(I){O.once&&S.removeEventListener(E,D),b(I)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof S)}},"./node_modules/webworkify-webpack/index.js":function(T,A,y){function L(s){var r={};function a(t){if(r[t])return r[t].exports;var d=r[t]={i:t,l:!1,exports:{}};return s[t].call(d.exports,d,d.exports,a),d.l=!0,d.exports}a.m=s,a.c=r,a.i=function(t){return t},a.d=function(t,d,m){a.o(t,d)||Object.defineProperty(t,d,{configurable:!1,enumerable:!0,get:m})},a.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},a.n=function(t){var d=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(d,"a",d),d},a.o=function(t,d){return Object.prototype.hasOwnProperty.call(t,d)},a.p="/",a.oe=function(t){throw console.error(t),t};var o=a(a.s=ENTRY_MODULE);return o.default||o}var _="[\\.|\\-|\\+|\\w|/|@]+",h="\\(\\s*(/\\*.*?\\*/)?\\s*.*?("+_+").*?\\)";function u(s){return(s+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function c(s){return!isNaN(1*s)}function n(s,r,a){var o={};o[a]=[];var t=r.toString(),d=t.match(/^function\s?\w*\(\w+,\s*\w+,\s*(\w+)\)/);if(!d)return o;for(var m=d[1],g=new RegExp("(\\\\n|\\W)"+u(m)+h,"g"),x;x=g.exec(t);)x[3]!=="dll-reference"&&o[a].push(x[3]);for(g=new RegExp("\\("+u(m)+'\\("(dll-reference\\s('+_+'))"\\)\\)'+h,"g");x=g.exec(t);)s[x[2]]||(o[a].push(x[1]),s[x[2]]=y(x[1]).m),o[x[2]]=o[x[2]]||[],o[x[2]].push(x[4]);for(var R=Object.keys(o),S=0;S<R.length;S++)for(var E=0;E<o[R[S]].length;E++)c(o[R[S]][E])&&(o[R[S]][E]=1*o[R[S]][E]);return o}function l(s){var r=Object.keys(s);return r.reduce(function(a,o){return a||s[o].length>0},!1)}function f(s,r){for(var a={main:[r]},o={main:[]},t={main:{}};l(a);)for(var d=Object.keys(a),m=0;m<d.length;m++){var g=d[m],x=a[g],R=x.pop();if(t[g]=t[g]||{},!(t[g][R]||!s[g][R])){t[g][R]=!0,o[g]=o[g]||[],o[g].push(R);for(var S=n(s,s[g][R],g),E=Object.keys(S),b=0;b<E.length;b++)a[E[b]]=a[E[b]]||[],a[E[b]]=a[E[b]].concat(S[E[b]])}}return o}T.exports=function(s,r){r=r||{};var a={main:y.m},o=r.all?{main:Object.keys(a.main)}:f(a,s),t="";Object.keys(o).filter(function(R){return R!=="main"}).forEach(function(R){for(var S=0;o[R][S];)S++;o[R].push(S),a[R][S]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",t=t+"var "+R+" = ("+L.toString().replace("ENTRY_MODULE",JSON.stringify(S))+")({"+o[R].map(function(E){return""+JSON.stringify(E)+": "+a[R][E].toString()}).join(",")+`});
`}),t=t+"new (("+L.toString().replace("ENTRY_MODULE",JSON.stringify(s))+")({"+o.main.map(function(R){return""+JSON.stringify(R)+": "+a.main[R].toString()}).join(",")+"}))(self);";var d=new window.Blob([t],{type:"text/javascript"});if(r.bare)return d;var m=window.URL||window.webkitURL||window.mozURL||window.msURL,g=m.createObjectURL(d),x=new window.Worker(g);return x.objectURL=g,x}},"./src/config.js":function(T,A,y){y.r(A),y.d(A,{defaultConfig:function(){return L},createDefaultConfig:function(){return _}});var L={enableWorker:!1,enableStashBuffer:!0,stashInitialSize:void 0,isLive:!1,lazyLoad:!0,lazyLoadMaxDuration:3*60,lazyLoadRecoverDuration:30,deferLoadAfterSourceOpen:!0,autoCleanupMaxBackwardDuration:3*60,autoCleanupMinBackwardDuration:2*60,statisticsInfoReportInterval:600,fixAudioTimestampGap:!0,accurateSeek:!1,seekType:"range",seekParamStart:"bstart",seekParamEnd:"bend",rangeLoadZeroStart:!1,customSeekHandler:void 0,reuseRedirectedURL:!1,headers:void 0,customLoader:void 0};function _(){return Object.assign({},L)}},"./src/core/features.js":function(T,A,y){y.r(A);var L=y("./src/io/io-controller.js"),_=y("./src/config.js"),h=function(){function u(){}return u.supportMSEH264Playback=function(){return window.MediaSource&&window.MediaSource.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"')},u.supportNetworkStreamIO=function(){var c=new L.default({},(0,_.createDefaultConfig)()),n=c.loaderType;return c.destroy(),n=="fetch-stream-loader"||n=="xhr-moz-chunked-loader"},u.getNetworkLoaderTypeName=function(){var c=new L.default({},(0,_.createDefaultConfig)()),n=c.loaderType;return c.destroy(),n},u.supportNativeMediaPlayback=function(c){u.videoElement==null&&(u.videoElement=window.document.createElement("video"));var n=u.videoElement.canPlayType(c);return n==="probably"||n=="maybe"},u.getFeatureList=function(){var c={mseFlvPlayback:!1,mseLiveFlvPlayback:!1,networkStreamIO:!1,networkLoaderName:"",nativeMP4H264Playback:!1,nativeWebmVP8Playback:!1,nativeWebmVP9Playback:!1};return c.mseFlvPlayback=u.supportMSEH264Playback(),c.networkStreamIO=u.supportNetworkStreamIO(),c.networkLoaderName=u.getNetworkLoaderTypeName(),c.mseLiveFlvPlayback=c.mseFlvPlayback&&c.networkStreamIO,c.nativeMP4H264Playback=u.supportNativeMediaPlayback('video/mp4; codecs="avc1.42001E, mp4a.40.2"'),c.nativeWebmVP8Playback=u.supportNativeMediaPlayback('video/webm; codecs="vp8.0, vorbis"'),c.nativeWebmVP9Playback=u.supportNativeMediaPlayback('video/webm; codecs="vp9"'),c},u}();A.default=h},"./src/core/media-info.js":function(T,A,y){y.r(A);var L=function(){function _(){this.mimeType=null,this.duration=null,this.hasAudio=null,this.hasVideo=null,this.audioCodec=null,this.videoCodec=null,this.audioDataRate=null,this.videoDataRate=null,this.audioSampleRate=null,this.audioChannelCount=null,this.width=null,this.height=null,this.fps=null,this.profile=null,this.level=null,this.refFrames=null,this.chromaFormat=null,this.sarNum=null,this.sarDen=null,this.metadata=null,this.segments=null,this.segmentCount=null,this.hasKeyframesIndex=null,this.keyframesIndex=null}return _.prototype.isComplete=function(){var h=this.hasAudio===!1||this.hasAudio===!0&&this.audioCodec!=null&&this.audioSampleRate!=null&&this.audioChannelCount!=null,u=this.hasVideo===!1||this.hasVideo===!0&&this.videoCodec!=null&&this.width!=null&&this.height!=null&&this.fps!=null&&this.profile!=null&&this.level!=null&&this.refFrames!=null&&this.chromaFormat!=null&&this.sarNum!=null&&this.sarDen!=null;return this.mimeType!=null&&this.duration!=null&&this.metadata!=null&&this.hasKeyframesIndex!=null&&h&&u},_.prototype.isSeekable=function(){return this.hasKeyframesIndex===!0},_.prototype.getNearestKeyframe=function(h){if(this.keyframesIndex==null)return null;var u=this.keyframesIndex,c=this._search(u.times,h);return{index:c,milliseconds:u.times[c],fileposition:u.filepositions[c]}},_.prototype._search=function(h,u){var c=0,n=h.length-1,l=0,f=0,s=n;for(u<h[0]&&(c=0,f=s+1);f<=s;)if(l=f+Math.floor((s-f)/2),l===n||u>=h[l]&&u<h[l+1]){c=l;break}else h[l]<u?f=l+1:s=l-1;return c},_}();A.default=L},"./src/core/media-segment-info.js":function(T,A,y){y.r(A),y.d(A,{SampleInfo:function(){return L},MediaSegmentInfo:function(){return _},IDRSampleList:function(){return h},MediaSegmentInfoList:function(){return u}});var L=function(){function c(n,l,f,s,r){this.dts=n,this.pts=l,this.duration=f,this.originalDts=s,this.isSyncPoint=r,this.fileposition=null}return c}(),_=function(){function c(){this.beginDts=0,this.endDts=0,this.beginPts=0,this.endPts=0,this.originalBeginDts=0,this.originalEndDts=0,this.syncPoints=[],this.firstSample=null,this.lastSample=null}return c.prototype.appendSyncPoint=function(n){n.isSyncPoint=!0,this.syncPoints.push(n)},c}(),h=function(){function c(){this._list=[]}return c.prototype.clear=function(){this._list=[]},c.prototype.appendArray=function(n){var l=this._list;n.length!==0&&(l.length>0&&n[0].originalDts<l[l.length-1].originalDts&&this.clear(),Array.prototype.push.apply(l,n))},c.prototype.getLastSyncPointBeforeDts=function(n){if(this._list.length==0)return null;var l=this._list,f=0,s=l.length-1,r=0,a=0,o=s;for(n<l[0].dts&&(f=0,a=o+1);a<=o;)if(r=a+Math.floor((o-a)/2),r===s||n>=l[r].dts&&n<l[r+1].dts){f=r;break}else l[r].dts<n?a=r+1:o=r-1;return this._list[f]},c}(),u=function(){function c(n){this._type=n,this._list=[],this._lastAppendLocation=-1}return Object.defineProperty(c.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"length",{get:function(){return this._list.length},enumerable:!1,configurable:!0}),c.prototype.isEmpty=function(){return this._list.length===0},c.prototype.clear=function(){this._list=[],this._lastAppendLocation=-1},c.prototype._searchNearestSegmentBefore=function(n){var l=this._list;if(l.length===0)return-2;var f=l.length-1,s=0,r=0,a=f,o=0;if(n<l[0].originalBeginDts)return o=-1,o;for(;r<=a;)if(s=r+Math.floor((a-r)/2),s===f||n>l[s].lastSample.originalDts&&n<l[s+1].originalBeginDts){o=s;break}else l[s].originalBeginDts<n?r=s+1:a=s-1;return o},c.prototype._searchNearestSegmentAfter=function(n){return this._searchNearestSegmentBefore(n)+1},c.prototype.append=function(n){var l=this._list,f=n,s=this._lastAppendLocation,r=0;s!==-1&&s<l.length&&f.originalBeginDts>=l[s].lastSample.originalDts&&(s===l.length-1||s<l.length-1&&f.originalBeginDts<l[s+1].originalBeginDts)?r=s+1:l.length>0&&(r=this._searchNearestSegmentBefore(f.originalBeginDts)+1),this._lastAppendLocation=r,this._list.splice(r,0,f)},c.prototype.getLastSegmentBefore=function(n){var l=this._searchNearestSegmentBefore(n);return l>=0?this._list[l]:null},c.prototype.getLastSampleBefore=function(n){var l=this.getLastSegmentBefore(n);return l!=null?l.lastSample:null},c.prototype.getLastSyncPointBefore=function(n){for(var l=this._searchNearestSegmentBefore(n),f=this._list[l].syncPoints;f.length===0&&l>0;)l--,f=this._list[l].syncPoints;return f.length>0?f[f.length-1]:null},c}()},"./src/core/mse-controller.js":function(T,A,y){y.r(A);var L=y("./node_modules/events/events.js"),_=y.n(L),h=y("./src/utils/logger.js"),u=y("./src/utils/browser.js"),c=y("./src/core/mse-events.js"),n=y("./src/core/media-segment-info.js"),l=y("./src/utils/exception.js"),f=function(){function s(r){this.TAG="MSEController",this._config=r,this._emitter=new(_()),this._config.isLive&&this._config.autoCleanupSourceBuffer==null&&(this._config.autoCleanupSourceBuffer=!0),this.e={onSourceOpen:this._onSourceOpen.bind(this),onSourceEnded:this._onSourceEnded.bind(this),onSourceClose:this._onSourceClose.bind(this),onSourceBufferError:this._onSourceBufferError.bind(this),onSourceBufferUpdateEnd:this._onSourceBufferUpdateEnd.bind(this)},this._mediaSource=null,this._mediaSourceObjectURL=null,this._mediaElement=null,this._isBufferFull=!1,this._hasPendingEos=!1,this._requireSetMediaDuration=!1,this._pendingMediaDuration=0,this._pendingSourceBufferInit=[],this._mimeTypes={video:null,audio:null},this._sourceBuffers={video:null,audio:null},this._lastInitSegments={video:null,audio:null},this._pendingSegments={video:[],audio:[]},this._pendingRemoveRanges={video:[],audio:[]},this._idrList=new n.IDRSampleList}return s.prototype.destroy=function(){(this._mediaElement||this._mediaSource)&&this.detachMediaElement(),this.e=null,this._emitter.removeAllListeners(),this._emitter=null},s.prototype.on=function(r,a){this._emitter.addListener(r,a)},s.prototype.off=function(r,a){this._emitter.removeListener(r,a)},s.prototype.attachMediaElement=function(r){if(this._mediaSource)throw new l.IllegalStateException("MediaSource has been attached to an HTMLMediaElement!");var a=this._mediaSource=new window.MediaSource;a.addEventListener("sourceopen",this.e.onSourceOpen),a.addEventListener("sourceended",this.e.onSourceEnded),a.addEventListener("sourceclose",this.e.onSourceClose),this._mediaElement=r,this._mediaSourceObjectURL=window.URL.createObjectURL(this._mediaSource),r.src=this._mediaSourceObjectURL},s.prototype.detachMediaElement=function(){if(this._mediaSource){var r=this._mediaSource;for(var a in this._sourceBuffers){var o=this._pendingSegments[a];o.splice(0,o.length),this._pendingSegments[a]=null,this._pendingRemoveRanges[a]=null,this._lastInitSegments[a]=null;var t=this._sourceBuffers[a];if(t){if(r.readyState!=="closed"){try{r.removeSourceBuffer(t)}catch(d){h.default.e(this.TAG,d.message)}t.removeEventListener("error",this.e.onSourceBufferError),t.removeEventListener("updateend",this.e.onSourceBufferUpdateEnd)}this._mimeTypes[a]=null,this._sourceBuffers[a]=null}}if(r.readyState==="open")try{r.endOfStream()}catch(d){h.default.e(this.TAG,d.message)}r.removeEventListener("sourceopen",this.e.onSourceOpen),r.removeEventListener("sourceended",this.e.onSourceEnded),r.removeEventListener("sourceclose",this.e.onSourceClose),this._pendingSourceBufferInit=[],this._isBufferFull=!1,this._idrList.clear(),this._mediaSource=null}this._mediaElement&&(this._mediaElement.src="",this._mediaElement.removeAttribute("src"),this._mediaElement=null),this._mediaSourceObjectURL&&(window.URL.revokeObjectURL(this._mediaSourceObjectURL),this._mediaSourceObjectURL=null)},s.prototype.appendInitSegment=function(r,a){if(!this._mediaSource||this._mediaSource.readyState!=="open"){this._pendingSourceBufferInit.push(r),this._pendingSegments[r.type].push(r);return}var o=r,t=""+o.container;o.codec&&o.codec.length>0&&(t+=";codecs="+o.codec);var d=!1;if(h.default.v(this.TAG,"Received Initialization Segment, mimeType: "+t),this._lastInitSegments[o.type]=o,t!==this._mimeTypes[o.type]){if(this._mimeTypes[o.type])h.default.v(this.TAG,"Notice: "+o.type+" mimeType changed, origin: "+this._mimeTypes[o.type]+", target: "+t);else{d=!0;try{var m=this._sourceBuffers[o.type]=this._mediaSource.addSourceBuffer(t);m.addEventListener("error",this.e.onSourceBufferError),m.addEventListener("updateend",this.e.onSourceBufferUpdateEnd)}catch(g){h.default.e(this.TAG,g.message),this._emitter.emit(c.default.ERROR,{code:g.code,msg:g.message});return}}this._mimeTypes[o.type]=t}a||this._pendingSegments[o.type].push(o),d||this._sourceBuffers[o.type]&&!this._sourceBuffers[o.type].updating&&this._doAppendSegments(),u.default.safari&&o.container==="audio/mpeg"&&o.mediaDuration>0&&(this._requireSetMediaDuration=!0,this._pendingMediaDuration=o.mediaDuration/1e3,this._updateMediaSourceDuration())},s.prototype.appendMediaSegment=function(r){var a=r;this._pendingSegments[a.type].push(a),this._config.autoCleanupSourceBuffer&&this._needCleanupSourceBuffer()&&this._doCleanupSourceBuffer();var o=this._sourceBuffers[a.type];o&&!o.updating&&!this._hasPendingRemoveRanges()&&this._doAppendSegments()},s.prototype.seek=function(r){for(var a in this._sourceBuffers)if(this._sourceBuffers[a]){var o=this._sourceBuffers[a];if(this._mediaSource.readyState==="open")try{o.abort()}catch(R){h.default.e(this.TAG,R.message)}this._idrList.clear();var t=this._pendingSegments[a];if(t.splice(0,t.length),this._mediaSource.readyState!=="closed"){for(var d=0;d<o.buffered.length;d++){var m=o.buffered.start(d),g=o.buffered.end(d);this._pendingRemoveRanges[a].push({start:m,end:g})}if(o.updating||this._doRemoveRanges(),u.default.safari){var x=this._lastInitSegments[a];x&&(this._pendingSegments[a].push(x),o.updating||this._doAppendSegments())}}}},s.prototype.endOfStream=function(){var r=this._mediaSource,a=this._sourceBuffers;if(!r||r.readyState!=="open"){r&&r.readyState==="closed"&&this._hasPendingSegments()&&(this._hasPendingEos=!0);return}a.video&&a.video.updating||a.audio&&a.audio.updating?this._hasPendingEos=!0:(this._hasPendingEos=!1,r.endOfStream())},s.prototype.getNearestKeyframe=function(r){return this._idrList.getLastSyncPointBeforeDts(r)},s.prototype._needCleanupSourceBuffer=function(){if(!this._config.autoCleanupSourceBuffer)return!1;var r=this._mediaElement.currentTime;for(var a in this._sourceBuffers){var o=this._sourceBuffers[a];if(o){var t=o.buffered;if(t.length>=1&&r-t.start(0)>=this._config.autoCleanupMaxBackwardDuration)return!0}}return!1},s.prototype._doCleanupSourceBuffer=function(){var r=this._mediaElement.currentTime;for(var a in this._sourceBuffers){var o=this._sourceBuffers[a];if(o){for(var t=o.buffered,d=!1,m=0;m<t.length;m++){var g=t.start(m),x=t.end(m);if(g<=r&&r<x+3){if(r-g>=this._config.autoCleanupMaxBackwardDuration){d=!0;var R=r-this._config.autoCleanupMinBackwardDuration;this._pendingRemoveRanges[a].push({start:g,end:R})}}else x<r&&(d=!0,this._pendingRemoveRanges[a].push({start:g,end:x}))}d&&!o.updating&&this._doRemoveRanges()}}},s.prototype._updateMediaSourceDuration=function(){var r=this._sourceBuffers;if(!(this._mediaElement.readyState===0||this._mediaSource.readyState!=="open")&&!(r.video&&r.video.updating||r.audio&&r.audio.updating)){var a=this._mediaSource.duration,o=this._pendingMediaDuration;o>0&&(isNaN(a)||o>a)&&(h.default.v(this.TAG,"Update MediaSource duration from "+a+" to "+o),this._mediaSource.duration=o),this._requireSetMediaDuration=!1,this._pendingMediaDuration=0}},s.prototype._doRemoveRanges=function(){for(var r in this._pendingRemoveRanges)if(!(!this._sourceBuffers[r]||this._sourceBuffers[r].updating))for(var a=this._sourceBuffers[r],o=this._pendingRemoveRanges[r];o.length&&!a.updating;){var t=o.shift();a.remove(t.start,t.end)}},s.prototype._doAppendSegments=function(){var r=this._pendingSegments;for(var a in r)if(!(!this._sourceBuffers[a]||this._sourceBuffers[a].updating)&&r[a].length>0){var o=r[a].shift();if(o.timestampOffset){var t=this._sourceBuffers[a].timestampOffset,d=o.timestampOffset/1e3,m=Math.abs(t-d);m>.1&&(h.default.v(this.TAG,"Update MPEG audio timestampOffset from "+t+" to "+d),this._sourceBuffers[a].timestampOffset=d),delete o.timestampOffset}if(!o.data||o.data.byteLength===0)continue;try{this._sourceBuffers[a].appendBuffer(o.data),this._isBufferFull=!1,a==="video"&&o.hasOwnProperty("info")&&this._idrList.appendArray(o.info.syncPoints)}catch(g){this._pendingSegments[a].unshift(o),g.code===22?(this._isBufferFull||this._emitter.emit(c.default.BUFFER_FULL),this._isBufferFull=!0):(h.default.e(this.TAG,g.message),this._emitter.emit(c.default.ERROR,{code:g.code,msg:g.message}))}}},s.prototype._onSourceOpen=function(){if(h.default.v(this.TAG,"MediaSource onSourceOpen"),this._mediaSource.removeEventListener("sourceopen",this.e.onSourceOpen),this._pendingSourceBufferInit.length>0)for(var r=this._pendingSourceBufferInit;r.length;){var a=r.shift();this.appendInitSegment(a,!0)}this._hasPendingSegments()&&this._doAppendSegments(),this._emitter.emit(c.default.SOURCE_OPEN)},s.prototype._onSourceEnded=function(){h.default.v(this.TAG,"MediaSource onSourceEnded")},s.prototype._onSourceClose=function(){h.default.v(this.TAG,"MediaSource onSourceClose"),this._mediaSource&&this.e!=null&&(this._mediaSource.removeEventListener("sourceopen",this.e.onSourceOpen),this._mediaSource.removeEventListener("sourceended",this.e.onSourceEnded),this._mediaSource.removeEventListener("sourceclose",this.e.onSourceClose))},s.prototype._hasPendingSegments=function(){var r=this._pendingSegments;return r.video.length>0||r.audio.length>0},s.prototype._hasPendingRemoveRanges=function(){var r=this._pendingRemoveRanges;return r.video.length>0||r.audio.length>0},s.prototype._onSourceBufferUpdateEnd=function(){this._requireSetMediaDuration?this._updateMediaSourceDuration():this._hasPendingRemoveRanges()?this._doRemoveRanges():this._hasPendingSegments()?this._doAppendSegments():this._hasPendingEos&&this.endOfStream(),this._emitter.emit(c.default.UPDATE_END)},s.prototype._onSourceBufferError=function(r){h.default.e(this.TAG,"SourceBuffer Error: "+r)},s}();A.default=f},"./src/core/mse-events.js":function(T,A,y){y.r(A);var L={ERROR:"error",SOURCE_OPEN:"source_open",UPDATE_END:"update_end",BUFFER_FULL:"buffer_full"};A.default=L},"./src/core/transmuxer.js":function(T,A,y){y.r(A);var L=y("./node_modules/events/events.js"),_=y.n(L),h=y("./node_modules/webworkify-webpack/index.js"),u=y.n(h),c=y("./src/utils/logger.js"),n=y("./src/utils/logging-control.js"),l=y("./src/core/transmuxing-controller.js"),f=y("./src/core/transmuxing-events.js"),s=y("./src/core/media-info.js"),r=function(){function a(o,t){if(this.TAG="Transmuxer",this._emitter=new(_()),t.enableWorker&&typeof Worker<"u")try{this._worker=u()("./src/core/transmuxing-worker.js"),this._workerDestroying=!1,this._worker.addEventListener("message",this._onWorkerMessage.bind(this)),this._worker.postMessage({cmd:"init",param:[o,t]}),this.e={onLoggingConfigChanged:this._onLoggingConfigChanged.bind(this)},n.default.registerListener(this.e.onLoggingConfigChanged),this._worker.postMessage({cmd:"logging_config",param:n.default.getConfig()})}catch{c.default.e(this.TAG,"Error while initialize transmuxing worker, fallback to inline transmuxing"),this._worker=null,this._controller=new l.default(o,t)}else this._controller=new l.default(o,t);if(this._controller){var d=this._controller;d.on(f.default.IO_ERROR,this._onIOError.bind(this)),d.on(f.default.DEMUX_ERROR,this._onDemuxError.bind(this)),d.on(f.default.INIT_SEGMENT,this._onInitSegment.bind(this)),d.on(f.default.MEDIA_SEGMENT,this._onMediaSegment.bind(this)),d.on(f.default.LOADING_COMPLETE,this._onLoadingComplete.bind(this)),d.on(f.default.RECOVERED_EARLY_EOF,this._onRecoveredEarlyEof.bind(this)),d.on(f.default.MEDIA_INFO,this._onMediaInfo.bind(this)),d.on(f.default.METADATA_ARRIVED,this._onMetaDataArrived.bind(this)),d.on(f.default.SCRIPTDATA_ARRIVED,this._onScriptDataArrived.bind(this)),d.on(f.default.STATISTICS_INFO,this._onStatisticsInfo.bind(this)),d.on(f.default.RECOMMEND_SEEKPOINT,this._onRecommendSeekpoint.bind(this))}}return a.prototype.destroy=function(){this._worker?this._workerDestroying||(this._workerDestroying=!0,this._worker.postMessage({cmd:"destroy"}),n.default.removeListener(this.e.onLoggingConfigChanged),this.e=null):(this._controller.destroy(),this._controller=null),this._emitter.removeAllListeners(),this._emitter=null},a.prototype.on=function(o,t){this._emitter.addListener(o,t)},a.prototype.off=function(o,t){this._emitter.removeListener(o,t)},a.prototype.hasWorker=function(){return this._worker!=null},a.prototype.open=function(){this._worker?this._worker.postMessage({cmd:"start"}):this._controller.start()},a.prototype.close=function(){this._worker?this._worker.postMessage({cmd:"stop"}):this._controller.stop()},a.prototype.seek=function(o){this._worker?this._worker.postMessage({cmd:"seek",param:o}):this._controller.seek(o)},a.prototype.pause=function(){this._worker?this._worker.postMessage({cmd:"pause"}):this._controller.pause()},a.prototype.resume=function(){this._worker?this._worker.postMessage({cmd:"resume"}):this._controller.resume()},a.prototype._onInitSegment=function(o,t){var d=this;Promise.resolve().then(function(){d._emitter.emit(f.default.INIT_SEGMENT,o,t)})},a.prototype._onMediaSegment=function(o,t){var d=this;Promise.resolve().then(function(){d._emitter.emit(f.default.MEDIA_SEGMENT,o,t)})},a.prototype._onLoadingComplete=function(){var o=this;Promise.resolve().then(function(){o._emitter.emit(f.default.LOADING_COMPLETE)})},a.prototype._onRecoveredEarlyEof=function(){var o=this;Promise.resolve().then(function(){o._emitter.emit(f.default.RECOVERED_EARLY_EOF)})},a.prototype._onMediaInfo=function(o){var t=this;Promise.resolve().then(function(){t._emitter.emit(f.default.MEDIA_INFO,o)})},a.prototype._onMetaDataArrived=function(o){var t=this;Promise.resolve().then(function(){t._emitter.emit(f.default.METADATA_ARRIVED,o)})},a.prototype._onScriptDataArrived=function(o){var t=this;Promise.resolve().then(function(){t._emitter.emit(f.default.SCRIPTDATA_ARRIVED,o)})},a.prototype._onStatisticsInfo=function(o){var t=this;Promise.resolve().then(function(){t._emitter.emit(f.default.STATISTICS_INFO,o)})},a.prototype._onIOError=function(o,t){var d=this;Promise.resolve().then(function(){d._emitter.emit(f.default.IO_ERROR,o,t)})},a.prototype._onDemuxError=function(o,t){var d=this;Promise.resolve().then(function(){d._emitter.emit(f.default.DEMUX_ERROR,o,t)})},a.prototype._onRecommendSeekpoint=function(o){var t=this;Promise.resolve().then(function(){t._emitter.emit(f.default.RECOMMEND_SEEKPOINT,o)})},a.prototype._onLoggingConfigChanged=function(o){this._worker&&this._worker.postMessage({cmd:"logging_config",param:o})},a.prototype._onWorkerMessage=function(o){var t=o.data,d=t.data;if(t.msg==="destroyed"||this._workerDestroying){this._workerDestroying=!1,this._worker.terminate(),this._worker=null;return}switch(t.msg){case f.default.INIT_SEGMENT:case f.default.MEDIA_SEGMENT:this._emitter.emit(t.msg,d.type,d.data);break;case f.default.LOADING_COMPLETE:case f.default.RECOVERED_EARLY_EOF:this._emitter.emit(t.msg);break;case f.default.MEDIA_INFO:Object.setPrototypeOf(d,s.default.prototype),this._emitter.emit(t.msg,d);break;case f.default.METADATA_ARRIVED:case f.default.SCRIPTDATA_ARRIVED:case f.default.STATISTICS_INFO:this._emitter.emit(t.msg,d);break;case f.default.IO_ERROR:case f.default.DEMUX_ERROR:this._emitter.emit(t.msg,d.type,d.info);break;case f.default.RECOMMEND_SEEKPOINT:this._emitter.emit(t.msg,d);break;case"logcat_callback":c.default.emitter.emit("log",d.type,d.logcat);break}},a}();A.default=r},"./src/core/transmuxing-controller.js":function(T,A,y){y.r(A);var L=y("./node_modules/events/events.js"),_=y.n(L),h=y("./src/utils/logger.js"),u=y("./src/utils/browser.js"),c=y("./src/core/media-info.js"),n=y("./src/demux/flv-demuxer.js"),l=y("./src/remux/mp4-remuxer.js"),f=y("./src/demux/demux-errors.js"),s=y("./src/io/io-controller.js"),r=y("./src/core/transmuxing-events.js"),a=function(){function o(t,d){this.TAG="TransmuxingController",this._emitter=new(_()),this._config=d,t.segments||(t.segments=[{duration:t.duration,filesize:t.filesize,url:t.url}]),typeof t.cors!="boolean"&&(t.cors=!0),typeof t.withCredentials!="boolean"&&(t.withCredentials=!1),this._mediaDataSource=t,this._currentSegmentIndex=0;var m=0;this._mediaDataSource.segments.forEach(function(g){g.timestampBase=m,m+=g.duration,g.cors=t.cors,g.withCredentials=t.withCredentials,d.referrerPolicy&&(g.referrerPolicy=d.referrerPolicy)}),!isNaN(m)&&this._mediaDataSource.duration!==m&&(this._mediaDataSource.duration=m),this._mediaInfo=null,this._demuxer=null,this._remuxer=null,this._ioctl=null,this._pendingSeekTime=null,this._pendingResolveSeekPoint=null,this._statisticsReporter=null}return o.prototype.destroy=function(){this._mediaInfo=null,this._mediaDataSource=null,this._statisticsReporter&&this._disableStatisticsReporter(),this._ioctl&&(this._ioctl.destroy(),this._ioctl=null),this._demuxer&&(this._demuxer.destroy(),this._demuxer=null),this._remuxer&&(this._remuxer.destroy(),this._remuxer=null),this._emitter.removeAllListeners(),this._emitter=null},o.prototype.on=function(t,d){this._emitter.addListener(t,d)},o.prototype.off=function(t,d){this._emitter.removeListener(t,d)},o.prototype.start=function(){this._loadSegment(0),this._enableStatisticsReporter()},o.prototype._loadSegment=function(t,d){this._currentSegmentIndex=t;var m=this._mediaDataSource.segments[t],g=this._ioctl=new s.default(m,this._config,t);g.onError=this._onIOException.bind(this),g.onSeeked=this._onIOSeeked.bind(this),g.onComplete=this._onIOComplete.bind(this),g.onRedirect=this._onIORedirect.bind(this),g.onRecoveredEarlyEof=this._onIORecoveredEarlyEof.bind(this),d?this._demuxer.bindDataSource(this._ioctl):g.onDataArrival=this._onInitChunkArrival.bind(this),g.open(d)},o.prototype.stop=function(){this._internalAbort(),this._disableStatisticsReporter()},o.prototype._internalAbort=function(){this._ioctl&&(this._ioctl.destroy(),this._ioctl=null)},o.prototype.pause=function(){this._ioctl&&this._ioctl.isWorking()&&(this._ioctl.pause(),this._disableStatisticsReporter())},o.prototype.resume=function(){this._ioctl&&this._ioctl.isPaused()&&(this._ioctl.resume(),this._enableStatisticsReporter())},o.prototype.seek=function(t){if(!(this._mediaInfo==null||!this._mediaInfo.isSeekable())){var d=this._searchSegmentIndexContains(t);if(d===this._currentSegmentIndex){var m=this._mediaInfo.segments[d];if(m==null)this._pendingSeekTime=t;else{var g=m.getNearestKeyframe(t);this._remuxer.seek(g.milliseconds),this._ioctl.seek(g.fileposition),this._pendingResolveSeekPoint=g.milliseconds}}else{var x=this._mediaInfo.segments[d];if(x==null)this._pendingSeekTime=t,this._internalAbort(),this._remuxer.seek(),this._remuxer.insertDiscontinuity(),this._loadSegment(d);else{var g=x.getNearestKeyframe(t);this._internalAbort(),this._remuxer.seek(t),this._remuxer.insertDiscontinuity(),this._demuxer.resetMediaInfo(),this._demuxer.timestampBase=this._mediaDataSource.segments[d].timestampBase,this._loadSegment(d,g.fileposition),this._pendingResolveSeekPoint=g.milliseconds,this._reportSegmentMediaInfo(d)}}this._enableStatisticsReporter()}},o.prototype._searchSegmentIndexContains=function(t){for(var d=this._mediaDataSource.segments,m=d.length-1,g=0;g<d.length;g++)if(t<d[g].timestampBase){m=g-1;break}return m},o.prototype._onInitChunkArrival=function(t,d){var m=this,g=null,x=0;if(d>0)this._demuxer.bindDataSource(this._ioctl),this._demuxer.timestampBase=this._mediaDataSource.segments[this._currentSegmentIndex].timestampBase,x=this._demuxer.parseChunks(t,d);else if((g=n.default.probe(t)).match){this._demuxer=new n.default(g,this._config),this._remuxer||(this._remuxer=new l.default(this._config));var R=this._mediaDataSource;R.duration!=null&&!isNaN(R.duration)&&(this._demuxer.overridedDuration=R.duration),typeof R.hasAudio=="boolean"&&(this._demuxer.overridedHasAudio=R.hasAudio),typeof R.hasVideo=="boolean"&&(this._demuxer.overridedHasVideo=R.hasVideo),this._demuxer.timestampBase=R.segments[this._currentSegmentIndex].timestampBase,this._demuxer.onError=this._onDemuxException.bind(this),this._demuxer.onMediaInfo=this._onMediaInfo.bind(this),this._demuxer.onMetaDataArrived=this._onMetaDataArrived.bind(this),this._demuxer.onScriptDataArrived=this._onScriptDataArrived.bind(this),this._remuxer.bindDataSource(this._demuxer.bindDataSource(this._ioctl)),this._remuxer.onInitSegment=this._onRemuxerInitSegmentArrival.bind(this),this._remuxer.onMediaSegment=this._onRemuxerMediaSegmentArrival.bind(this),x=this._demuxer.parseChunks(t,d)}else g=null,h.default.e(this.TAG,"Non-FLV, Unsupported media type!"),Promise.resolve().then(function(){m._internalAbort()}),this._emitter.emit(r.default.DEMUX_ERROR,f.default.FORMAT_UNSUPPORTED,"Non-FLV, Unsupported media type"),x=0;return x},o.prototype._onMediaInfo=function(t){var d=this;this._mediaInfo==null&&(this._mediaInfo=Object.assign({},t),this._mediaInfo.keyframesIndex=null,this._mediaInfo.segments=[],this._mediaInfo.segmentCount=this._mediaDataSource.segments.length,Object.setPrototypeOf(this._mediaInfo,c.default.prototype));var m=Object.assign({},t);Object.setPrototypeOf(m,c.default.prototype),this._mediaInfo.segments[this._currentSegmentIndex]=m,this._reportSegmentMediaInfo(this._currentSegmentIndex),this._pendingSeekTime!=null&&Promise.resolve().then(function(){var g=d._pendingSeekTime;d._pendingSeekTime=null,d.seek(g)})},o.prototype._onMetaDataArrived=function(t){this._emitter.emit(r.default.METADATA_ARRIVED,t)},o.prototype._onScriptDataArrived=function(t){this._emitter.emit(r.default.SCRIPTDATA_ARRIVED,t)},o.prototype._onIOSeeked=function(){this._remuxer.insertDiscontinuity()},o.prototype._onIOComplete=function(t){var d=t,m=d+1;m<this._mediaDataSource.segments.length?(this._internalAbort(),this._remuxer.flushStashedSamples(),this._loadSegment(m)):(this._remuxer.flushStashedSamples(),this._emitter.emit(r.default.LOADING_COMPLETE),this._disableStatisticsReporter())},o.prototype._onIORedirect=function(t){var d=this._ioctl.extraData;this._mediaDataSource.segments[d].redirectedURL=t},o.prototype._onIORecoveredEarlyEof=function(){this._emitter.emit(r.default.RECOVERED_EARLY_EOF)},o.prototype._onIOException=function(t,d){h.default.e(this.TAG,"IOException: type = "+t+", code = "+d.code+", msg = "+d.msg),this._emitter.emit(r.default.IO_ERROR,t,d),this._disableStatisticsReporter()},o.prototype._onDemuxException=function(t,d){h.default.e(this.TAG,"DemuxException: type = "+t+", info = "+d),this._emitter.emit(r.default.DEMUX_ERROR,t,d)},o.prototype._onRemuxerInitSegmentArrival=function(t,d){this._emitter.emit(r.default.INIT_SEGMENT,t,d)},o.prototype._onRemuxerMediaSegmentArrival=function(t,d){if(this._pendingSeekTime==null&&(this._emitter.emit(r.default.MEDIA_SEGMENT,t,d),this._pendingResolveSeekPoint!=null&&t==="video")){var m=d.info.syncPoints,g=this._pendingResolveSeekPoint;this._pendingResolveSeekPoint=null,u.default.safari&&m.length>0&&m[0].originalDts===g&&(g=m[0].pts),this._emitter.emit(r.default.RECOMMEND_SEEKPOINT,g)}},o.prototype._enableStatisticsReporter=function(){this._statisticsReporter==null&&(this._statisticsReporter=self.setInterval(this._reportStatisticsInfo.bind(this),this._config.statisticsInfoReportInterval))},o.prototype._disableStatisticsReporter=function(){this._statisticsReporter&&(self.clearInterval(this._statisticsReporter),this._statisticsReporter=null)},o.prototype._reportSegmentMediaInfo=function(t){var d=this._mediaInfo.segments[t],m=Object.assign({},d);m.duration=this._mediaInfo.duration,m.segmentCount=this._mediaInfo.segmentCount,delete m.segments,delete m.keyframesIndex,this._emitter.emit(r.default.MEDIA_INFO,m)},o.prototype._reportStatisticsInfo=function(){var t={};t.url=this._ioctl.currentURL,t.hasRedirect=this._ioctl.hasRedirect,t.hasRedirect&&(t.redirectedURL=this._ioctl.currentRedirectedURL),t.speed=this._ioctl.currentSpeed,t.loaderType=this._ioctl.loaderType,t.currentSegmentIndex=this._currentSegmentIndex,t.totalSegmentCount=this._mediaDataSource.segments.length,this._emitter.emit(r.default.STATISTICS_INFO,t)},o}();A.default=a},"./src/core/transmuxing-events.js":function(T,A,y){y.r(A);var L={IO_ERROR:"io_error",DEMUX_ERROR:"demux_error",INIT_SEGMENT:"init_segment",MEDIA_SEGMENT:"media_segment",LOADING_COMPLETE:"loading_complete",RECOVERED_EARLY_EOF:"recovered_early_eof",MEDIA_INFO:"media_info",METADATA_ARRIVED:"metadata_arrived",SCRIPTDATA_ARRIVED:"scriptdata_arrived",STATISTICS_INFO:"statistics_info",RECOMMEND_SEEKPOINT:"recommend_seekpoint"};A.default=L},"./src/core/transmuxing-worker.js":function(T,A,y){y.r(A);var L=y("./src/utils/logging-control.js"),_=y("./src/utils/polyfill.js"),h=y("./src/core/transmuxing-controller.js"),u=y("./src/core/transmuxing-events.js"),c=function(n){var l=null,f=E.bind(this);_.default.install(),n.addEventListener("message",function(b){switch(b.data.cmd){case"init":l=new h.default(b.data.param[0],b.data.param[1]),l.on(u.default.IO_ERROR,x.bind(this)),l.on(u.default.DEMUX_ERROR,R.bind(this)),l.on(u.default.INIT_SEGMENT,s.bind(this)),l.on(u.default.MEDIA_SEGMENT,r.bind(this)),l.on(u.default.LOADING_COMPLETE,a.bind(this)),l.on(u.default.RECOVERED_EARLY_EOF,o.bind(this)),l.on(u.default.MEDIA_INFO,t.bind(this)),l.on(u.default.METADATA_ARRIVED,d.bind(this)),l.on(u.default.SCRIPTDATA_ARRIVED,m.bind(this)),l.on(u.default.STATISTICS_INFO,g.bind(this)),l.on(u.default.RECOMMEND_SEEKPOINT,S.bind(this));break;case"destroy":l&&(l.destroy(),l=null),n.postMessage({msg:"destroyed"});break;case"start":l.start();break;case"stop":l.stop();break;case"seek":l.seek(b.data.param);break;case"pause":l.pause();break;case"resume":l.resume();break;case"logging_config":{var O=b.data.param;L.default.applyConfig(O),O.enableCallback===!0?L.default.addLogListener(f):L.default.removeLogListener(f);break}}});function s(b,O){var D={msg:u.default.INIT_SEGMENT,data:{type:b,data:O}};n.postMessage(D,[O.data])}function r(b,O){var D={msg:u.default.MEDIA_SEGMENT,data:{type:b,data:O}};n.postMessage(D,[O.data])}function a(){var b={msg:u.default.LOADING_COMPLETE};n.postMessage(b)}function o(){var b={msg:u.default.RECOVERED_EARLY_EOF};n.postMessage(b)}function t(b){var O={msg:u.default.MEDIA_INFO,data:b};n.postMessage(O)}function d(b){var O={msg:u.default.METADATA_ARRIVED,data:b};n.postMessage(O)}function m(b){var O={msg:u.default.SCRIPTDATA_ARRIVED,data:b};n.postMessage(O)}function g(b){var O={msg:u.default.STATISTICS_INFO,data:b};n.postMessage(O)}function x(b,O){n.postMessage({msg:u.default.IO_ERROR,data:{type:b,info:O}})}function R(b,O){n.postMessage({msg:u.default.DEMUX_ERROR,data:{type:b,info:O}})}function S(b){n.postMessage({msg:u.default.RECOMMEND_SEEKPOINT,data:b})}function E(b,O){n.postMessage({msg:"logcat_callback",data:{type:b,logcat:O}})}};A.default=c},"./src/demux/amf-parser.js":function(T,A,y){y.r(A);var L=y("./src/utils/logger.js"),_=y("./src/utils/utf8-conv.js"),h=y("./src/utils/exception.js"),u=function(){var n=new ArrayBuffer(2);return new DataView(n).setInt16(0,256,!0),new Int16Array(n)[0]===256}(),c=function(){function n(){}return n.parseScriptData=function(l,f,s){var r={};try{var a=n.parseValue(l,f,s),o=n.parseValue(l,f+a.size,s-a.size);r[a.data]=o.data}catch(t){L.default.e("AMF",t.toString())}return r},n.parseObject=function(l,f,s){if(s<3)throw new h.IllegalStateException("Data not enough when parse ScriptDataObject");var r=n.parseString(l,f,s),a=n.parseValue(l,f+r.size,s-r.size),o=a.objectEnd;return{data:{name:r.data,value:a.data},size:r.size+a.size,objectEnd:o}},n.parseVariable=function(l,f,s){return n.parseObject(l,f,s)},n.parseString=function(l,f,s){if(s<2)throw new h.IllegalStateException("Data not enough when parse String");var r=new DataView(l,f,s),a=r.getUint16(0,!u),o;return a>0?o=(0,_.default)(new Uint8Array(l,f+2,a)):o="",{data:o,size:2+a}},n.parseLongString=function(l,f,s){if(s<4)throw new h.IllegalStateException("Data not enough when parse LongString");var r=new DataView(l,f,s),a=r.getUint32(0,!u),o;return a>0?o=(0,_.default)(new Uint8Array(l,f+4,a)):o="",{data:o,size:4+a}},n.parseDate=function(l,f,s){if(s<10)throw new h.IllegalStateException("Data size invalid when parse Date");var r=new DataView(l,f,s),a=r.getFloat64(0,!u),o=r.getInt16(8,!u);return a+=o*60*1e3,{data:new Date(a),size:8+2}},n.parseValue=function(l,f,s){if(s<1)throw new h.IllegalStateException("Data not enough when parse Value");var r=new DataView(l,f,s),a=1,o=r.getUint8(0),t,d=!1;try{switch(o){case 0:t=r.getFloat64(1,!u),a+=8;break;case 1:{var m=r.getUint8(1);t=!!m,a+=1;break}case 2:{var g=n.parseString(l,f+1,s-1);t=g.data,a+=g.size;break}case 3:{t={};var x=0;for((r.getUint32(s-4,!u)&16777215)===9&&(x=3);a<s-4;){var R=n.parseObject(l,f+a,s-a-x);if(R.objectEnd)break;t[R.data.name]=R.data.value,a+=R.size}if(a<=s-3){var S=r.getUint32(a-1,!u)&16777215;S===9&&(a+=3)}break}case 8:{t={},a+=4;var x=0;for((r.getUint32(s-4,!u)&16777215)===9&&(x=3);a<s-8;){var E=n.parseVariable(l,f+a,s-a-x);if(E.objectEnd)break;t[E.data.name]=E.data.value,a+=E.size}if(a<=s-3){var S=r.getUint32(a-1,!u)&16777215;S===9&&(a+=3)}break}case 9:t=void 0,a=1,d=!0;break;case 10:{t=[];var b=r.getUint32(1,!u);a+=4;for(var O=0;O<b;O++){var D=n.parseValue(l,f+a,s-a);t.push(D.data),a+=D.size}break}case 11:{var I=n.parseDate(l,f+1,s-1);t=I.data,a+=I.size;break}case 12:{var k=n.parseString(l,f+1,s-1);t=k.data,a+=k.size;break}default:a=s,L.default.w("AMF","Unsupported AMF value type "+o)}}catch(K){L.default.e("AMF",K.toString())}return{data:t,size:a,objectEnd:d}},n}();A.default=c},"./src/demux/demux-errors.js":function(T,A,y){y.r(A);var L={OK:"OK",FORMAT_ERROR:"FormatError",FORMAT_UNSUPPORTED:"FormatUnsupported",CODEC_UNSUPPORTED:"CodecUnsupported"};A.default=L},"./src/demux/exp-golomb.js":function(T,A,y){y.r(A);var L=y("./src/utils/exception.js"),_=function(){function h(u){this.TAG="ExpGolomb",this._buffer=u,this._buffer_index=0,this._total_bytes=u.byteLength,this._total_bits=u.byteLength*8,this._current_word=0,this._current_word_bits_left=0}return h.prototype.destroy=function(){this._buffer=null},h.prototype._fillCurrentWord=function(){var u=this._total_bytes-this._buffer_index;if(u<=0)throw new L.IllegalStateException("ExpGolomb: _fillCurrentWord() but no bytes available");var c=Math.min(4,u),n=new Uint8Array(4);n.set(this._buffer.subarray(this._buffer_index,this._buffer_index+c)),this._current_word=new DataView(n.buffer).getUint32(0,!1),this._buffer_index+=c,this._current_word_bits_left=c*8},h.prototype.readBits=function(u){if(u>32)throw new L.InvalidArgumentException("ExpGolomb: readBits() bits exceeded max 32bits!");if(u<=this._current_word_bits_left){var c=this._current_word>>>32-u;return this._current_word<<=u,this._current_word_bits_left-=u,c}var n=this._current_word_bits_left?this._current_word:0;n=n>>>32-this._current_word_bits_left;var l=u-this._current_word_bits_left;this._fillCurrentWord();var f=Math.min(l,this._current_word_bits_left),s=this._current_word>>>32-f;return this._current_word<<=f,this._current_word_bits_left-=f,n=n<<f|s,n},h.prototype.readBool=function(){return this.readBits(1)===1},h.prototype.readByte=function(){return this.readBits(8)},h.prototype._skipLeadingZero=function(){var u;for(u=0;u<this._current_word_bits_left;u++)if(this._current_word&2147483648>>>u)return this._current_word<<=u,this._current_word_bits_left-=u,u;return this._fillCurrentWord(),u+this._skipLeadingZero()},h.prototype.readUEG=function(){var u=this._skipLeadingZero();return this.readBits(u+1)-1},h.prototype.readSEG=function(){var u=this.readUEG();return u&1?u+1>>>1:-1*(u>>>1)},h}();A.default=_},"./src/demux/flv-demuxer.js":function(T,A,y){y.r(A);var L=y("./src/utils/logger.js"),_=y("./src/demux/amf-parser.js"),h=y("./src/demux/sps-parser.js"),u=y("./src/demux/demux-errors.js"),c=y("./src/core/media-info.js"),n=y("./src/utils/exception.js");function l(s,r){return s[r]<<24|s[r+1]<<16|s[r+2]<<8|s[r+3]}var f=function(){function s(r,a){this.TAG="FLVDemuxer",this._config=a,this._onError=null,this._onMediaInfo=null,this._onMetaDataArrived=null,this._onScriptDataArrived=null,this._onTrackMetadata=null,this._onDataAvailable=null,this._dataOffset=r.dataOffset,this._firstParse=!0,this._dispatch=!1,this._hasAudio=r.hasAudioTrack,this._hasVideo=r.hasVideoTrack,this._hasAudioFlagOverrided=!1,this._hasVideoFlagOverrided=!1,this._audioInitialMetadataDispatched=!1,this._videoInitialMetadataDispatched=!1,this._mediaInfo=new c.default,this._mediaInfo.hasAudio=this._hasAudio,this._mediaInfo.hasVideo=this._hasVideo,this._metadata=null,this._audioMetadata=null,this._videoMetadata=null,this._naluLengthSize=4,this._timestampBase=0,this._timescale=1e3,this._duration=0,this._durationOverrided=!1,this._referenceFrameRate={fixed:!0,fps:23.976,fps_num:23976,fps_den:1e3},this._flvSoundRateTable=[5500,11025,22050,44100,48e3],this._mpegSamplingRates=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],this._mpegAudioV10SampleRateTable=[44100,48e3,32e3,0],this._mpegAudioV20SampleRateTable=[22050,24e3,16e3,0],this._mpegAudioV25SampleRateTable=[11025,12e3,8e3,0],this._mpegAudioL1BitRateTable=[0,32,64,96,128,160,192,224,256,288,320,352,384,416,448,-1],this._mpegAudioL2BitRateTable=[0,32,48,56,64,80,96,112,128,160,192,224,256,320,384,-1],this._mpegAudioL3BitRateTable=[0,32,40,48,56,64,80,96,112,128,160,192,224,256,320,-1],this._videoTrack={type:"video",id:1,sequenceNumber:0,samples:[],length:0},this._audioTrack={type:"audio",id:2,sequenceNumber:0,samples:[],length:0},this._littleEndian=function(){var o=new ArrayBuffer(2);return new DataView(o).setInt16(0,256,!0),new Int16Array(o)[0]===256}()}return s.prototype.destroy=function(){this._mediaInfo=null,this._metadata=null,this._audioMetadata=null,this._videoMetadata=null,this._videoTrack=null,this._audioTrack=null,this._onError=null,this._onMediaInfo=null,this._onMetaDataArrived=null,this._onScriptDataArrived=null,this._onTrackMetadata=null,this._onDataAvailable=null},s.probe=function(r){var a=new Uint8Array(r),o={match:!1};if(a[0]!==70||a[1]!==76||a[2]!==86||a[3]!==1)return o;var t=(a[4]&4)>>>2!==0,d=(a[4]&1)!==0,m=l(a,5);return m<9?o:{match:!0,consumed:m,dataOffset:m,hasAudioTrack:t,hasVideoTrack:d}},s.prototype.bindDataSource=function(r){return r.onDataArrival=this.parseChunks.bind(this),this},Object.defineProperty(s.prototype,"onTrackMetadata",{get:function(){return this._onTrackMetadata},set:function(r){this._onTrackMetadata=r},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"onMediaInfo",{get:function(){return this._onMediaInfo},set:function(r){this._onMediaInfo=r},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"onMetaDataArrived",{get:function(){return this._onMetaDataArrived},set:function(r){this._onMetaDataArrived=r},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"onScriptDataArrived",{get:function(){return this._onScriptDataArrived},set:function(r){this._onScriptDataArrived=r},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"onError",{get:function(){return this._onError},set:function(r){this._onError=r},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"onDataAvailable",{get:function(){return this._onDataAvailable},set:function(r){this._onDataAvailable=r},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"timestampBase",{get:function(){return this._timestampBase},set:function(r){this._timestampBase=r},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"overridedDuration",{get:function(){return this._duration},set:function(r){this._durationOverrided=!0,this._duration=r,this._mediaInfo.duration=r},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"overridedHasAudio",{set:function(r){this._hasAudioFlagOverrided=!0,this._hasAudio=r,this._mediaInfo.hasAudio=r},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"overridedHasVideo",{set:function(r){this._hasVideoFlagOverrided=!0,this._hasVideo=r,this._mediaInfo.hasVideo=r},enumerable:!1,configurable:!0}),s.prototype.resetMediaInfo=function(){this._mediaInfo=new c.default},s.prototype._isInitialMetadataDispatched=function(){return this._hasAudio&&this._hasVideo?this._audioInitialMetadataDispatched&&this._videoInitialMetadataDispatched:this._hasAudio&&!this._hasVideo?this._audioInitialMetadataDispatched:!this._hasAudio&&this._hasVideo?this._videoInitialMetadataDispatched:!1},s.prototype.parseChunks=function(r,a){if(!this._onError||!this._onMediaInfo||!this._onTrackMetadata||!this._onDataAvailable)throw new n.IllegalStateException("Flv: onError & onMediaInfo & onTrackMetadata & onDataAvailable callback must be specified");var o=0,t=this._littleEndian;if(a===0)if(r.byteLength>13){var d=s.probe(r);o=d.dataOffset}else return 0;if(this._firstParse){this._firstParse=!1,a+o!==this._dataOffset&&L.default.w(this.TAG,"First time parsing but chunk byteStart invalid!");var m=new DataView(r,o),g=m.getUint32(0,!t);g!==0&&L.default.w(this.TAG,"PrevTagSize0 !== 0 !!!"),o+=4}for(;o<r.byteLength;){this._dispatch=!0;var m=new DataView(r,o);if(o+11+4>r.byteLength)break;var x=m.getUint8(0),R=m.getUint32(0,!t)&16777215;if(o+11+R+4>r.byteLength)break;if(x!==8&&x!==9&&x!==18){L.default.w(this.TAG,"Unsupported tag type "+x+", skipped"),o+=11+R+4;continue}var S=m.getUint8(4),E=m.getUint8(5),b=m.getUint8(6),O=m.getUint8(7),D=b|E<<8|S<<16|O<<24,I=m.getUint32(7,!t)&16777215;I!==0&&L.default.w(this.TAG,"Meet tag which has StreamID != 0!");var k=o+11;switch(x){case 8:this._parseAudioData(r,k,R,D);break;case 9:this._parseVideoData(r,k,R,D,a+o);break;case 18:this._parseScriptData(r,k,R);break}var K=m.getUint32(11+R,!t);K!==11+R&&L.default.w(this.TAG,"Invalid PrevTagSize "+K),o+=11+R+4}return this._isInitialMetadataDispatched()&&this._dispatch&&(this._audioTrack.length||this._videoTrack.length)&&this._onDataAvailable(this._audioTrack,this._videoTrack),o},s.prototype._parseScriptData=function(r,a,o){var t=_.default.parseScriptData(r,a,o);if(t.hasOwnProperty("onMetaData")){if(t.onMetaData==null||typeof t.onMetaData!="object"){L.default.w(this.TAG,"Invalid onMetaData structure!");return}this._metadata&&L.default.w(this.TAG,"Found another onMetaData tag!"),this._metadata=t;var d=this._metadata.onMetaData;if(this._onMetaDataArrived&&this._onMetaDataArrived(Object.assign({},d)),typeof d.hasAudio=="boolean"&&this._hasAudioFlagOverrided===!1&&(this._hasAudio=d.hasAudio,this._mediaInfo.hasAudio=this._hasAudio),typeof d.hasVideo=="boolean"&&this._hasVideoFlagOverrided===!1&&(this._hasVideo=d.hasVideo,this._mediaInfo.hasVideo=this._hasVideo),typeof d.audiodatarate=="number"&&(this._mediaInfo.audioDataRate=d.audiodatarate),typeof d.videodatarate=="number"&&(this._mediaInfo.videoDataRate=d.videodatarate),typeof d.width=="number"&&(this._mediaInfo.width=d.width),typeof d.height=="number"&&(this._mediaInfo.height=d.height),typeof d.duration=="number"){if(!this._durationOverrided){var m=Math.floor(d.duration*this._timescale);this._duration=m,this._mediaInfo.duration=m}}else this._mediaInfo.duration=0;if(typeof d.framerate=="number"){var g=Math.floor(d.framerate*1e3);if(g>0){var x=g/1e3;this._referenceFrameRate.fixed=!0,this._referenceFrameRate.fps=x,this._referenceFrameRate.fps_num=g,this._referenceFrameRate.fps_den=1e3,this._mediaInfo.fps=x}}if(typeof d.keyframes=="object"){this._mediaInfo.hasKeyframesIndex=!0;var R=d.keyframes;this._mediaInfo.keyframesIndex=this._parseKeyframesIndex(R),d.keyframes=null}else this._mediaInfo.hasKeyframesIndex=!1;this._dispatch=!1,this._mediaInfo.metadata=d,L.default.v(this.TAG,"Parsed onMetaData"),this._mediaInfo.isComplete()&&this._onMediaInfo(this._mediaInfo)}Object.keys(t).length>0&&this._onScriptDataArrived&&this._onScriptDataArrived(Object.assign({},t))},s.prototype._parseKeyframesIndex=function(r){for(var a=[],o=[],t=1;t<r.times.length;t++){var d=this._timestampBase+Math.floor(r.times[t]*1e3);a.push(d),o.push(r.filepositions[t])}return{times:a,filepositions:o}},s.prototype._parseAudioData=function(r,a,o,t){if(o<=1){L.default.w(this.TAG,"Flv: Invalid audio packet, missing SoundData payload!");return}if(!(this._hasAudioFlagOverrided===!0&&this._hasAudio===!1)){this._littleEndian;var d=new DataView(r,a,o),m=d.getUint8(0),g=m>>>4;if(g!==2&&g!==10){this._onError(u.default.CODEC_UNSUPPORTED,"Flv: Unsupported audio codec idx: "+g);return}var x=0,R=(m&12)>>>2;if(R>=0&&R<=4)x=this._flvSoundRateTable[R];else{this._onError(u.default.FORMAT_ERROR,"Flv: Invalid audio sample rate idx: "+R);return}var S=m&1,E=this._audioMetadata,b=this._audioTrack;if(E||(this._hasAudio===!1&&this._hasAudioFlagOverrided===!1&&(this._hasAudio=!0,this._mediaInfo.hasAudio=!0),E=this._audioMetadata={},E.type="audio",E.id=b.id,E.timescale=this._timescale,E.duration=this._duration,E.audioSampleRate=x,E.channelCount=S===0?1:2),g===10){var O=this._parseAACAudioData(r,a+1,o-1);if(O==null)return;if(O.packetType===0){E.config&&L.default.w(this.TAG,"Found another AudioSpecificConfig!");var D=O.data;E.audioSampleRate=D.samplingRate,E.channelCount=D.channelCount,E.codec=D.codec,E.originalCodec=D.originalCodec,E.config=D.config,E.refSampleDuration=1024/E.audioSampleRate*E.timescale,L.default.v(this.TAG,"Parsed AudioSpecificConfig"),this._isInitialMetadataDispatched()?this._dispatch&&(this._audioTrack.length||this._videoTrack.length)&&this._onDataAvailable(this._audioTrack,this._videoTrack):this._audioInitialMetadataDispatched=!0,this._dispatch=!1,this._onTrackMetadata("audio",E);var I=this._mediaInfo;I.audioCodec=E.originalCodec,I.audioSampleRate=E.audioSampleRate,I.audioChannelCount=E.channelCount,I.hasVideo?I.videoCodec!=null&&(I.mimeType='video/x-flv; codecs="'+I.videoCodec+","+I.audioCodec+'"'):I.mimeType='video/x-flv; codecs="'+I.audioCodec+'"',I.isComplete()&&this._onMediaInfo(I)}else if(O.packetType===1){var k=this._timestampBase+t,K={unit:O.data,length:O.data.byteLength,dts:k,pts:k};b.samples.push(K),b.length+=O.data.length}else L.default.e(this.TAG,"Flv: Unsupported AAC data type "+O.packetType)}else if(g===2){if(!E.codec){var D=this._parseMP3AudioData(r,a+1,o-1,!0);if(D==null)return;E.audioSampleRate=D.samplingRate,E.channelCount=D.channelCount,E.codec=D.codec,E.originalCodec=D.originalCodec,E.refSampleDuration=1152/E.audioSampleRate*E.timescale,L.default.v(this.TAG,"Parsed MPEG Audio Frame Header"),this._audioInitialMetadataDispatched=!0,this._onTrackMetadata("audio",E);var I=this._mediaInfo;I.audioCodec=E.codec,I.audioSampleRate=E.audioSampleRate,I.audioChannelCount=E.channelCount,I.audioDataRate=D.bitRate,I.hasVideo?I.videoCodec!=null&&(I.mimeType='video/x-flv; codecs="'+I.videoCodec+","+I.audioCodec+'"'):I.mimeType='video/x-flv; codecs="'+I.audioCodec+'"',I.isComplete()&&this._onMediaInfo(I)}var W=this._parseMP3AudioData(r,a+1,o-1,!1);if(W==null)return;var k=this._timestampBase+t,N={unit:W,length:W.byteLength,dts:k,pts:k};b.samples.push(N),b.length+=W.length}}},s.prototype._parseAACAudioData=function(r,a,o){if(o<=1){L.default.w(this.TAG,"Flv: Invalid AAC packet, missing AACPacketType or/and Data!");return}var t={},d=new Uint8Array(r,a,o);return t.packetType=d[0],d[0]===0?t.data=this._parseAACAudioSpecificConfig(r,a+1,o-1):t.data=d.subarray(1),t},s.prototype._parseAACAudioSpecificConfig=function(r,a,o){var t=new Uint8Array(r,a,o),d=null,m=0,g=0,x=0,R=null;if(m=g=t[0]>>>3,x=(t[0]&7)<<1|t[1]>>>7,x<0||x>=this._mpegSamplingRates.length){this._onError(u.default.FORMAT_ERROR,"Flv: AAC invalid sampling frequency index!");return}var S=this._mpegSamplingRates[x],E=(t[1]&120)>>>3;if(E<0||E>=8){this._onError(u.default.FORMAT_ERROR,"Flv: AAC invalid channel configuration");return}m===5&&(R=(t[1]&7)<<1|t[2]>>>7,(t[2]&124)>>>2);var b=self.navigator.userAgent.toLowerCase();return b.indexOf("firefox")!==-1?x>=6?(m=5,d=new Array(4),R=x-3):(m=2,d=new Array(2),R=x):b.indexOf("android")!==-1?(m=2,d=new Array(2),R=x):(m=5,R=x,d=new Array(4),x>=6?R=x-3:E===1&&(m=2,d=new Array(2),R=x)),d[0]=m<<3,d[0]|=(x&15)>>>1,d[1]=(x&15)<<7,d[1]|=(E&15)<<3,m===5&&(d[1]|=(R&15)>>>1,d[2]=(R&1)<<7,d[2]|=8,d[3]=0),{config:d,samplingRate:S,channelCount:E,codec:"mp4a.40."+m,originalCodec:"mp4a.40."+g}},s.prototype._parseMP3AudioData=function(r,a,o,t){if(o<4){L.default.w(this.TAG,"Flv: Invalid MP3 packet, header missing!");return}this._littleEndian;var d=new Uint8Array(r,a,o),m=null;if(t){if(d[0]!==255)return;var g=d[1]>>>3&3,x=(d[1]&6)>>1,R=(d[2]&240)>>>4,S=(d[2]&12)>>>2,E=d[3]>>>6&3,b=E!==3?2:1,O=0,D=0,I="mp3";switch(g){case 0:O=this._mpegAudioV25SampleRateTable[S];break;case 2:O=this._mpegAudioV20SampleRateTable[S];break;case 3:O=this._mpegAudioV10SampleRateTable[S];break}switch(x){case 1:R<this._mpegAudioL3BitRateTable.length&&(D=this._mpegAudioL3BitRateTable[R]);break;case 2:R<this._mpegAudioL2BitRateTable.length&&(D=this._mpegAudioL2BitRateTable[R]);break;case 3:R<this._mpegAudioL1BitRateTable.length&&(D=this._mpegAudioL1BitRateTable[R]);break}m={bitRate:D,samplingRate:O,channelCount:b,codec:I,originalCodec:I}}else m=d;return m},s.prototype._parseVideoData=function(r,a,o,t,d){if(o<=1){L.default.w(this.TAG,"Flv: Invalid video packet, missing VideoData payload!");return}if(!(this._hasVideoFlagOverrided===!0&&this._hasVideo===!1)){var m=new Uint8Array(r,a,o)[0],g=(m&240)>>>4,x=m&15;if(x!==7){this._onError(u.default.CODEC_UNSUPPORTED,"Flv: Unsupported codec in video frame: "+x);return}this._parseAVCVideoPacket(r,a+1,o-1,t,d,g)}},s.prototype._parseAVCVideoPacket=function(r,a,o,t,d,m){if(o<4){L.default.w(this.TAG,"Flv: Invalid AVC packet, missing AVCPacketType or/and CompositionTime");return}var g=this._littleEndian,x=new DataView(r,a,o),R=x.getUint8(0),S=x.getUint32(0,!g)&16777215,E=S<<8>>8;if(R===0)this._parseAVCDecoderConfigurationRecord(r,a+4,o-4);else if(R===1)this._parseAVCVideoData(r,a+4,o-4,t,d,m,E);else if(R!==2){this._onError(u.default.FORMAT_ERROR,"Flv: Invalid video packet type "+R);return}},s.prototype._parseAVCDecoderConfigurationRecord=function(r,a,o){if(o<7){L.default.w(this.TAG,"Flv: Invalid AVCDecoderConfigurationRecord, lack of data!");return}var t=this._videoMetadata,d=this._videoTrack,m=this._littleEndian,g=new DataView(r,a,o);t?typeof t.avcc<"u"&&L.default.w(this.TAG,"Found another AVCDecoderConfigurationRecord!"):(this._hasVideo===!1&&this._hasVideoFlagOverrided===!1&&(this._hasVideo=!0,this._mediaInfo.hasVideo=!0),t=this._videoMetadata={},t.type="video",t.id=d.id,t.timescale=this._timescale,t.duration=this._duration);var x=g.getUint8(0),R=g.getUint8(1);if(g.getUint8(2),g.getUint8(3),x!==1||R===0){this._onError(u.default.FORMAT_ERROR,"Flv: Invalid AVCDecoderConfigurationRecord");return}if(this._naluLengthSize=(g.getUint8(4)&3)+1,this._naluLengthSize!==3&&this._naluLengthSize!==4){this._onError(u.default.FORMAT_ERROR,"Flv: Strange NaluLengthSizeMinusOne: "+(this._naluLengthSize-1));return}var S=g.getUint8(5)&31;if(S===0){this._onError(u.default.FORMAT_ERROR,"Flv: Invalid AVCDecoderConfigurationRecord: No SPS");return}else S>1&&L.default.w(this.TAG,"Flv: Strange AVCDecoderConfigurationRecord: SPS Count = "+S);for(var E=6,b=0;b<S;b++){var O=g.getUint16(E,!m);if(E+=2,O!==0){var D=new Uint8Array(r,a+E,O);E+=O;var I=h.default.parseSPS(D);if(b===0){t.codecWidth=I.codec_size.width,t.codecHeight=I.codec_size.height,t.presentWidth=I.present_size.width,t.presentHeight=I.present_size.height,t.profile=I.profile_string,t.level=I.level_string,t.bitDepth=I.bit_depth,t.chromaFormat=I.chroma_format,t.sarRatio=I.sar_ratio,t.frameRate=I.frame_rate,(I.frame_rate.fixed===!1||I.frame_rate.fps_num===0||I.frame_rate.fps_den===0)&&(t.frameRate=this._referenceFrameRate);var k=t.frameRate.fps_den,K=t.frameRate.fps_num;t.refSampleDuration=t.timescale*(k/K);for(var W=D.subarray(1,4),N="avc1.",H=0;H<3;H++){var J=W[H].toString(16);J.length<2&&(J="0"+J),N+=J}t.codec=N;var j=this._mediaInfo;j.width=t.codecWidth,j.height=t.codecHeight,j.fps=t.frameRate.fps,j.profile=t.profile,j.level=t.level,j.refFrames=I.ref_frames,j.chromaFormat=I.chroma_format_string,j.sarNum=t.sarRatio.width,j.sarDen=t.sarRatio.height,j.videoCodec=N,j.hasAudio?j.audioCodec!=null&&(j.mimeType='video/x-flv; codecs="'+j.videoCodec+","+j.audioCodec+'"'):j.mimeType='video/x-flv; codecs="'+j.videoCodec+'"',j.isComplete()&&this._onMediaInfo(j)}}}var Y=g.getUint8(E);if(Y===0){this._onError(u.default.FORMAT_ERROR,"Flv: Invalid AVCDecoderConfigurationRecord: No PPS");return}else Y>1&&L.default.w(this.TAG,"Flv: Strange AVCDecoderConfigurationRecord: PPS Count = "+Y);E++;for(var b=0;b<Y;b++){var O=g.getUint16(E,!m);E+=2,O!==0&&(E+=O)}t.avcc=new Uint8Array(o),t.avcc.set(new Uint8Array(r,a,o),0),L.default.v(this.TAG,"Parsed AVCDecoderConfigurationRecord"),this._isInitialMetadataDispatched()?this._dispatch&&(this._audioTrack.length||this._videoTrack.length)&&this._onDataAvailable(this._audioTrack,this._videoTrack):this._videoInitialMetadataDispatched=!0,this._dispatch=!1,this._onTrackMetadata("video",t)},s.prototype._parseAVCVideoData=function(r,a,o,t,d,m,g){for(var x=this._littleEndian,R=new DataView(r,a,o),S=[],E=0,b=0,O=this._naluLengthSize,D=this._timestampBase+t,I=m===1;b<o;){if(b+4>=o){L.default.w(this.TAG,"Malformed Nalu near timestamp "+D+", offset = "+b+", dataSize = "+o);break}var k=R.getUint32(b,!x);if(O===3&&(k>>>=8),k>o-O){L.default.w(this.TAG,"Malformed Nalus near timestamp "+D+", NaluSize > DataSize!");return}var K=R.getUint8(b+O)&31;K===5&&(I=!0);var W=new Uint8Array(r,a+b,O+k),N={type:K,data:W};S.push(N),E+=W.byteLength,b+=O+k}if(S.length){var H=this._videoTrack,J={units:S,length:E,isKeyframe:I,dts:D,cts:g,pts:D+g};I&&(J.fileposition=d),H.samples.push(J),H.length+=E}},s}();A.default=f},"./src/demux/sps-parser.js":function(T,A,y){y.r(A);var L=y("./src/demux/exp-golomb.js"),_=function(){function h(){}return h._ebsp2rbsp=function(u){for(var c=u,n=c.byteLength,l=new Uint8Array(n),f=0,s=0;s<n;s++)s>=2&&c[s]===3&&c[s-1]===0&&c[s-2]===0||(l[f]=c[s],f++);return new Uint8Array(l.buffer,0,f)},h.parseSPS=function(u){var c=h._ebsp2rbsp(u),n=new L.default(c);n.readByte();var l=n.readByte();n.readByte();var f=n.readByte();n.readUEG();var s=h.getProfileString(l),r=h.getLevelString(f),a=1,o=420,t=[0,420,422,444],d=8;if((l===100||l===110||l===122||l===244||l===44||l===83||l===86||l===118||l===128||l===138||l===144)&&(a=n.readUEG(),a===3&&n.readBits(1),a<=3&&(o=t[a]),d=n.readUEG()+8,n.readUEG(),n.readBits(1),n.readBool()))for(var m=a!==3?8:12,g=0;g<m;g++)n.readBool()&&(g<6?h._skipScalingList(n,16):h._skipScalingList(n,64));n.readUEG();var x=n.readUEG();if(x===0)n.readUEG();else if(x===1){n.readBits(1),n.readSEG(),n.readSEG();for(var R=n.readUEG(),g=0;g<R;g++)n.readSEG()}var S=n.readUEG();n.readBits(1);var E=n.readUEG(),b=n.readUEG(),O=n.readBits(1);O===0&&n.readBits(1),n.readBits(1);var D=0,I=0,k=0,K=0,W=n.readBool();W&&(D=n.readUEG(),I=n.readUEG(),k=n.readUEG(),K=n.readUEG());var N=1,H=1,J=0,j=!0,Y=0,le=0,X=n.readBool();if(X){if(n.readBool()){var Q=n.readByte(),ne=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2],ee=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1];Q>0&&Q<16?(N=ne[Q-1],H=ee[Q-1]):Q===255&&(N=n.readByte()<<8|n.readByte(),H=n.readByte()<<8|n.readByte())}if(n.readBool()&&n.readBool(),n.readBool()&&(n.readBits(4),n.readBool()&&n.readBits(24)),n.readBool()&&(n.readUEG(),n.readUEG()),n.readBool()){var re=n.readBits(32),_e=n.readBits(32);j=n.readBool(),Y=_e,le=re*2,J=Y/le}}var $=1;(N!==1||H!==1)&&($=N/H);var U=0,ie=0;if(a===0)U=1,ie=2-O;else{var fe=a===3?1:2,ge=a===1?2:1;U=fe,ie=ge*(2-O)}var pe=(E+1)*16,ve=(2-O)*((b+1)*16);pe-=(D+I)*U,ve-=(k+K)*ie;var ye=Math.ceil(pe*$);return n.destroy(),n=null,{profile_string:s,level_string:r,bit_depth:d,ref_frames:S,chroma_format:o,chroma_format_string:h.getChromaFormatString(o),frame_rate:{fixed:j,fps:J,fps_den:le,fps_num:Y},sar_ratio:{width:N,height:H},codec_size:{width:pe,height:ve},present_size:{width:ye,height:ve}}},h._skipScalingList=function(u,c){for(var n=8,l=8,f=0,s=0;s<c;s++)l!==0&&(f=u.readSEG(),l=(n+f+256)%256),n=l===0?n:l},h.getProfileString=function(u){switch(u){case 66:return"Baseline";case 77:return"Main";case 88:return"Extended";case 100:return"High";case 110:return"High10";case 122:return"High422";case 244:return"High444";default:return"Unknown"}},h.getLevelString=function(u){return(u/10).toFixed(1)},h.getChromaFormatString=function(u){switch(u){case 420:return"4:2:0";case 422:return"4:2:2";case 444:return"4:4:4";default:return"Unknown"}},h}();A.default=_},"./src/flv.js":function(T,A,y){y.r(A);var L=y("./src/utils/polyfill.js"),_=y("./src/core/features.js"),h=y("./src/io/loader.js"),u=y("./src/player/flv-player.js"),c=y("./src/player/native-player.js"),n=y("./src/player/player-events.js"),l=y("./src/player/player-errors.js"),f=y("./src/utils/logging-control.js"),s=y("./src/utils/exception.js");L.default.install();function r(d,m){var g=d;if(g==null||typeof g!="object")throw new s.InvalidArgumentException("MediaDataSource must be an javascript object!");if(!g.hasOwnProperty("type"))throw new s.InvalidArgumentException("MediaDataSource must has type field to indicate video file type!");switch(g.type){case"flv":return new u.default(g,m);default:return new c.default(g,m)}}function a(){return _.default.supportMSEH264Playback()}function o(){return _.default.getFeatureList()}var t={};t.createPlayer=r,t.isSupported=a,t.getFeatureList=o,t.BaseLoader=h.BaseLoader,t.LoaderStatus=h.LoaderStatus,t.LoaderErrors=h.LoaderErrors,t.Events=n.default,t.ErrorTypes=l.ErrorTypes,t.ErrorDetails=l.ErrorDetails,t.FlvPlayer=u.default,t.NativePlayer=c.default,t.LoggingControl=f.default,Object.defineProperty(t,"version",{enumerable:!0,get:function(){return"1.6.2"}}),A.default=t},"./src/index.js":function(T,A,y){T.exports=y("./src/flv.js").default},"./src/io/fetch-stream-loader.js":function(T,A,y){y.r(A);var L=y("./src/utils/browser.js"),_=y("./src/io/loader.js"),h=y("./src/utils/exception.js"),u=function(){var n=function(l,f){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,r){s.__proto__=r}||function(s,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(s[a]=r[a])},n(l,f)};return function(l,f){if(typeof f!="function"&&f!==null)throw new TypeError("Class extends value "+String(f)+" is not a constructor or null");n(l,f);function s(){this.constructor=l}l.prototype=f===null?Object.create(f):(s.prototype=f.prototype,new s)}}(),c=function(n){u(l,n);function l(f,s){var r=n.call(this,"fetch-stream-loader")||this;return r.TAG="FetchStreamLoader",r._seekHandler=f,r._config=s,r._needStash=!0,r._requestAbort=!1,r._contentLength=null,r._receivedLength=0,r}return l.isSupported=function(){try{var f=L.default.msedge&&L.default.version.minor>=15048,s=L.default.msedge?f:!0;return self.fetch&&self.ReadableStream&&s}catch{return!1}},l.prototype.destroy=function(){this.isWorking()&&this.abort(),n.prototype.destroy.call(this)},l.prototype.open=function(f,s){var r=this;this._dataSource=f,this._range=s;var a=f.url;this._config.reuseRedirectedURL&&f.redirectedURL!=null&&(a=f.redirectedURL);var o=this._seekHandler.getConfig(a,s),t=new self.Headers;if(typeof o.headers=="object"){var d=o.headers;for(var m in d)d.hasOwnProperty(m)&&t.append(m,d[m])}var g={method:"GET",headers:t,mode:"cors",cache:"default",referrerPolicy:"no-referrer-when-downgrade"};if(typeof this._config.headers=="object")for(var m in this._config.headers)t.append(m,this._config.headers[m]);f.cors===!1&&(g.mode="same-origin"),f.withCredentials&&(g.credentials="include"),f.referrerPolicy&&(g.referrerPolicy=f.referrerPolicy),self.AbortController&&(this._abortController=new self.AbortController,g.signal=this._abortController.signal),this._status=_.LoaderStatus.kConnecting,self.fetch(o.url,g).then(function(x){if(r._requestAbort){r._status=_.LoaderStatus.kIdle,x.body.cancel();return}if(x.ok&&x.status>=200&&x.status<=299){if(x.url!==o.url&&r._onURLRedirect){var R=r._seekHandler.removeURLParameters(x.url);r._onURLRedirect(R)}var S=x.headers.get("Content-Length");return S!=null&&(r._contentLength=parseInt(S),r._contentLength!==0&&r._onContentLengthKnown&&r._onContentLengthKnown(r._contentLength)),r._pump.call(r,x.body.getReader())}else if(r._status=_.LoaderStatus.kError,r._onError)r._onError(_.LoaderErrors.HTTP_STATUS_CODE_INVALID,{code:x.status,msg:x.statusText});else throw new h.RuntimeException("FetchStreamLoader: Http code invalid, "+x.status+" "+x.statusText)}).catch(function(x){if(!(r._abortController&&r._abortController.signal.aborted))if(r._status=_.LoaderStatus.kError,r._onError)r._onError(_.LoaderErrors.EXCEPTION,{code:-1,msg:x.message});else throw x})},l.prototype.abort=function(){if(this._requestAbort=!0,(this._status!==_.LoaderStatus.kBuffering||!L.default.chrome)&&this._abortController)try{this._abortController.abort()}catch{}},l.prototype._pump=function(f){var s=this;return f.read().then(function(r){if(r.done)if(s._contentLength!==null&&s._receivedLength<s._contentLength){s._status=_.LoaderStatus.kError;var a=_.LoaderErrors.EARLY_EOF,o={code:-1,msg:"Fetch stream meet Early-EOF"};if(s._onError)s._onError(a,o);else throw new h.RuntimeException(o.msg)}else s._status=_.LoaderStatus.kComplete,s._onComplete&&s._onComplete(s._range.from,s._range.from+s._receivedLength-1);else{if(s._abortController&&s._abortController.signal.aborted){s._status=_.LoaderStatus.kComplete;return}else if(s._requestAbort===!0)return s._status=_.LoaderStatus.kComplete,f.cancel();s._status=_.LoaderStatus.kBuffering;var t=r.value.buffer,d=s._range.from+s._receivedLength;s._receivedLength+=t.byteLength,s._onDataArrival&&s._onDataArrival(t,d,s._receivedLength),s._pump(f)}}).catch(function(r){if(s._abortController&&s._abortController.signal.aborted){s._status=_.LoaderStatus.kComplete;return}if(!(r.code===11&&L.default.msedge)){s._status=_.LoaderStatus.kError;var a=0,o=null;if((r.code===19||r.message==="network error")&&(s._contentLength===null||s._contentLength!==null&&s._receivedLength<s._contentLength)?(a=_.LoaderErrors.EARLY_EOF,o={code:r.code,msg:"Fetch stream meet Early-EOF"}):(a=_.LoaderErrors.EXCEPTION,o={code:r.code,msg:r.message}),s._onError)s._onError(a,o);else throw new h.RuntimeException(o.msg)}})},l}(_.BaseLoader);A.default=c},"./src/io/io-controller.js":function(T,A,y){y.r(A);var L=y("./src/utils/logger.js"),_=y("./src/io/speed-sampler.js"),h=y("./src/io/loader.js"),u=y("./src/io/fetch-stream-loader.js"),c=y("./src/io/xhr-moz-chunked-loader.js"),n=y("./src/io/xhr-range-loader.js"),l=y("./src/io/websocket-loader.js"),f=y("./src/io/range-seek-handler.js"),s=y("./src/io/param-seek-handler.js"),r=y("./src/utils/exception.js"),a=function(){function o(t,d,m){this.TAG="IOController",this._config=d,this._extraData=m,this._stashInitialSize=1024*384,d.stashInitialSize!=null&&d.stashInitialSize>0&&(this._stashInitialSize=d.stashInitialSize),this._stashUsed=0,this._stashSize=this._stashInitialSize,this._bufferSize=1024*1024*3,this._stashBuffer=new ArrayBuffer(this._bufferSize),this._stashByteStart=0,this._enableStash=!0,d.enableStashBuffer===!1&&(this._enableStash=!1),this._loader=null,this._loaderClass=null,this._seekHandler=null,this._dataSource=t,this._isWebSocketURL=/wss?:\/\/(.+?)/.test(t.url),this._refTotalLength=t.filesize?t.filesize:null,this._totalLength=this._refTotalLength,this._fullRequestFlag=!1,this._currentRange=null,this._redirectedURL=null,this._speedNormalized=0,this._speedSampler=new _.default,this._speedNormalizeList=[64,128,256,384,512,768,1024,1536,2048,3072,4096],this._isEarlyEofReconnecting=!1,this._paused=!1,this._resumeFrom=0,this._onDataArrival=null,this._onSeeked=null,this._onError=null,this._onComplete=null,this._onRedirect=null,this._onRecoveredEarlyEof=null,this._selectSeekHandler(),this._selectLoader(),this._createLoader()}return o.prototype.destroy=function(){this._loader.isWorking()&&this._loader.abort(),this._loader.destroy(),this._loader=null,this._loaderClass=null,this._dataSource=null,this._stashBuffer=null,this._stashUsed=this._stashSize=this._bufferSize=this._stashByteStart=0,this._currentRange=null,this._speedSampler=null,this._isEarlyEofReconnecting=!1,this._onDataArrival=null,this._onSeeked=null,this._onError=null,this._onComplete=null,this._onRedirect=null,this._onRecoveredEarlyEof=null,this._extraData=null},o.prototype.isWorking=function(){return this._loader&&this._loader.isWorking()&&!this._paused},o.prototype.isPaused=function(){return this._paused},Object.defineProperty(o.prototype,"status",{get:function(){return this._loader.status},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"extraData",{get:function(){return this._extraData},set:function(t){this._extraData=t},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"onDataArrival",{get:function(){return this._onDataArrival},set:function(t){this._onDataArrival=t},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"onSeeked",{get:function(){return this._onSeeked},set:function(t){this._onSeeked=t},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"onError",{get:function(){return this._onError},set:function(t){this._onError=t},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"onComplete",{get:function(){return this._onComplete},set:function(t){this._onComplete=t},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"onRedirect",{get:function(){return this._onRedirect},set:function(t){this._onRedirect=t},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"onRecoveredEarlyEof",{get:function(){return this._onRecoveredEarlyEof},set:function(t){this._onRecoveredEarlyEof=t},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"currentURL",{get:function(){return this._dataSource.url},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"hasRedirect",{get:function(){return this._redirectedURL!=null||this._dataSource.redirectedURL!=null},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"currentRedirectedURL",{get:function(){return this._redirectedURL||this._dataSource.redirectedURL},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"currentSpeed",{get:function(){return this._loaderClass===n.default?this._loader.currentSpeed:this._speedSampler.lastSecondKBps},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"loaderType",{get:function(){return this._loader.type},enumerable:!1,configurable:!0}),o.prototype._selectSeekHandler=function(){var t=this._config;if(t.seekType==="range")this._seekHandler=new f.default(this._config.rangeLoadZeroStart);else if(t.seekType==="param"){var d=t.seekParamStart||"bstart",m=t.seekParamEnd||"bend";this._seekHandler=new s.default(d,m)}else if(t.seekType==="custom"){if(typeof t.customSeekHandler!="function")throw new r.InvalidArgumentException("Custom seekType specified in config but invalid customSeekHandler!");this._seekHandler=new t.customSeekHandler}else throw new r.InvalidArgumentException("Invalid seekType in config: "+t.seekType)},o.prototype._selectLoader=function(){if(this._config.customLoader!=null)this._loaderClass=this._config.customLoader;else if(this._isWebSocketURL)this._loaderClass=l.default;else if(u.default.isSupported())this._loaderClass=u.default;else if(c.default.isSupported())this._loaderClass=c.default;else if(n.default.isSupported())this._loaderClass=n.default;else throw new r.RuntimeException("Your browser doesn't support xhr with arraybuffer responseType!")},o.prototype._createLoader=function(){this._loader=new this._loaderClass(this._seekHandler,this._config),this._loader.needStashBuffer===!1&&(this._enableStash=!1),this._loader.onContentLengthKnown=this._onContentLengthKnown.bind(this),this._loader.onURLRedirect=this._onURLRedirect.bind(this),this._loader.onDataArrival=this._onLoaderChunkArrival.bind(this),this._loader.onComplete=this._onLoaderComplete.bind(this),this._loader.onError=this._onLoaderError.bind(this)},o.prototype.open=function(t){this._currentRange={from:0,to:-1},t&&(this._currentRange.from=t),this._speedSampler.reset(),t||(this._fullRequestFlag=!0),this._loader.open(this._dataSource,Object.assign({},this._currentRange))},o.prototype.abort=function(){this._loader.abort(),this._paused&&(this._paused=!1,this._resumeFrom=0)},o.prototype.pause=function(){this.isWorking()&&(this._loader.abort(),this._stashUsed!==0?(this._resumeFrom=this._stashByteStart,this._currentRange.to=this._stashByteStart-1):this._resumeFrom=this._currentRange.to+1,this._stashUsed=0,this._stashByteStart=0,this._paused=!0)},o.prototype.resume=function(){if(this._paused){this._paused=!1;var t=this._resumeFrom;this._resumeFrom=0,this._internalSeek(t,!0)}},o.prototype.seek=function(t){this._paused=!1,this._stashUsed=0,this._stashByteStart=0,this._internalSeek(t,!0)},o.prototype._internalSeek=function(t,d){this._loader.isWorking()&&this._loader.abort(),this._flushStashBuffer(d),this._loader.destroy(),this._loader=null;var m={from:t,to:-1};this._currentRange={from:m.from,to:-1},this._speedSampler.reset(),this._stashSize=this._stashInitialSize,this._createLoader(),this._loader.open(this._dataSource,m),this._onSeeked&&this._onSeeked()},o.prototype.updateUrl=function(t){if(!t||typeof t!="string"||t.length===0)throw new r.InvalidArgumentException("Url must be a non-empty string!");this._dataSource.url=t},o.prototype._expandBuffer=function(t){for(var d=this._stashSize;d+1024*1024*1<t;)d*=2;if(d+=1024*1024*1,d!==this._bufferSize){var m=new ArrayBuffer(d);if(this._stashUsed>0){var g=new Uint8Array(this._stashBuffer,0,this._stashUsed),x=new Uint8Array(m,0,d);x.set(g,0)}this._stashBuffer=m,this._bufferSize=d}},o.prototype._normalizeSpeed=function(t){var d=this._speedNormalizeList,m=d.length-1,g=0,x=0,R=m;if(t<d[0])return d[0];for(;x<=R;){if(g=x+Math.floor((R-x)/2),g===m||t>=d[g]&&t<d[g+1])return d[g];d[g]<t?x=g+1:R=g-1}},o.prototype._adjustStashSize=function(t){var d=0;this._config.isLive||t<512?d=t:t>=512&&t<=1024?d=Math.floor(t*1.5):d=t*2,d>8192&&(d=8192);var m=d*1024+1024*1024*1;this._bufferSize<m&&this._expandBuffer(m),this._stashSize=d*1024},o.prototype._dispatchChunks=function(t,d){return this._currentRange.to=d+t.byteLength-1,this._onDataArrival(t,d)},o.prototype._onURLRedirect=function(t){this._redirectedURL=t,this._onRedirect&&this._onRedirect(t)},o.prototype._onContentLengthKnown=function(t){t&&this._fullRequestFlag&&(this._totalLength=t,this._fullRequestFlag=!1)},o.prototype._onLoaderChunkArrival=function(t,d,m){if(!this._onDataArrival)throw new r.IllegalStateException("IOController: No existing consumer (onDataArrival) callback!");if(!this._paused){this._isEarlyEofReconnecting&&(this._isEarlyEofReconnecting=!1,this._onRecoveredEarlyEof&&this._onRecoveredEarlyEof()),this._speedSampler.addBytes(t.byteLength);var g=this._speedSampler.lastSecondKBps;if(g!==0){var x=this._normalizeSpeed(g);this._speedNormalized!==x&&(this._speedNormalized=x,this._adjustStashSize(x))}if(this._enableStash)if(this._stashUsed===0&&this._stashByteStart===0&&(this._stashByteStart=d),this._stashUsed+t.byteLength<=this._stashSize){var E=new Uint8Array(this._stashBuffer,0,this._stashSize);E.set(new Uint8Array(t),this._stashUsed),this._stashUsed+=t.byteLength}else{var E=new Uint8Array(this._stashBuffer,0,this._bufferSize);if(this._stashUsed>0){var O=this._stashBuffer.slice(0,this._stashUsed),R=this._dispatchChunks(O,this._stashByteStart);if(R<O.byteLength){if(R>0){var b=new Uint8Array(O,R);E.set(b,0),this._stashUsed=b.byteLength,this._stashByteStart+=R}}else this._stashUsed=0,this._stashByteStart+=R;this._stashUsed+t.byteLength>this._bufferSize&&(this._expandBuffer(this._stashUsed+t.byteLength),E=new Uint8Array(this._stashBuffer,0,this._bufferSize)),E.set(new Uint8Array(t),this._stashUsed),this._stashUsed+=t.byteLength}else{var R=this._dispatchChunks(t,d);if(R<t.byteLength){var S=t.byteLength-R;S>this._bufferSize&&(this._expandBuffer(S),E=new Uint8Array(this._stashBuffer,0,this._bufferSize)),E.set(new Uint8Array(t,R),0),this._stashUsed+=S,this._stashByteStart=d+R}}}else if(this._stashUsed===0){var R=this._dispatchChunks(t,d);if(R<t.byteLength){var S=t.byteLength-R;S>this._bufferSize&&this._expandBuffer(S);var E=new Uint8Array(this._stashBuffer,0,this._bufferSize);E.set(new Uint8Array(t,R),0),this._stashUsed+=S,this._stashByteStart=d+R}}else{this._stashUsed+t.byteLength>this._bufferSize&&this._expandBuffer(this._stashUsed+t.byteLength);var E=new Uint8Array(this._stashBuffer,0,this._bufferSize);E.set(new Uint8Array(t),this._stashUsed),this._stashUsed+=t.byteLength;var R=this._dispatchChunks(this._stashBuffer.slice(0,this._stashUsed),this._stashByteStart);if(R<this._stashUsed&&R>0){var b=new Uint8Array(this._stashBuffer,R);E.set(b,0)}this._stashUsed-=R,this._stashByteStart+=R}}},o.prototype._flushStashBuffer=function(t){if(this._stashUsed>0){var d=this._stashBuffer.slice(0,this._stashUsed),m=this._dispatchChunks(d,this._stashByteStart),g=d.byteLength-m;if(m<d.byteLength)if(t)L.default.w(this.TAG,g+" bytes unconsumed data remain when flush buffer, dropped");else{if(m>0){var x=new Uint8Array(this._stashBuffer,0,this._bufferSize),R=new Uint8Array(d,m);x.set(R,0),this._stashUsed=R.byteLength,this._stashByteStart+=m}return 0}return this._stashUsed=0,this._stashByteStart=0,g}return 0},o.prototype._onLoaderComplete=function(t,d){this._flushStashBuffer(!0),this._onComplete&&this._onComplete(this._extraData)},o.prototype._onLoaderError=function(t,d){switch(L.default.e(this.TAG,"Loader error, code = "+d.code+", msg = "+d.msg),this._flushStashBuffer(!1),this._isEarlyEofReconnecting&&(this._isEarlyEofReconnecting=!1,t=h.LoaderErrors.UNRECOVERABLE_EARLY_EOF),t){case h.LoaderErrors.EARLY_EOF:{if(!this._config.isLive&&this._totalLength){var m=this._currentRange.to+1;m<this._totalLength&&(L.default.w(this.TAG,"Connection lost, trying reconnect..."),this._isEarlyEofReconnecting=!0,this._internalSeek(m,!1));return}t=h.LoaderErrors.UNRECOVERABLE_EARLY_EOF;break}case h.LoaderErrors.UNRECOVERABLE_EARLY_EOF:case h.LoaderErrors.CONNECTING_TIMEOUT:case h.LoaderErrors.HTTP_STATUS_CODE_INVALID:case h.LoaderErrors.EXCEPTION:break}if(this._onError)this._onError(t,d);else throw new r.RuntimeException("IOException: "+d.msg)},o}();A.default=a},"./src/io/loader.js":function(T,A,y){y.r(A),y.d(A,{LoaderStatus:function(){return _},LoaderErrors:function(){return h},BaseLoader:function(){return u}});var L=y("./src/utils/exception.js"),_={kIdle:0,kConnecting:1,kBuffering:2,kError:3,kComplete:4},h={OK:"OK",EXCEPTION:"Exception",HTTP_STATUS_CODE_INVALID:"HttpStatusCodeInvalid",CONNECTING_TIMEOUT:"ConnectingTimeout",EARLY_EOF:"EarlyEof",UNRECOVERABLE_EARLY_EOF:"UnrecoverableEarlyEof"},u=function(){function c(n){this._type=n||"undefined",this._status=_.kIdle,this._needStash=!1,this._onContentLengthKnown=null,this._onURLRedirect=null,this._onDataArrival=null,this._onError=null,this._onComplete=null}return c.prototype.destroy=function(){this._status=_.kIdle,this._onContentLengthKnown=null,this._onURLRedirect=null,this._onDataArrival=null,this._onError=null,this._onComplete=null},c.prototype.isWorking=function(){return this._status===_.kConnecting||this._status===_.kBuffering},Object.defineProperty(c.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"status",{get:function(){return this._status},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"needStashBuffer",{get:function(){return this._needStash},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"onContentLengthKnown",{get:function(){return this._onContentLengthKnown},set:function(n){this._onContentLengthKnown=n},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"onURLRedirect",{get:function(){return this._onURLRedirect},set:function(n){this._onURLRedirect=n},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"onDataArrival",{get:function(){return this._onDataArrival},set:function(n){this._onDataArrival=n},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"onError",{get:function(){return this._onError},set:function(n){this._onError=n},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"onComplete",{get:function(){return this._onComplete},set:function(n){this._onComplete=n},enumerable:!1,configurable:!0}),c.prototype.open=function(n,l){throw new L.NotImplementedException("Unimplemented abstract function!")},c.prototype.abort=function(){throw new L.NotImplementedException("Unimplemented abstract function!")},c}()},"./src/io/param-seek-handler.js":function(T,A,y){y.r(A);var L=function(){function _(h,u){this._startName=h,this._endName=u}return _.prototype.getConfig=function(h,u){var c=h;if(u.from!==0||u.to!==-1){var n=!0;c.indexOf("?")===-1&&(c+="?",n=!1),n&&(c+="&"),c+=this._startName+"="+u.from.toString(),u.to!==-1&&(c+="&"+this._endName+"="+u.to.toString())}return{url:c,headers:{}}},_.prototype.removeURLParameters=function(h){var u=h.split("?")[0],c=void 0,n=h.indexOf("?");n!==-1&&(c=h.substring(n+1));var l="";if(c!=null&&c.length>0)for(var f=c.split("&"),s=0;s<f.length;s++){var r=f[s].split("="),a=s>0;r[0]!==this._startName&&r[0]!==this._endName&&(a&&(l+="&"),l+=f[s])}return l.length===0?u:u+"?"+l},_}();A.default=L},"./src/io/range-seek-handler.js":function(T,A,y){y.r(A);var L=function(){function _(h){this._zeroStart=h||!1}return _.prototype.getConfig=function(h,u){var c={};if(u.from!==0||u.to!==-1){var n=void 0;u.to!==-1?n="bytes="+u.from.toString()+"-"+u.to.toString():n="bytes="+u.from.toString()+"-",c.Range=n}else this._zeroStart&&(c.Range="bytes=0-");return{url:h,headers:c}},_.prototype.removeURLParameters=function(h){return h},_}();A.default=L},"./src/io/speed-sampler.js":function(T,A,y){y.r(A);var L=function(){function _(){this._firstCheckpoint=0,this._lastCheckpoint=0,this._intervalBytes=0,this._totalBytes=0,this._lastSecondBytes=0,self.performance&&self.performance.now?this._now=self.performance.now.bind(self.performance):this._now=Date.now}return _.prototype.reset=function(){this._firstCheckpoint=this._lastCheckpoint=0,this._totalBytes=this._intervalBytes=0,this._lastSecondBytes=0},_.prototype.addBytes=function(h){this._firstCheckpoint===0?(this._firstCheckpoint=this._now(),this._lastCheckpoint=this._firstCheckpoint,this._intervalBytes+=h,this._totalBytes+=h):this._now()-this._lastCheckpoint<1e3?(this._intervalBytes+=h,this._totalBytes+=h):(this._lastSecondBytes=this._intervalBytes,this._intervalBytes=h,this._totalBytes+=h,this._lastCheckpoint=this._now())},Object.defineProperty(_.prototype,"currentKBps",{get:function(){this.addBytes(0);var h=(this._now()-this._lastCheckpoint)/1e3;return h==0&&(h=1),this._intervalBytes/h/1024},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"lastSecondKBps",{get:function(){return this.addBytes(0),this._lastSecondBytes!==0?this._lastSecondBytes/1024:this._now()-this._lastCheckpoint>=500?this.currentKBps:0},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"averageKBps",{get:function(){var h=(this._now()-this._firstCheckpoint)/1e3;return this._totalBytes/h/1024},enumerable:!1,configurable:!0}),_}();A.default=L},"./src/io/websocket-loader.js":function(T,A,y){y.r(A);var L=y("./src/io/loader.js"),_=y("./src/utils/exception.js"),h=function(){var c=function(n,l){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,s){f.__proto__=s}||function(f,s){for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(f[r]=s[r])},c(n,l)};return function(n,l){if(typeof l!="function"&&l!==null)throw new TypeError("Class extends value "+String(l)+" is not a constructor or null");c(n,l);function f(){this.constructor=n}n.prototype=l===null?Object.create(l):(f.prototype=l.prototype,new f)}}(),u=function(c){h(n,c);function n(){var l=c.call(this,"websocket-loader")||this;return l.TAG="WebSocketLoader",l._needStash=!0,l._ws=null,l._requestAbort=!1,l._receivedLength=0,l}return n.isSupported=function(){try{return typeof self.WebSocket<"u"}catch{return!1}},n.prototype.destroy=function(){this._ws&&this.abort(),c.prototype.destroy.call(this)},n.prototype.open=function(l){try{var f=this._ws=new self.WebSocket(l.url);f.binaryType="arraybuffer",f.onopen=this._onWebSocketOpen.bind(this),f.onclose=this._onWebSocketClose.bind(this),f.onmessage=this._onWebSocketMessage.bind(this),f.onerror=this._onWebSocketError.bind(this),this._status=L.LoaderStatus.kConnecting}catch(r){this._status=L.LoaderStatus.kError;var s={code:r.code,msg:r.message};if(this._onError)this._onError(L.LoaderErrors.EXCEPTION,s);else throw new _.RuntimeException(s.msg)}},n.prototype.abort=function(){var l=this._ws;l&&(l.readyState===0||l.readyState===1)&&(this._requestAbort=!0,l.close()),this._ws=null,this._status=L.LoaderStatus.kComplete},n.prototype._onWebSocketOpen=function(l){this._status=L.LoaderStatus.kBuffering},n.prototype._onWebSocketClose=function(l){if(this._requestAbort===!0){this._requestAbort=!1;return}this._status=L.LoaderStatus.kComplete,this._onComplete&&this._onComplete(0,this._receivedLength-1)},n.prototype._onWebSocketMessage=function(l){var f=this;if(l.data instanceof ArrayBuffer)this._dispatchArrayBuffer(l.data);else if(l.data instanceof Blob){var s=new FileReader;s.onload=function(){f._dispatchArrayBuffer(s.result)},s.readAsArrayBuffer(l.data)}else{this._status=L.LoaderStatus.kError;var r={code:-1,msg:"Unsupported WebSocket message type: "+l.data.constructor.name};if(this._onError)this._onError(L.LoaderErrors.EXCEPTION,r);else throw new _.RuntimeException(r.msg)}},n.prototype._dispatchArrayBuffer=function(l){var f=l,s=this._receivedLength;this._receivedLength+=f.byteLength,this._onDataArrival&&this._onDataArrival(f,s,this._receivedLength)},n.prototype._onWebSocketError=function(l){this._status=L.LoaderStatus.kError;var f={code:l.code,msg:l.message};if(this._onError)this._onError(L.LoaderErrors.EXCEPTION,f);else throw new _.RuntimeException(f.msg)},n}(L.BaseLoader);A.default=u},"./src/io/xhr-moz-chunked-loader.js":function(T,A,y){y.r(A);var L=y("./src/utils/logger.js"),_=y("./src/io/loader.js"),h=y("./src/utils/exception.js"),u=function(){var n=function(l,f){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,r){s.__proto__=r}||function(s,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(s[a]=r[a])},n(l,f)};return function(l,f){if(typeof f!="function"&&f!==null)throw new TypeError("Class extends value "+String(f)+" is not a constructor or null");n(l,f);function s(){this.constructor=l}l.prototype=f===null?Object.create(f):(s.prototype=f.prototype,new s)}}(),c=function(n){u(l,n);function l(f,s){var r=n.call(this,"xhr-moz-chunked-loader")||this;return r.TAG="MozChunkedLoader",r._seekHandler=f,r._config=s,r._needStash=!0,r._xhr=null,r._requestAbort=!1,r._contentLength=null,r._receivedLength=0,r}return l.isSupported=function(){try{var f=new XMLHttpRequest;return f.open("GET","https://example.com",!0),f.responseType="moz-chunked-arraybuffer",f.responseType==="moz-chunked-arraybuffer"}catch(s){return L.default.w("MozChunkedLoader",s.message),!1}},l.prototype.destroy=function(){this.isWorking()&&this.abort(),this._xhr&&(this._xhr.onreadystatechange=null,this._xhr.onprogress=null,this._xhr.onloadend=null,this._xhr.onerror=null,this._xhr=null),n.prototype.destroy.call(this)},l.prototype.open=function(f,s){this._dataSource=f,this._range=s;var r=f.url;this._config.reuseRedirectedURL&&f.redirectedURL!=null&&(r=f.redirectedURL);var a=this._seekHandler.getConfig(r,s);this._requestURL=a.url;var o=this._xhr=new XMLHttpRequest;if(o.open("GET",a.url,!0),o.responseType="moz-chunked-arraybuffer",o.onreadystatechange=this._onReadyStateChange.bind(this),o.onprogress=this._onProgress.bind(this),o.onloadend=this._onLoadEnd.bind(this),o.onerror=this._onXhrError.bind(this),f.withCredentials&&(o.withCredentials=!0),typeof a.headers=="object"){var t=a.headers;for(var d in t)t.hasOwnProperty(d)&&o.setRequestHeader(d,t[d])}if(typeof this._config.headers=="object"){var t=this._config.headers;for(var d in t)t.hasOwnProperty(d)&&o.setRequestHeader(d,t[d])}this._status=_.LoaderStatus.kConnecting,o.send()},l.prototype.abort=function(){this._requestAbort=!0,this._xhr&&this._xhr.abort(),this._status=_.LoaderStatus.kComplete},l.prototype._onReadyStateChange=function(f){var s=f.target;if(s.readyState===2){if(s.responseURL!=null&&s.responseURL!==this._requestURL&&this._onURLRedirect){var r=this._seekHandler.removeURLParameters(s.responseURL);this._onURLRedirect(r)}if(s.status!==0&&(s.status<200||s.status>299))if(this._status=_.LoaderStatus.kError,this._onError)this._onError(_.LoaderErrors.HTTP_STATUS_CODE_INVALID,{code:s.status,msg:s.statusText});else throw new h.RuntimeException("MozChunkedLoader: Http code invalid, "+s.status+" "+s.statusText);else this._status=_.LoaderStatus.kBuffering}},l.prototype._onProgress=function(f){if(this._status!==_.LoaderStatus.kError){this._contentLength===null&&f.total!==null&&f.total!==0&&(this._contentLength=f.total,this._onContentLengthKnown&&this._onContentLengthKnown(this._contentLength));var s=f.target.response,r=this._range.from+this._receivedLength;this._receivedLength+=s.byteLength,this._onDataArrival&&this._onDataArrival(s,r,this._receivedLength)}},l.prototype._onLoadEnd=function(f){if(this._requestAbort===!0){this._requestAbort=!1;return}else if(this._status===_.LoaderStatus.kError)return;this._status=_.LoaderStatus.kComplete,this._onComplete&&this._onComplete(this._range.from,this._range.from+this._receivedLength-1)},l.prototype._onXhrError=function(f){this._status=_.LoaderStatus.kError;var s=0,r=null;if(this._contentLength&&f.loaded<this._contentLength?(s=_.LoaderErrors.EARLY_EOF,r={code:-1,msg:"Moz-Chunked stream meet Early-Eof"}):(s=_.LoaderErrors.EXCEPTION,r={code:-1,msg:f.constructor.name+" "+f.type}),this._onError)this._onError(s,r);else throw new h.RuntimeException(r.msg)},l}(_.BaseLoader);A.default=c},"./src/io/xhr-range-loader.js":function(T,A,y){y.r(A);var L=y("./src/utils/logger.js"),_=y("./src/io/speed-sampler.js"),h=y("./src/io/loader.js"),u=y("./src/utils/exception.js"),c=function(){var l=function(f,s){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(r[o]=a[o])},l(f,s)};return function(f,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");l(f,s);function r(){this.constructor=f}f.prototype=s===null?Object.create(s):(r.prototype=s.prototype,new r)}}(),n=function(l){c(f,l);function f(s,r){var a=l.call(this,"xhr-range-loader")||this;return a.TAG="RangeLoader",a._seekHandler=s,a._config=r,a._needStash=!1,a._chunkSizeKBList=[128,256,384,512,768,1024,1536,2048,3072,4096,5120,6144,7168,8192],a._currentChunkSizeKB=384,a._currentSpeedNormalized=0,a._zeroSpeedChunkCount=0,a._xhr=null,a._speedSampler=new _.default,a._requestAbort=!1,a._waitForTotalLength=!1,a._totalLengthReceived=!1,a._currentRequestURL=null,a._currentRedirectedURL=null,a._currentRequestRange=null,a._totalLength=null,a._contentLength=null,a._receivedLength=0,a._lastTimeLoaded=0,a}return f.isSupported=function(){try{var s=new XMLHttpRequest;return s.open("GET","https://example.com",!0),s.responseType="arraybuffer",s.responseType==="arraybuffer"}catch(r){return L.default.w("RangeLoader",r.message),!1}},f.prototype.destroy=function(){this.isWorking()&&this.abort(),this._xhr&&(this._xhr.onreadystatechange=null,this._xhr.onprogress=null,this._xhr.onload=null,this._xhr.onerror=null,this._xhr=null),l.prototype.destroy.call(this)},Object.defineProperty(f.prototype,"currentSpeed",{get:function(){return this._speedSampler.lastSecondKBps},enumerable:!1,configurable:!0}),f.prototype.open=function(s,r){this._dataSource=s,this._range=r,this._status=h.LoaderStatus.kConnecting;var a=!1;this._dataSource.filesize!=null&&this._dataSource.filesize!==0&&(a=!0,this._totalLength=this._dataSource.filesize),!this._totalLengthReceived&&!a?(this._waitForTotalLength=!0,this._internalOpen(this._dataSource,{from:0,to:-1})):this._openSubRange()},f.prototype._openSubRange=function(){var s=this._currentChunkSizeKB*1024,r=this._range.from+this._receivedLength,a=r+s;this._contentLength!=null&&a-this._range.from>=this._contentLength&&(a=this._range.from+this._contentLength-1),this._currentRequestRange={from:r,to:a},this._internalOpen(this._dataSource,this._currentRequestRange)},f.prototype._internalOpen=function(s,r){this._lastTimeLoaded=0;var a=s.url;this._config.reuseRedirectedURL&&(this._currentRedirectedURL!=null?a=this._currentRedirectedURL:s.redirectedURL!=null&&(a=s.redirectedURL));var o=this._seekHandler.getConfig(a,r);this._currentRequestURL=o.url;var t=this._xhr=new XMLHttpRequest;if(t.open("GET",o.url,!0),t.responseType="arraybuffer",t.onreadystatechange=this._onReadyStateChange.bind(this),t.onprogress=this._onProgress.bind(this),t.onload=this._onLoad.bind(this),t.onerror=this._onXhrError.bind(this),s.withCredentials&&(t.withCredentials=!0),typeof o.headers=="object"){var d=o.headers;for(var m in d)d.hasOwnProperty(m)&&t.setRequestHeader(m,d[m])}if(typeof this._config.headers=="object"){var d=this._config.headers;for(var m in d)d.hasOwnProperty(m)&&t.setRequestHeader(m,d[m])}t.send()},f.prototype.abort=function(){this._requestAbort=!0,this._internalAbort(),this._status=h.LoaderStatus.kComplete},f.prototype._internalAbort=function(){this._xhr&&(this._xhr.onreadystatechange=null,this._xhr.onprogress=null,this._xhr.onload=null,this._xhr.onerror=null,this._xhr.abort(),this._xhr=null)},f.prototype._onReadyStateChange=function(s){var r=s.target;if(r.readyState===2){if(r.responseURL!=null){var a=this._seekHandler.removeURLParameters(r.responseURL);r.responseURL!==this._currentRequestURL&&a!==this._currentRedirectedURL&&(this._currentRedirectedURL=a,this._onURLRedirect&&this._onURLRedirect(a))}if(r.status>=200&&r.status<=299){if(this._waitForTotalLength)return;this._status=h.LoaderStatus.kBuffering}else if(this._status=h.LoaderStatus.kError,this._onError)this._onError(h.LoaderErrors.HTTP_STATUS_CODE_INVALID,{code:r.status,msg:r.statusText});else throw new u.RuntimeException("RangeLoader: Http code invalid, "+r.status+" "+r.statusText)}},f.prototype._onProgress=function(s){if(this._status!==h.LoaderStatus.kError){if(this._contentLength===null){var r=!1;if(this._waitForTotalLength){this._waitForTotalLength=!1,this._totalLengthReceived=!0,r=!0;var a=s.total;this._internalAbort(),a!=null&a!==0&&(this._totalLength=a)}if(this._range.to===-1?this._contentLength=this._totalLength-this._range.from:this._contentLength=this._range.to-this._range.from+1,r){this._openSubRange();return}this._onContentLengthKnown&&this._onContentLengthKnown(this._contentLength)}var o=s.loaded-this._lastTimeLoaded;this._lastTimeLoaded=s.loaded,this._speedSampler.addBytes(o)}},f.prototype._normalizeSpeed=function(s){var r=this._chunkSizeKBList,a=r.length-1,o=0,t=0,d=a;if(s<r[0])return r[0];for(;t<=d;){if(o=t+Math.floor((d-t)/2),o===a||s>=r[o]&&s<r[o+1])return r[o];r[o]<s?t=o+1:d=o-1}},f.prototype._onLoad=function(s){if(this._status!==h.LoaderStatus.kError){if(this._waitForTotalLength){this._waitForTotalLength=!1;return}this._lastTimeLoaded=0;var r=this._speedSampler.lastSecondKBps;if(r===0&&(this._zeroSpeedChunkCount++,this._zeroSpeedChunkCount>=3&&(r=this._speedSampler.currentKBps)),r!==0){var a=this._normalizeSpeed(r);this._currentSpeedNormalized!==a&&(this._currentSpeedNormalized=a,this._currentChunkSizeKB=a)}var o=s.target.response,t=this._range.from+this._receivedLength;this._receivedLength+=o.byteLength;var d=!1;this._contentLength!=null&&this._receivedLength<this._contentLength?this._openSubRange():d=!0,this._onDataArrival&&this._onDataArrival(o,t,this._receivedLength),d&&(this._status=h.LoaderStatus.kComplete,this._onComplete&&this._onComplete(this._range.from,this._range.from+this._receivedLength-1))}},f.prototype._onXhrError=function(s){this._status=h.LoaderStatus.kError;var r=0,a=null;if(this._contentLength&&this._receivedLength>0&&this._receivedLength<this._contentLength?(r=h.LoaderErrors.EARLY_EOF,a={code:-1,msg:"RangeLoader meet Early-Eof"}):(r=h.LoaderErrors.EXCEPTION,a={code:-1,msg:s.constructor.name+" "+s.type}),this._onError)this._onError(r,a);else throw new u.RuntimeException(a.msg)},f}(h.BaseLoader);A.default=n},"./src/player/flv-player.js":function(T,A,y){y.r(A);var L=y("./node_modules/events/events.js"),_=y.n(L),h=y("./src/utils/logger.js"),u=y("./src/utils/browser.js"),c=y("./src/player/player-events.js"),n=y("./src/core/transmuxer.js"),l=y("./src/core/transmuxing-events.js"),f=y("./src/core/mse-controller.js"),s=y("./src/core/mse-events.js"),r=y("./src/player/player-errors.js"),a=y("./src/config.js"),o=y("./src/utils/exception.js"),t=function(){function d(m,g){if(this.TAG="FlvPlayer",this._type="FlvPlayer",this._emitter=new(_()),this._config=(0,a.createDefaultConfig)(),typeof g=="object"&&Object.assign(this._config,g),m.type.toLowerCase()!=="flv")throw new o.InvalidArgumentException("FlvPlayer requires an flv MediaDataSource input!");m.isLive===!0&&(this._config.isLive=!0),this.e={onvLoadedMetadata:this._onvLoadedMetadata.bind(this),onvSeeking:this._onvSeeking.bind(this),onvCanPlay:this._onvCanPlay.bind(this),onvStalled:this._onvStalled.bind(this),onvProgress:this._onvProgress.bind(this)},self.performance&&self.performance.now?this._now=self.performance.now.bind(self.performance):this._now=Date.now,this._pendingSeekTime=null,this._requestSetTime=!1,this._seekpointRecord=null,this._progressChecker=null,this._mediaDataSource=m,this._mediaElement=null,this._msectl=null,this._transmuxer=null,this._mseSourceOpened=!1,this._hasPendingLoad=!1,this._receivedCanPlay=!1,this._mediaInfo=null,this._statisticsInfo=null;var x=u.default.chrome&&(u.default.version.major<50||u.default.version.major===50&&u.default.version.build<2661);this._alwaysSeekKeyframe=!!(x||u.default.msedge||u.default.msie),this._alwaysSeekKeyframe&&(this._config.accurateSeek=!1)}return d.prototype.destroy=function(){this._progressChecker!=null&&(window.clearInterval(this._progressChecker),this._progressChecker=null),this._transmuxer&&this.unload(),this._mediaElement&&this.detachMediaElement(),this.e=null,this._mediaDataSource=null,this._emitter.removeAllListeners(),this._emitter=null},d.prototype.on=function(m,g){var x=this;m===c.default.MEDIA_INFO?this._mediaInfo!=null&&Promise.resolve().then(function(){x._emitter.emit(c.default.MEDIA_INFO,x.mediaInfo)}):m===c.default.STATISTICS_INFO&&this._statisticsInfo!=null&&Promise.resolve().then(function(){x._emitter.emit(c.default.STATISTICS_INFO,x.statisticsInfo)}),this._emitter.addListener(m,g)},d.prototype.off=function(m,g){this._emitter.removeListener(m,g)},d.prototype.attachMediaElement=function(m){var g=this;if(this._mediaElement=m,m.addEventListener("loadedmetadata",this.e.onvLoadedMetadata),m.addEventListener("seeking",this.e.onvSeeking),m.addEventListener("canplay",this.e.onvCanPlay),m.addEventListener("stalled",this.e.onvStalled),m.addEventListener("progress",this.e.onvProgress),this._msectl=new f.default(this._config),this._msectl.on(s.default.UPDATE_END,this._onmseUpdateEnd.bind(this)),this._msectl.on(s.default.BUFFER_FULL,this._onmseBufferFull.bind(this)),this._msectl.on(s.default.SOURCE_OPEN,function(){g._mseSourceOpened=!0,g._hasPendingLoad&&(g._hasPendingLoad=!1,g.load())}),this._msectl.on(s.default.ERROR,function(x){g._emitter.emit(c.default.ERROR,r.ErrorTypes.MEDIA_ERROR,r.ErrorDetails.MEDIA_MSE_ERROR,x)}),this._msectl.attachMediaElement(m),this._pendingSeekTime!=null)try{m.currentTime=this._pendingSeekTime,this._pendingSeekTime=null}catch{}},d.prototype.detachMediaElement=function(){this._mediaElement&&(this._msectl.detachMediaElement(),this._mediaElement.removeEventListener("loadedmetadata",this.e.onvLoadedMetadata),this._mediaElement.removeEventListener("seeking",this.e.onvSeeking),this._mediaElement.removeEventListener("canplay",this.e.onvCanPlay),this._mediaElement.removeEventListener("stalled",this.e.onvStalled),this._mediaElement.removeEventListener("progress",this.e.onvProgress),this._mediaElement=null),this._msectl&&(this._msectl.destroy(),this._msectl=null)},d.prototype.load=function(){var m=this;if(!this._mediaElement)throw new o.IllegalStateException("HTMLMediaElement must be attached before load()!");if(this._transmuxer)throw new o.IllegalStateException("FlvPlayer.load() has been called, please call unload() first!");if(!this._hasPendingLoad){if(this._config.deferLoadAfterSourceOpen&&this._mseSourceOpened===!1){this._hasPendingLoad=!0;return}this._mediaElement.readyState>0&&(this._requestSetTime=!0,this._mediaElement.currentTime=0),this._transmuxer=new n.default(this._mediaDataSource,this._config),this._transmuxer.on(l.default.INIT_SEGMENT,function(g,x){m._msectl.appendInitSegment(x)}),this._transmuxer.on(l.default.MEDIA_SEGMENT,function(g,x){if(m._msectl.appendMediaSegment(x),m._config.lazyLoad&&!m._config.isLive){var R=m._mediaElement.currentTime;x.info.endDts>=(R+m._config.lazyLoadMaxDuration)*1e3&&m._progressChecker==null&&(h.default.v(m.TAG,"Maximum buffering duration exceeded, suspend transmuxing task"),m._suspendTransmuxer())}}),this._transmuxer.on(l.default.LOADING_COMPLETE,function(){m._msectl.endOfStream(),m._emitter.emit(c.default.LOADING_COMPLETE)}),this._transmuxer.on(l.default.RECOVERED_EARLY_EOF,function(){m._emitter.emit(c.default.RECOVERED_EARLY_EOF)}),this._transmuxer.on(l.default.IO_ERROR,function(g,x){m._emitter.emit(c.default.ERROR,r.ErrorTypes.NETWORK_ERROR,g,x)}),this._transmuxer.on(l.default.DEMUX_ERROR,function(g,x){m._emitter.emit(c.default.ERROR,r.ErrorTypes.MEDIA_ERROR,g,{code:-1,msg:x})}),this._transmuxer.on(l.default.MEDIA_INFO,function(g){m._mediaInfo=g,m._emitter.emit(c.default.MEDIA_INFO,Object.assign({},g))}),this._transmuxer.on(l.default.METADATA_ARRIVED,function(g){m._emitter.emit(c.default.METADATA_ARRIVED,g)}),this._transmuxer.on(l.default.SCRIPTDATA_ARRIVED,function(g){m._emitter.emit(c.default.SCRIPTDATA_ARRIVED,g)}),this._transmuxer.on(l.default.STATISTICS_INFO,function(g){m._statisticsInfo=m._fillStatisticsInfo(g),m._emitter.emit(c.default.STATISTICS_INFO,Object.assign({},m._statisticsInfo))}),this._transmuxer.on(l.default.RECOMMEND_SEEKPOINT,function(g){m._mediaElement&&!m._config.accurateSeek&&(m._requestSetTime=!0,m._mediaElement.currentTime=g/1e3)}),this._transmuxer.open()}},d.prototype.unload=function(){this._mediaElement&&this._mediaElement.pause(),this._msectl&&this._msectl.seek(0),this._transmuxer&&(this._transmuxer.close(),this._transmuxer.destroy(),this._transmuxer=null)},d.prototype.play=function(){return this._mediaElement.play()},d.prototype.pause=function(){this._mediaElement.pause()},Object.defineProperty(d.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"buffered",{get:function(){return this._mediaElement.buffered},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"duration",{get:function(){return this._mediaElement.duration},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"volume",{get:function(){return this._mediaElement.volume},set:function(m){this._mediaElement.volume=m},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"muted",{get:function(){return this._mediaElement.muted},set:function(m){this._mediaElement.muted=m},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"currentTime",{get:function(){return this._mediaElement?this._mediaElement.currentTime:0},set:function(m){this._mediaElement?this._internalSeek(m):this._pendingSeekTime=m},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"mediaInfo",{get:function(){return Object.assign({},this._mediaInfo)},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"statisticsInfo",{get:function(){return this._statisticsInfo==null&&(this._statisticsInfo={}),this._statisticsInfo=this._fillStatisticsInfo(this._statisticsInfo),Object.assign({},this._statisticsInfo)},enumerable:!1,configurable:!0}),d.prototype._fillStatisticsInfo=function(m){if(m.playerType=this._type,!(this._mediaElement instanceof HTMLVideoElement))return m;var g=!0,x=0,R=0;if(this._mediaElement.getVideoPlaybackQuality){var S=this._mediaElement.getVideoPlaybackQuality();x=S.totalVideoFrames,R=S.droppedVideoFrames}else this._mediaElement.webkitDecodedFrameCount!=null?(x=this._mediaElement.webkitDecodedFrameCount,R=this._mediaElement.webkitDroppedFrameCount):g=!1;return g&&(m.decodedFrames=x,m.droppedFrames=R),m},d.prototype._onmseUpdateEnd=function(){if(!(!this._config.lazyLoad||this._config.isLive)){for(var m=this._mediaElement.buffered,g=this._mediaElement.currentTime,x=0,R=0;R<m.length;R++){var S=m.start(R),E=m.end(R);if(S<=g&&g<E){x=E;break}}x>=g+this._config.lazyLoadMaxDuration&&this._progressChecker==null&&(h.default.v(this.TAG,"Maximum buffering duration exceeded, suspend transmuxing task"),this._suspendTransmuxer())}},d.prototype._onmseBufferFull=function(){h.default.v(this.TAG,"MSE SourceBuffer is full, suspend transmuxing task"),this._progressChecker==null&&this._suspendTransmuxer()},d.prototype._suspendTransmuxer=function(){this._transmuxer&&(this._transmuxer.pause(),this._progressChecker==null&&(this._progressChecker=window.setInterval(this._checkProgressAndResume.bind(this),1e3)))},d.prototype._checkProgressAndResume=function(){for(var m=this._mediaElement.currentTime,g=this._mediaElement.buffered,x=!1,R=0;R<g.length;R++){var S=g.start(R),E=g.end(R);if(m>=S&&m<E){m>=E-this._config.lazyLoadRecoverDuration&&(x=!0);break}}x&&(window.clearInterval(this._progressChecker),this._progressChecker=null,x&&(h.default.v(this.TAG,"Continue loading from paused position"),this._transmuxer.resume()))},d.prototype._isTimepointBuffered=function(m){for(var g=this._mediaElement.buffered,x=0;x<g.length;x++){var R=g.start(x),S=g.end(x);if(m>=R&&m<S)return!0}return!1},d.prototype._internalSeek=function(m){var g=this._isTimepointBuffered(m),x=!1,R=0;if(m<1&&this._mediaElement.buffered.length>0){var S=this._mediaElement.buffered.start(0);(S<1&&m<S||u.default.safari)&&(x=!0,R=u.default.safari?.1:S)}if(x)this._requestSetTime=!0,this._mediaElement.currentTime=R;else if(g){if(!this._alwaysSeekKeyframe)this._requestSetTime=!0,this._mediaElement.currentTime=m;else{var E=this._msectl.getNearestKeyframe(Math.floor(m*1e3));this._requestSetTime=!0,E!=null?this._mediaElement.currentTime=E.dts/1e3:this._mediaElement.currentTime=m}this._progressChecker!=null&&this._checkProgressAndResume()}else this._progressChecker!=null&&(window.clearInterval(this._progressChecker),this._progressChecker=null),this._msectl.seek(m),this._transmuxer.seek(Math.floor(m*1e3)),this._config.accurateSeek&&(this._requestSetTime=!0,this._mediaElement.currentTime=m)},d.prototype._checkAndApplyUnbufferedSeekpoint=function(){if(this._seekpointRecord)if(this._seekpointRecord.recordTime<=this._now()-100){var m=this._mediaElement.currentTime;this._seekpointRecord=null,this._isTimepointBuffered(m)||(this._progressChecker!=null&&(window.clearTimeout(this._progressChecker),this._progressChecker=null),this._msectl.seek(m),this._transmuxer.seek(Math.floor(m*1e3)),this._config.accurateSeek&&(this._requestSetTime=!0,this._mediaElement.currentTime=m))}else window.setTimeout(this._checkAndApplyUnbufferedSeekpoint.bind(this),50)},d.prototype._checkAndResumeStuckPlayback=function(m){var g=this._mediaElement;if(m||!this._receivedCanPlay||g.readyState<2){var x=g.buffered;x.length>0&&g.currentTime<x.start(0)&&(h.default.w(this.TAG,"Playback seems stuck at "+g.currentTime+", seek to "+x.start(0)),this._requestSetTime=!0,this._mediaElement.currentTime=x.start(0),this._mediaElement.removeEventListener("progress",this.e.onvProgress))}else this._mediaElement.removeEventListener("progress",this.e.onvProgress)},d.prototype._onvLoadedMetadata=function(m){this._pendingSeekTime!=null&&(this._mediaElement.currentTime=this._pendingSeekTime,this._pendingSeekTime=null)},d.prototype._onvSeeking=function(m){var g=this._mediaElement.currentTime,x=this._mediaElement.buffered;if(this._requestSetTime){this._requestSetTime=!1;return}if(g<1&&x.length>0){var R=x.start(0);if(R<1&&g<R||u.default.safari){this._requestSetTime=!0,this._mediaElement.currentTime=u.default.safari?.1:R;return}}if(this._isTimepointBuffered(g)){if(this._alwaysSeekKeyframe){var S=this._msectl.getNearestKeyframe(Math.floor(g*1e3));S!=null&&(this._requestSetTime=!0,this._mediaElement.currentTime=S.dts/1e3)}this._progressChecker!=null&&this._checkProgressAndResume();return}this._seekpointRecord={seekPoint:g,recordTime:this._now()},window.setTimeout(this._checkAndApplyUnbufferedSeekpoint.bind(this),50)},d.prototype._onvCanPlay=function(m){this._receivedCanPlay=!0,this._mediaElement.removeEventListener("canplay",this.e.onvCanPlay)},d.prototype._onvStalled=function(m){this._checkAndResumeStuckPlayback(!0)},d.prototype._onvProgress=function(m){this._checkAndResumeStuckPlayback()},d}();A.default=t},"./src/player/native-player.js":function(T,A,y){y.r(A);var L=y("./node_modules/events/events.js"),_=y.n(L),h=y("./src/player/player-events.js"),u=y("./src/config.js"),c=y("./src/utils/exception.js"),n=function(){function l(f,s){if(this.TAG="NativePlayer",this._type="NativePlayer",this._emitter=new(_()),this._config=(0,u.createDefaultConfig)(),typeof s=="object"&&Object.assign(this._config,s),f.type.toLowerCase()==="flv")throw new c.InvalidArgumentException("NativePlayer does't support flv MediaDataSource input!");if(f.hasOwnProperty("segments"))throw new c.InvalidArgumentException("NativePlayer("+f.type+") doesn't support multipart playback!");this.e={onvLoadedMetadata:this._onvLoadedMetadata.bind(this)},this._pendingSeekTime=null,this._statisticsReporter=null,this._mediaDataSource=f,this._mediaElement=null}return l.prototype.destroy=function(){this._mediaElement&&(this.unload(),this.detachMediaElement()),this.e=null,this._mediaDataSource=null,this._emitter.removeAllListeners(),this._emitter=null},l.prototype.on=function(f,s){var r=this;f===h.default.MEDIA_INFO?this._mediaElement!=null&&this._mediaElement.readyState!==0&&Promise.resolve().then(function(){r._emitter.emit(h.default.MEDIA_INFO,r.mediaInfo)}):f===h.default.STATISTICS_INFO&&this._mediaElement!=null&&this._mediaElement.readyState!==0&&Promise.resolve().then(function(){r._emitter.emit(h.default.STATISTICS_INFO,r.statisticsInfo)}),this._emitter.addListener(f,s)},l.prototype.off=function(f,s){this._emitter.removeListener(f,s)},l.prototype.attachMediaElement=function(f){if(this._mediaElement=f,f.addEventListener("loadedmetadata",this.e.onvLoadedMetadata),this._pendingSeekTime!=null)try{f.currentTime=this._pendingSeekTime,this._pendingSeekTime=null}catch{}},l.prototype.detachMediaElement=function(){this._mediaElement&&(this._mediaElement.src="",this._mediaElement.removeAttribute("src"),this._mediaElement.removeEventListener("loadedmetadata",this.e.onvLoadedMetadata),this._mediaElement=null),this._statisticsReporter!=null&&(window.clearInterval(this._statisticsReporter),this._statisticsReporter=null)},l.prototype.load=function(){if(!this._mediaElement)throw new c.IllegalStateException("HTMLMediaElement must be attached before load()!");this._mediaElement.src=this._mediaDataSource.url,this._mediaElement.readyState>0&&(this._mediaElement.currentTime=0),this._mediaElement.preload="auto",this._mediaElement.load(),this._statisticsReporter=window.setInterval(this._reportStatisticsInfo.bind(this),this._config.statisticsInfoReportInterval)},l.prototype.unload=function(){this._mediaElement&&(this._mediaElement.src="",this._mediaElement.removeAttribute("src")),this._statisticsReporter!=null&&(window.clearInterval(this._statisticsReporter),this._statisticsReporter=null)},l.prototype.play=function(){return this._mediaElement.play()},l.prototype.pause=function(){this._mediaElement.pause()},Object.defineProperty(l.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"buffered",{get:function(){return this._mediaElement.buffered},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"duration",{get:function(){return this._mediaElement.duration},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"volume",{get:function(){return this._mediaElement.volume},set:function(f){this._mediaElement.volume=f},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"muted",{get:function(){return this._mediaElement.muted},set:function(f){this._mediaElement.muted=f},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"currentTime",{get:function(){return this._mediaElement?this._mediaElement.currentTime:0},set:function(f){this._mediaElement?this._mediaElement.currentTime=f:this._pendingSeekTime=f},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"mediaInfo",{get:function(){var f=this._mediaElement instanceof HTMLAudioElement?"audio/":"video/",s={mimeType:f+this._mediaDataSource.type};return this._mediaElement&&(s.duration=Math.floor(this._mediaElement.duration*1e3),this._mediaElement instanceof HTMLVideoElement&&(s.width=this._mediaElement.videoWidth,s.height=this._mediaElement.videoHeight)),s},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"statisticsInfo",{get:function(){var f={playerType:this._type,url:this._mediaDataSource.url};if(!(this._mediaElement instanceof HTMLVideoElement))return f;var s=!0,r=0,a=0;if(this._mediaElement.getVideoPlaybackQuality){var o=this._mediaElement.getVideoPlaybackQuality();r=o.totalVideoFrames,a=o.droppedVideoFrames}else this._mediaElement.webkitDecodedFrameCount!=null?(r=this._mediaElement.webkitDecodedFrameCount,a=this._mediaElement.webkitDroppedFrameCount):s=!1;return s&&(f.decodedFrames=r,f.droppedFrames=a),f},enumerable:!1,configurable:!0}),l.prototype._onvLoadedMetadata=function(f){this._pendingSeekTime!=null&&(this._mediaElement.currentTime=this._pendingSeekTime,this._pendingSeekTime=null),this._emitter.emit(h.default.MEDIA_INFO,this.mediaInfo)},l.prototype._reportStatisticsInfo=function(){this._emitter.emit(h.default.STATISTICS_INFO,this.statisticsInfo)},l}();A.default=n},"./src/player/player-errors.js":function(T,A,y){y.r(A),y.d(A,{ErrorTypes:function(){return h},ErrorDetails:function(){return u}});var L=y("./src/io/loader.js"),_=y("./src/demux/demux-errors.js"),h={NETWORK_ERROR:"NetworkError",MEDIA_ERROR:"MediaError",OTHER_ERROR:"OtherError"},u={NETWORK_EXCEPTION:L.LoaderErrors.EXCEPTION,NETWORK_STATUS_CODE_INVALID:L.LoaderErrors.HTTP_STATUS_CODE_INVALID,NETWORK_TIMEOUT:L.LoaderErrors.CONNECTING_TIMEOUT,NETWORK_UNRECOVERABLE_EARLY_EOF:L.LoaderErrors.UNRECOVERABLE_EARLY_EOF,MEDIA_MSE_ERROR:"MediaMSEError",MEDIA_FORMAT_ERROR:_.default.FORMAT_ERROR,MEDIA_FORMAT_UNSUPPORTED:_.default.FORMAT_UNSUPPORTED,MEDIA_CODEC_UNSUPPORTED:_.default.CODEC_UNSUPPORTED}},"./src/player/player-events.js":function(T,A,y){y.r(A);var L={ERROR:"error",LOADING_COMPLETE:"loading_complete",RECOVERED_EARLY_EOF:"recovered_early_eof",MEDIA_INFO:"media_info",METADATA_ARRIVED:"metadata_arrived",SCRIPTDATA_ARRIVED:"scriptdata_arrived",STATISTICS_INFO:"statistics_info"};A.default=L},"./src/remux/aac-silent.js":function(T,A,y){y.r(A);var L=function(){function _(){}return _.getSilentFrame=function(h,u){if(h==="mp4a.40.2"){if(u===1)return new Uint8Array([0,200,0,128,35,128]);if(u===2)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(u===3)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(u===4)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(u===5)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(u===6)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224])}else{if(u===1)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(u===2)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(u===3)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null},_}();A.default=L},"./src/remux/mp4-generator.js":function(T,A,y){y.r(A);var L=function(){function _(){}return _.init=function(){_.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[],".mp3":[]};for(var h in _.types)_.types.hasOwnProperty(h)&&(_.types[h]=[h.charCodeAt(0),h.charCodeAt(1),h.charCodeAt(2),h.charCodeAt(3)]);var u=_.constants={};u.FTYP=new Uint8Array([105,115,111,109,0,0,0,1,105,115,111,109,97,118,99,49]),u.STSD_PREFIX=new Uint8Array([0,0,0,0,0,0,0,1]),u.STTS=new Uint8Array([0,0,0,0,0,0,0,0]),u.STSC=u.STCO=u.STTS,u.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),u.HDLR_VIDEO=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),u.HDLR_AUDIO=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),u.DREF=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),u.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),u.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])},_.box=function(h){for(var u=8,c=null,n=Array.prototype.slice.call(arguments,1),l=n.length,f=0;f<l;f++)u+=n[f].byteLength;c=new Uint8Array(u),c[0]=u>>>24&255,c[1]=u>>>16&255,c[2]=u>>>8&255,c[3]=u&255,c.set(h,4);for(var s=8,f=0;f<l;f++)c.set(n[f],s),s+=n[f].byteLength;return c},_.generateInitSegment=function(h){var u=_.box(_.types.ftyp,_.constants.FTYP),c=_.moov(h),n=new Uint8Array(u.byteLength+c.byteLength);return n.set(u,0),n.set(c,u.byteLength),n},_.moov=function(h){var u=_.mvhd(h.timescale,h.duration),c=_.trak(h),n=_.mvex(h);return _.box(_.types.moov,u,c,n)},_.mvhd=function(h,u){return _.box(_.types.mvhd,new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,h>>>24&255,h>>>16&255,h>>>8&255,h&255,u>>>24&255,u>>>16&255,u>>>8&255,u&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]))},_.trak=function(h){return _.box(_.types.trak,_.tkhd(h),_.mdia(h))},_.tkhd=function(h){var u=h.id,c=h.duration,n=h.presentWidth,l=h.presentHeight;return _.box(_.types.tkhd,new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,u>>>24&255,u>>>16&255,u>>>8&255,u&255,0,0,0,0,c>>>24&255,c>>>16&255,c>>>8&255,c&255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,n>>>8&255,n&255,0,0,l>>>8&255,l&255,0,0]))},_.mdia=function(h){return _.box(_.types.mdia,_.mdhd(h),_.hdlr(h),_.minf(h))},_.mdhd=function(h){var u=h.timescale,c=h.duration;return _.box(_.types.mdhd,new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,u>>>24&255,u>>>16&255,u>>>8&255,u&255,c>>>24&255,c>>>16&255,c>>>8&255,c&255,85,196,0,0]))},_.hdlr=function(h){var u=null;return h.type==="audio"?u=_.constants.HDLR_AUDIO:u=_.constants.HDLR_VIDEO,_.box(_.types.hdlr,u)},_.minf=function(h){var u=null;return h.type==="audio"?u=_.box(_.types.smhd,_.constants.SMHD):u=_.box(_.types.vmhd,_.constants.VMHD),_.box(_.types.minf,u,_.dinf(),_.stbl(h))},_.dinf=function(){var h=_.box(_.types.dinf,_.box(_.types.dref,_.constants.DREF));return h},_.stbl=function(h){var u=_.box(_.types.stbl,_.stsd(h),_.box(_.types.stts,_.constants.STTS),_.box(_.types.stsc,_.constants.STSC),_.box(_.types.stsz,_.constants.STSZ),_.box(_.types.stco,_.constants.STCO));return u},_.stsd=function(h){return h.type==="audio"?h.codec==="mp3"?_.box(_.types.stsd,_.constants.STSD_PREFIX,_.mp3(h)):_.box(_.types.stsd,_.constants.STSD_PREFIX,_.mp4a(h)):_.box(_.types.stsd,_.constants.STSD_PREFIX,_.avc1(h))},_.mp3=function(h){var u=h.channelCount,c=h.audioSampleRate,n=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,u,0,16,0,0,0,0,c>>>8&255,c&255,0,0]);return _.box(_.types[".mp3"],n)},_.mp4a=function(h){var u=h.channelCount,c=h.audioSampleRate,n=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,u,0,16,0,0,0,0,c>>>8&255,c&255,0,0]);return _.box(_.types.mp4a,n,_.esds(h))},_.esds=function(h){var u=h.config||[],c=u.length,n=new Uint8Array([0,0,0,0,3,23+c,0,1,0,4,15+c,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([c]).concat(u).concat([6,1,2]));return _.box(_.types.esds,n)},_.avc1=function(h){var u=h.avcc,c=h.codecWidth,n=h.codecHeight,l=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,c>>>8&255,c&255,n>>>8&255,n&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,10,120,113,113,47,102,108,118,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,255,255]);return _.box(_.types.avc1,l,_.box(_.types.avcC,u))},_.mvex=function(h){return _.box(_.types.mvex,_.trex(h))},_.trex=function(h){var u=h.id,c=new Uint8Array([0,0,0,0,u>>>24&255,u>>>16&255,u>>>8&255,u&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return _.box(_.types.trex,c)},_.moof=function(h,u){return _.box(_.types.moof,_.mfhd(h.sequenceNumber),_.traf(h,u))},_.mfhd=function(h){var u=new Uint8Array([0,0,0,0,h>>>24&255,h>>>16&255,h>>>8&255,h&255]);return _.box(_.types.mfhd,u)},_.traf=function(h,u){var c=h.id,n=_.box(_.types.tfhd,new Uint8Array([0,0,0,0,c>>>24&255,c>>>16&255,c>>>8&255,c&255])),l=_.box(_.types.tfdt,new Uint8Array([0,0,0,0,u>>>24&255,u>>>16&255,u>>>8&255,u&255])),f=_.sdtp(h),s=_.trun(h,f.byteLength+16+16+8+16+8+8);return _.box(_.types.traf,n,l,s,f)},_.sdtp=function(h){for(var u=h.samples||[],c=u.length,n=new Uint8Array(4+c),l=0;l<c;l++){var f=u[l].flags;n[l+4]=f.isLeading<<6|f.dependsOn<<4|f.isDependedOn<<2|f.hasRedundancy}return _.box(_.types.sdtp,n)},_.trun=function(h,u){var c=h.samples||[],n=c.length,l=12+16*n,f=new Uint8Array(l);u+=8+l,f.set([0,0,15,1,n>>>24&255,n>>>16&255,n>>>8&255,n&255,u>>>24&255,u>>>16&255,u>>>8&255,u&255],0);for(var s=0;s<n;s++){var r=c[s].duration,a=c[s].size,o=c[s].flags,t=c[s].cts;f.set([r>>>24&255,r>>>16&255,r>>>8&255,r&255,a>>>24&255,a>>>16&255,a>>>8&255,a&255,o.isLeading<<2|o.dependsOn,o.isDependedOn<<6|o.hasRedundancy<<4|o.isNonSync,0,0,t>>>24&255,t>>>16&255,t>>>8&255,t&255],12+16*s)}return _.box(_.types.trun,f)},_.mdat=function(h){return _.box(_.types.mdat,h)},_}();L.init(),A.default=L},"./src/remux/mp4-remuxer.js":function(T,A,y){y.r(A);var L=y("./src/utils/logger.js"),_=y("./src/remux/mp4-generator.js"),h=y("./src/remux/aac-silent.js"),u=y("./src/utils/browser.js"),c=y("./src/core/media-segment-info.js"),n=y("./src/utils/exception.js"),l=function(){function f(s){this.TAG="MP4Remuxer",this._config=s,this._isLive=s.isLive===!0,this._dtsBase=-1,this._dtsBaseInited=!1,this._audioDtsBase=1/0,this._videoDtsBase=1/0,this._audioNextDts=void 0,this._videoNextDts=void 0,this._audioStashedLastSample=null,this._videoStashedLastSample=null,this._audioMeta=null,this._videoMeta=null,this._audioSegmentInfoList=new c.MediaSegmentInfoList("audio"),this._videoSegmentInfoList=new c.MediaSegmentInfoList("video"),this._onInitSegment=null,this._onMediaSegment=null,this._forceFirstIDR=!!(u.default.chrome&&(u.default.version.major<50||u.default.version.major===50&&u.default.version.build<2661)),this._fillSilentAfterSeek=u.default.msedge||u.default.msie,this._mp3UseMpegAudio=!u.default.firefox,this._fillAudioTimestampGap=this._config.fixAudioTimestampGap}return f.prototype.destroy=function(){this._dtsBase=-1,this._dtsBaseInited=!1,this._audioMeta=null,this._videoMeta=null,this._audioSegmentInfoList.clear(),this._audioSegmentInfoList=null,this._videoSegmentInfoList.clear(),this._videoSegmentInfoList=null,this._onInitSegment=null,this._onMediaSegment=null},f.prototype.bindDataSource=function(s){return s.onDataAvailable=this.remux.bind(this),s.onTrackMetadata=this._onTrackMetadataReceived.bind(this),this},Object.defineProperty(f.prototype,"onInitSegment",{get:function(){return this._onInitSegment},set:function(s){this._onInitSegment=s},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"onMediaSegment",{get:function(){return this._onMediaSegment},set:function(s){this._onMediaSegment=s},enumerable:!1,configurable:!0}),f.prototype.insertDiscontinuity=function(){this._audioNextDts=this._videoNextDts=void 0},f.prototype.seek=function(s){this._audioStashedLastSample=null,this._videoStashedLastSample=null,this._videoSegmentInfoList.clear(),this._audioSegmentInfoList.clear()},f.prototype.remux=function(s,r){if(!this._onMediaSegment)throw new n.IllegalStateException("MP4Remuxer: onMediaSegment callback must be specificed!");this._dtsBaseInited||this._calculateDtsBase(s,r),this._remuxVideo(r),this._remuxAudio(s)},f.prototype._onTrackMetadataReceived=function(s,r){var a=null,o="mp4",t=r.codec;if(s==="audio")this._audioMeta=r,r.codec==="mp3"&&this._mp3UseMpegAudio?(o="mpeg",t="",a=new Uint8Array):a=_.default.generateInitSegment(r);else if(s==="video")this._videoMeta=r,a=_.default.generateInitSegment(r);else return;if(!this._onInitSegment)throw new n.IllegalStateException("MP4Remuxer: onInitSegment callback must be specified!");this._onInitSegment(s,{type:s,data:a.buffer,codec:t,container:s+"/"+o,mediaDuration:r.duration})},f.prototype._calculateDtsBase=function(s,r){this._dtsBaseInited||(s.samples&&s.samples.length&&(this._audioDtsBase=s.samples[0].dts),r.samples&&r.samples.length&&(this._videoDtsBase=r.samples[0].dts),this._dtsBase=Math.min(this._audioDtsBase,this._videoDtsBase),this._dtsBaseInited=!0)},f.prototype.flushStashedSamples=function(){var s=this._videoStashedLastSample,r=this._audioStashedLastSample,a={type:"video",id:1,sequenceNumber:0,samples:[],length:0};s!=null&&(a.samples.push(s),a.length=s.length);var o={type:"audio",id:2,sequenceNumber:0,samples:[],length:0};r!=null&&(o.samples.push(r),o.length=r.length),this._videoStashedLastSample=null,this._audioStashedLastSample=null,this._remuxVideo(a,!0),this._remuxAudio(o,!0)},f.prototype._remuxAudio=function(s,r){if(this._audioMeta!=null){var a=s,o=a.samples,t=void 0,d=-1,m=-1,g=this._audioMeta.refSampleDuration,x=this._audioMeta.codec==="mp3"&&this._mp3UseMpegAudio,R=this._dtsBaseInited&&this._audioNextDts===void 0,S=!1;if(!(!o||o.length===0)&&!(o.length===1&&!r)){var E=0,b=null,O=0;x?(E=0,O=a.length):(E=8,O=8+a.length);var D=null;if(o.length>1&&(D=o.pop(),O-=D.length),this._audioStashedLastSample!=null){var I=this._audioStashedLastSample;this._audioStashedLastSample=null,o.unshift(I),O+=I.length}D!=null&&(this._audioStashedLastSample=D);var k=o[0].dts-this._dtsBase;if(this._audioNextDts)t=k-this._audioNextDts;else if(this._audioSegmentInfoList.isEmpty())t=0,this._fillSilentAfterSeek&&!this._videoSegmentInfoList.isEmpty()&&this._audioMeta.originalCodec!=="mp3"&&(S=!0);else{var K=this._audioSegmentInfoList.getLastSampleBefore(k);if(K!=null){var W=k-(K.originalDts+K.duration);W<=3&&(W=0);var N=K.dts+K.duration+W;t=k-N}else t=0}if(S){var H=k-t,J=this._videoSegmentInfoList.getLastSegmentBefore(k);if(J!=null&&J.beginDts<H){var j=h.default.getSilentFrame(this._audioMeta.originalCodec,this._audioMeta.channelCount);if(j){var Y=J.beginDts,le=H-J.beginDts;L.default.v(this.TAG,"InsertPrefixSilentAudio: dts: "+Y+", duration: "+le),o.unshift({unit:j,dts:Y,pts:Y}),O+=j.byteLength}}else S=!1}for(var X=[],Q=0;Q<o.length;Q++){var I=o[Q],ne=I.unit,ee=I.dts-this._dtsBase,Y=ee,re=!1,_e=null,$=0;if(!(ee<-.001)){if(this._audioMeta.codec!=="mp3"){var U=ee,ie=3;if(this._audioNextDts&&(U=this._audioNextDts),t=ee-U,t<=-ie*g){L.default.w(this.TAG,"Dropping 1 audio frame (originalDts: "+ee+" ms ,curRefDts: "+U+" ms)  due to dtsCorrection: "+t+" ms overlap.");continue}else if(t>=ie*g&&this._fillAudioTimestampGap&&!u.default.safari){re=!0;var fe=Math.floor(t/g);L.default.w(this.TAG,`Large audio timestamp gap detected, may cause AV sync to drift. Silent frames will be generated to avoid unsync.
`+("originalDts: "+ee+" ms, curRefDts: "+U+" ms, ")+("dtsCorrection: "+Math.round(t)+" ms, generate: "+fe+" frames")),Y=Math.floor(U),$=Math.floor(U+g)-Y;var j=h.default.getSilentFrame(this._audioMeta.originalCodec,this._audioMeta.channelCount);j==null&&(L.default.w(this.TAG,"Unable to generate silent frame for "+(this._audioMeta.originalCodec+" with "+this._audioMeta.channelCount+" channels, repeat last frame")),j=ne),_e=[];for(var ge=0;ge<fe;ge++){U=U+g;var pe=Math.floor(U),ve=Math.floor(U+g)-pe,ye={dts:pe,pts:pe,cts:0,unit:j,size:j.byteLength,duration:ve,originalDts:ee,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0}};_e.push(ye),O+=ye.size}this._audioNextDts=U+g}else Y=Math.floor(U),$=Math.floor(U+g)-Y,this._audioNextDts=U+g}else{if(Y=ee-t,Q!==o.length-1){var Ee=o[Q+1].dts-this._dtsBase-t;$=Ee-Y}else if(D!=null){var Ee=D.dts-this._dtsBase-t;$=Ee-Y}else X.length>=1?$=X[X.length-1].duration:$=Math.floor(g);this._audioNextDts=Y+$}d===-1&&(d=Y),X.push({dts:Y,pts:Y,cts:0,unit:I.unit,size:I.unit.byteLength,duration:$,originalDts:ee,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0}}),re&&X.push.apply(X,_e)}}if(X.length===0){a.samples=[],a.length=0;return}x?b=new Uint8Array(O):(b=new Uint8Array(O),b[0]=O>>>24&255,b[1]=O>>>16&255,b[2]=O>>>8&255,b[3]=O&255,b.set(_.default.types.mdat,4));for(var Q=0;Q<X.length;Q++){var ne=X[Q].unit;b.set(ne,E),E+=ne.byteLength}var he=X[X.length-1];m=he.dts+he.duration;var se=new c.MediaSegmentInfo;se.beginDts=d,se.endDts=m,se.beginPts=d,se.endPts=m,se.originalBeginDts=X[0].originalDts,se.originalEndDts=he.originalDts+he.duration,se.firstSample=new c.SampleInfo(X[0].dts,X[0].pts,X[0].duration,X[0].originalDts,!1),se.lastSample=new c.SampleInfo(he.dts,he.pts,he.duration,he.originalDts,!1),this._isLive||this._audioSegmentInfoList.append(se),a.samples=X,a.sequenceNumber++;var Oe=null;x?Oe=new Uint8Array:Oe=_.default.moof(a,d),a.samples=[],a.length=0;var Ie={type:"audio",data:this._mergeBoxes(Oe,b).buffer,sampleCount:X.length,info:se};x&&R&&(Ie.timestampOffset=d),this._onMediaSegment("audio",Ie)}}},f.prototype._remuxVideo=function(s,r){if(this._videoMeta!=null){var a=s,o=a.samples,t=void 0,d=-1,m=-1,g=-1,x=-1;if(!(!o||o.length===0)&&!(o.length===1&&!r)){var R=8,S=null,E=8+s.length,b=null;if(o.length>1&&(b=o.pop(),E-=b.length),this._videoStashedLastSample!=null){var O=this._videoStashedLastSample;this._videoStashedLastSample=null,o.unshift(O),E+=O.length}b!=null&&(this._videoStashedLastSample=b);var D=o[0].dts-this._dtsBase;if(this._videoNextDts)t=D-this._videoNextDts;else if(this._videoSegmentInfoList.isEmpty())t=0;else{var I=this._videoSegmentInfoList.getLastSampleBefore(D);if(I!=null){var k=D-(I.originalDts+I.duration);k<=3&&(k=0);var K=I.dts+I.duration+k;t=D-K}else t=0}for(var W=new c.MediaSegmentInfo,N=[],H=0;H<o.length;H++){var O=o[H],J=O.dts-this._dtsBase,j=O.isKeyframe,Y=J-t,le=O.cts,X=Y+le;d===-1&&(d=Y,g=X);var Q=0;if(H!==o.length-1){var ne=o[H+1].dts-this._dtsBase-t;Q=ne-Y}else if(b!=null){var ne=b.dts-this._dtsBase-t;Q=ne-Y}else N.length>=1?Q=N[N.length-1].duration:Q=Math.floor(this._videoMeta.refSampleDuration);if(j){var ee=new c.SampleInfo(Y,X,Q,O.dts,!0);ee.fileposition=O.fileposition,W.appendSyncPoint(ee)}N.push({dts:Y,pts:X,cts:le,units:O.units,size:O.length,isKeyframe:j,duration:Q,originalDts:J,flags:{isLeading:0,dependsOn:j?2:1,isDependedOn:j?1:0,hasRedundancy:0,isNonSync:j?0:1}})}S=new Uint8Array(E),S[0]=E>>>24&255,S[1]=E>>>16&255,S[2]=E>>>8&255,S[3]=E&255,S.set(_.default.types.mdat,4);for(var H=0;H<N.length;H++)for(var re=N[H].units;re.length;){var _e=re.shift(),$=_e.data;S.set($,R),R+=$.byteLength}var U=N[N.length-1];if(m=U.dts+U.duration,x=U.pts+U.duration,this._videoNextDts=m,W.beginDts=d,W.endDts=m,W.beginPts=g,W.endPts=x,W.originalBeginDts=N[0].originalDts,W.originalEndDts=U.originalDts+U.duration,W.firstSample=new c.SampleInfo(N[0].dts,N[0].pts,N[0].duration,N[0].originalDts,N[0].isKeyframe),W.lastSample=new c.SampleInfo(U.dts,U.pts,U.duration,U.originalDts,U.isKeyframe),this._isLive||this._videoSegmentInfoList.append(W),a.samples=N,a.sequenceNumber++,this._forceFirstIDR){var ie=N[0].flags;ie.dependsOn=2,ie.isNonSync=0}var fe=_.default.moof(a,d);a.samples=[],a.length=0,this._onMediaSegment("video",{type:"video",data:this._mergeBoxes(fe,S).buffer,sampleCount:N.length,info:W})}}},f.prototype._mergeBoxes=function(s,r){var a=new Uint8Array(s.byteLength+r.byteLength);return a.set(s,0),a.set(r,s.byteLength),a},f}();A.default=l},"./src/utils/browser.js":function(T,A,y){y.r(A);var L={};function _(){var h=self.navigator.userAgent.toLowerCase(),u=/(edge)\/([\w.]+)/.exec(h)||/(opr)[\/]([\w.]+)/.exec(h)||/(chrome)[ \/]([\w.]+)/.exec(h)||/(iemobile)[\/]([\w.]+)/.exec(h)||/(version)(applewebkit)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(h)||/(webkit)[ \/]([\w.]+).*(version)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(h)||/(webkit)[ \/]([\w.]+)/.exec(h)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(h)||/(msie) ([\w.]+)/.exec(h)||h.indexOf("trident")>=0&&/(rv)(?::| )([\w.]+)/.exec(h)||h.indexOf("compatible")<0&&/(firefox)[ \/]([\w.]+)/.exec(h)||[],c=/(ipad)/.exec(h)||/(ipod)/.exec(h)||/(windows phone)/.exec(h)||/(iphone)/.exec(h)||/(kindle)/.exec(h)||/(android)/.exec(h)||/(windows)/.exec(h)||/(mac)/.exec(h)||/(linux)/.exec(h)||/(cros)/.exec(h)||[],n={browser:u[5]||u[3]||u[1]||"",version:u[2]||u[4]||"0",majorVersion:u[4]||u[2]||"0",platform:c[0]||""},l={};if(n.browser){l[n.browser]=!0;var f=n.majorVersion.split(".");l.version={major:parseInt(n.majorVersion,10),string:n.version},f.length>1&&(l.version.minor=parseInt(f[1],10)),f.length>2&&(l.version.build=parseInt(f[2],10))}if(n.platform&&(l[n.platform]=!0),(l.chrome||l.opr||l.safari)&&(l.webkit=!0),l.rv||l.iemobile){l.rv&&delete l.rv;var s="msie";n.browser=s,l[s]=!0}if(l.edge){delete l.edge;var r="msedge";n.browser=r,l[r]=!0}if(l.opr){var a="opera";n.browser=a,l[a]=!0}if(l.safari&&l.android){var o="android";n.browser=o,l[o]=!0}l.name=n.browser,l.platform=n.platform;for(var t in L)L.hasOwnProperty(t)&&delete L[t];Object.assign(L,l)}_(),A.default=L},"./src/utils/exception.js":function(T,A,y){y.r(A),y.d(A,{RuntimeException:function(){return _},IllegalStateException:function(){return h},InvalidArgumentException:function(){return u},NotImplementedException:function(){return c}});var L=function(){var n=function(l,f){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,r){s.__proto__=r}||function(s,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(s[a]=r[a])},n(l,f)};return function(l,f){if(typeof f!="function"&&f!==null)throw new TypeError("Class extends value "+String(f)+" is not a constructor or null");n(l,f);function s(){this.constructor=l}l.prototype=f===null?Object.create(f):(s.prototype=f.prototype,new s)}}(),_=function(){function n(l){this._message=l}return Object.defineProperty(n.prototype,"name",{get:function(){return"RuntimeException"},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"message",{get:function(){return this._message},enumerable:!1,configurable:!0}),n.prototype.toString=function(){return this.name+": "+this.message},n}(),h=function(n){L(l,n);function l(f){return n.call(this,f)||this}return Object.defineProperty(l.prototype,"name",{get:function(){return"IllegalStateException"},enumerable:!1,configurable:!0}),l}(_),u=function(n){L(l,n);function l(f){return n.call(this,f)||this}return Object.defineProperty(l.prototype,"name",{get:function(){return"InvalidArgumentException"},enumerable:!1,configurable:!0}),l}(_),c=function(n){L(l,n);function l(f){return n.call(this,f)||this}return Object.defineProperty(l.prototype,"name",{get:function(){return"NotImplementedException"},enumerable:!1,configurable:!0}),l}(_)},"./src/utils/logger.js":function(T,A,y){y.r(A);var L=y("./node_modules/events/events.js"),_=y.n(L),h=function(){function u(){}return u.e=function(c,n){(!c||u.FORCE_GLOBAL_TAG)&&(c=u.GLOBAL_TAG);var l="["+c+"] > "+n;u.ENABLE_CALLBACK&&u.emitter.emit("log","error",l),u.ENABLE_ERROR&&(console.error?console.error(l):console.warn?console.warn(l):console.log(l))},u.i=function(c,n){(!c||u.FORCE_GLOBAL_TAG)&&(c=u.GLOBAL_TAG);var l="["+c+"] > "+n;u.ENABLE_CALLBACK&&u.emitter.emit("log","info",l),u.ENABLE_INFO&&(console.info?console.info(l):console.log(l))},u.w=function(c,n){(!c||u.FORCE_GLOBAL_TAG)&&(c=u.GLOBAL_TAG);var l="["+c+"] > "+n;u.ENABLE_CALLBACK&&u.emitter.emit("log","warn",l),u.ENABLE_WARN&&(console.warn?console.warn(l):console.log(l))},u.d=function(c,n){(!c||u.FORCE_GLOBAL_TAG)&&(c=u.GLOBAL_TAG);var l="["+c+"] > "+n;u.ENABLE_CALLBACK&&u.emitter.emit("log","debug",l),u.ENABLE_DEBUG&&(console.debug?console.debug(l):console.log(l))},u.v=function(c,n){(!c||u.FORCE_GLOBAL_TAG)&&(c=u.GLOBAL_TAG);var l="["+c+"] > "+n;u.ENABLE_CALLBACK&&u.emitter.emit("log","verbose",l),u.ENABLE_VERBOSE&&console.log(l)},u}();h.GLOBAL_TAG="flv.js",h.FORCE_GLOBAL_TAG=!1,h.ENABLE_ERROR=!0,h.ENABLE_INFO=!0,h.ENABLE_WARN=!0,h.ENABLE_DEBUG=!0,h.ENABLE_VERBOSE=!0,h.ENABLE_CALLBACK=!1,h.emitter=new(_()),A.default=h},"./src/utils/logging-control.js":function(T,A,y){y.r(A);var L=y("./node_modules/events/events.js"),_=y.n(L),h=y("./src/utils/logger.js"),u=function(){function c(){}return Object.defineProperty(c,"forceGlobalTag",{get:function(){return h.default.FORCE_GLOBAL_TAG},set:function(n){h.default.FORCE_GLOBAL_TAG=n,c._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(c,"globalTag",{get:function(){return h.default.GLOBAL_TAG},set:function(n){h.default.GLOBAL_TAG=n,c._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(c,"enableAll",{get:function(){return h.default.ENABLE_VERBOSE&&h.default.ENABLE_DEBUG&&h.default.ENABLE_INFO&&h.default.ENABLE_WARN&&h.default.ENABLE_ERROR},set:function(n){h.default.ENABLE_VERBOSE=n,h.default.ENABLE_DEBUG=n,h.default.ENABLE_INFO=n,h.default.ENABLE_WARN=n,h.default.ENABLE_ERROR=n,c._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(c,"enableDebug",{get:function(){return h.default.ENABLE_DEBUG},set:function(n){h.default.ENABLE_DEBUG=n,c._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(c,"enableVerbose",{get:function(){return h.default.ENABLE_VERBOSE},set:function(n){h.default.ENABLE_VERBOSE=n,c._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(c,"enableInfo",{get:function(){return h.default.ENABLE_INFO},set:function(n){h.default.ENABLE_INFO=n,c._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(c,"enableWarn",{get:function(){return h.default.ENABLE_WARN},set:function(n){h.default.ENABLE_WARN=n,c._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(c,"enableError",{get:function(){return h.default.ENABLE_ERROR},set:function(n){h.default.ENABLE_ERROR=n,c._notifyChange()},enumerable:!1,configurable:!0}),c.getConfig=function(){return{globalTag:h.default.GLOBAL_TAG,forceGlobalTag:h.default.FORCE_GLOBAL_TAG,enableVerbose:h.default.ENABLE_VERBOSE,enableDebug:h.default.ENABLE_DEBUG,enableInfo:h.default.ENABLE_INFO,enableWarn:h.default.ENABLE_WARN,enableError:h.default.ENABLE_ERROR,enableCallback:h.default.ENABLE_CALLBACK}},c.applyConfig=function(n){h.default.GLOBAL_TAG=n.globalTag,h.default.FORCE_GLOBAL_TAG=n.forceGlobalTag,h.default.ENABLE_VERBOSE=n.enableVerbose,h.default.ENABLE_DEBUG=n.enableDebug,h.default.ENABLE_INFO=n.enableInfo,h.default.ENABLE_WARN=n.enableWarn,h.default.ENABLE_ERROR=n.enableError,h.default.ENABLE_CALLBACK=n.enableCallback},c._notifyChange=function(){var n=c.emitter;if(n.listenerCount("change")>0){var l=c.getConfig();n.emit("change",l)}},c.registerListener=function(n){c.emitter.addListener("change",n)},c.removeListener=function(n){c.emitter.removeListener("change",n)},c.addLogListener=function(n){h.default.emitter.addListener("log",n),h.default.emitter.listenerCount("log")>0&&(h.default.ENABLE_CALLBACK=!0,c._notifyChange())},c.removeLogListener=function(n){h.default.emitter.removeListener("log",n),h.default.emitter.listenerCount("log")===0&&(h.default.ENABLE_CALLBACK=!1,c._notifyChange())},c}();u.emitter=new(_()),A.default=u},"./src/utils/polyfill.js":function(T,A,y){y.r(A);var L=function(){function _(){}return _.install=function(){Object.setPrototypeOf=Object.setPrototypeOf||function(h,u){return h.__proto__=u,h},Object.assign=Object.assign||function(h){if(h==null)throw new TypeError("Cannot convert undefined or null to object");for(var u=Object(h),c=1;c<arguments.length;c++){var n=arguments[c];if(n!=null)for(var l in n)n.hasOwnProperty(l)&&(u[l]=n[l])}return u},typeof self.Promise!="function"&&y("./node_modules/es6-promise/dist/es6-promise.js").polyfill()},_}();L.install(),A.default=L},"./src/utils/utf8-conv.js":function(T,A,y){y.r(A);function L(h,u,c){var n=h;if(u+c<n.length){for(;c--;)if((n[++u]&192)!==128)return!1;return!0}else return!1}function _(h){for(var u=[],c=h,n=0,l=h.length;n<l;){if(c[n]<128){u.push(String.fromCharCode(c[n])),++n;continue}else if(!(c[n]<192)){if(c[n]<224){if(L(c,n,1)){var f=(c[n]&31)<<6|c[n+1]&63;if(f>=128){u.push(String.fromCharCode(f&65535)),n+=2;continue}}}else if(c[n]<240){if(L(c,n,2)){var f=(c[n]&15)<<12|(c[n+1]&63)<<6|c[n+2]&63;if(f>=2048&&(f&63488)!==55296){u.push(String.fromCharCode(f&65535)),n+=3;continue}}}else if(c[n]<248&&L(c,n,3)){var f=(c[n]&7)<<18|(c[n+1]&63)<<12|(c[n+2]&63)<<6|c[n+3]&63;if(f>65536&&f<1114112){f-=65536,u.push(String.fromCharCode(f>>>10|55296)),u.push(String.fromCharCode(f&1023|56320)),n+=4;continue}}}u.push(String.fromCharCode(65533)),++n}return u.join("")}A.default=_}},v={};function w(T){var A=v[T];if(A!==void 0)return A.exports;var y=v[T]={exports:{}};return i[T].call(y.exports,y,y.exports,w),y.exports}w.m=i,function(){w.n=function(T){var A=T&&T.__esModule?function(){return T.default}:function(){return T};return w.d(A,{a:A}),A}}(),function(){w.d=function(T,A){for(var y in A)w.o(A,y)&&!w.o(T,y)&&Object.defineProperty(T,y,{enumerable:!0,get:A[y]})}}(),function(){w.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}()}(),function(){w.o=function(T,A){return Object.prototype.hasOwnProperty.call(T,A)}}(),function(){w.r=function(T){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(T,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(T,"__esModule",{value:!0})}}();var B=w("./src/index.js");return B}()})})(St);var Tr=St.exports;const wr=Ct(Tr);function Be(p,e){p!=null&&p.classList.add(e)}function ke(p,e){p!=null&&p.classList.remove(e)}const me=p=>(Ft("data-v-1998491a"),p=p(),Ut(),p),Ir={class:"rongQi"},Dr=Bt('<div class="pad" data-v-1998491a><button id="shang" data-v-1998491a>up</button><button id="you" data-v-1998491a>right</button><button id="xia" data-v-1998491a>down</button><button id="zuo" data-v-1998491a>left</button></div>',1),Pr={class:"room"},Mr=me(()=>ue("button",{id:"keyBoard",style:{"background-color":"#ffffff"}},"点击此处激活车辆控制",-1)),Br=me(()=>ue("br",null,null,-1)),kr={class:"container-fluid"},Fr=me(()=>ue("h1",{style:{"text-align":"center"}},"监控",-1)),Ur=me(()=>ue("div",{id:"jk1",class:"jian card"},"监控1",-1)),jr=me(()=>ue("div",{id:"jk2",class:"jian card"},"监控2",-1)),Nr=me(()=>ue("div",{id:"jk3",class:"jian card"},"监控3",-1)),Vr=me(()=>ue("div",{id:"jk4",class:"jian card"},"监控4",-1)),Kr=me(()=>ue("div",{id:"di1",style:{display:"flex","justify-content":"space-between",gap:"20px"}},null,-1)),Wr=me(()=>ue("div",{id:"di2",style:{display:"flex","justify-content":"space-between",gap:"20px","margin-top":"20px"}},null,-1)),Gr=Tt({__name:"livepc",setup(p){const e=be(!0),i=be(!0),v=be(!0),w=be(!0),B=(n,l)=>{const f=wr.createPlayer({type:"flv",url:n,isLive:!0});return f.attachMediaElement(l),f.load(),f.play(),()=>{f.pause(),f.unload(),f.detachMediaElement()}};function T(n,l){const f=document.createElement("video");f.controls=!0,f.id=n,f.width=900,f.className="card";const s=document.getElementById(l);s==null||s.appendChild(f)}function A(n){const l=document.getElementById(n);console.log(l),l==null||l.remove()}const y=be("");function L(n,l){let f=0,s=null;return function(...r){const a=new Date().getTime();a-f<l?(s&&clearTimeout(s),s=setTimeout(()=>{f=a,n.apply(this,r)},l)):(f=a,n.apply(this,r))}}let _=be(!1);function h(n){y.value=n.key,Cr(y.value),y.value=""}const u=L(h,100),c=(n,l)=>{n!=null&&(l==null?(n.style.backgroundColor="#35363a",n.style.color="white"):(n.style.background="#f0f0f0",n.style.color="black"))};return wt(()=>{var n=document.getElementById("jk1"),l=document.getElementById("jk2"),f=document.getElementById("jk3"),s=document.getElementById("jk4");n==null||n.addEventListener("click",()=>{let m=()=>{};if(e.value){Be(n,"jianAc"),e.value=!1,T("v1","di1");let g=document.getElementById("v1");m=B("ws://localhost:8080/ws",g)}else ke(n,"jianAc"),m(),A("v1"),e.value=!0,console.log("执行移除")}),l==null||l.addEventListener("click",()=>{let m=()=>{};if(i.value){Be(l,"jianAc"),i.value=!1,T("v2","di1");let g=document.getElementById("v2");m=B("ws://localhost:8080/ws2",g)}else ke(l,"jianAc"),i.value=!0,m(),A("v2")}),f==null||f.addEventListener("click",()=>{let m=()=>{};if(v.value){Be(f,"jianAc"),v.value=!1,T("v3","di2");let g=document.getElementById("v3");m=B("ws://localhost:8080/ws3",g)}else ke(f,"jianAc"),v.value=!0,A("v3"),m()}),s==null||s.addEventListener("click",()=>{let m=()=>{};if(w.value){Be(s,"jianAc"),w.value=!1,T("v4","di2");let g=document.getElementById("v4");m=B("ws://localhost:8080/ws4",g)}else ke(s,"jianAc"),w.value=!0,m(),A("v4")});const r=document.getElementById("keyBoard");r&&(r.addEventListener("keydown",u),r.addEventListener("keyup",()=>{y.value="";const m={type:"move",msg:JSON.stringify({x:0,y:0})};setTimeout(()=>{Le(m),console.log("代码执行，按键结束",y.value)},150)}),r.addEventListener("click",()=>{r.style.backgroundColor="#67C23A"}),r.addEventListener("blur",function(){r.style.backgroundColor="#ffffff",Le({type:"move",msg:"not move"})}));const a=document.getElementById("zuo"),o=document.getElementById("you"),t=document.getElementById("shang"),d=document.getElementById("xia");setInterval(()=>{c(a,""),c(o,""),c(t,""),c(d,"")},1e3)}),(n,l)=>{const f=Ge("el-switch"),s=Ge("el-col"),r=Ge("el-row");return kt(),It("div",Ir,[Dr,ue("div",Pr,[Mr,Se(f,{modelValue:Dt(_),"onUpdate:modelValue":l[0]||(l[0]=a=>Pt(_)?_.value=a:_=a)},null,8,["modelValue"]),Mt(" 超声波跟随 "),Br]),ue("div",kr,[Fr,Se(r,{gutter:20,style:{"margin-bottom":"20px"}},{default:Ce(()=>[Se(s,{span:6},{default:Ce(()=>[Ur]),_:1}),Se(s,{span:6},{default:Ce(()=>[jr]),_:1}),Se(s,{span:6},{default:Ce(()=>[Nr]),_:1}),Se(s,{span:6},{default:Ce(()=>[Vr]),_:1})]),_:1}),Kr,Wr])])}}});const Hr=jt(Gr,[["__scopeId","data-v-1998491a"]]);export{Hr as default};
